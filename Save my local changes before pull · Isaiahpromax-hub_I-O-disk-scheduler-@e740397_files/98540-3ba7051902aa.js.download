"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[98540],{1117:(e,t,i)=>{i.d(t,{N:()=>et,$:()=>ei});var n=i(74848),a=i(96540),o=i(96760),s=i(78314),r=i(35898),l=i(71315),m=i(38621),d=i(72511),c=i(21373),u=i(57478),h=i(34164),p=i(21935),y=i(83878),x=i(24967),f=i(81945);let C=()=>(0,n.jsx)("div",{className:"d-flex gap-2",children:(0,n.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,n.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,n.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,n.jsx)(f.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,n.jsx)(f.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,n.jsx)(f.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,n.jsx)(x.e,{})]})})});try{C.displayName||(C.displayName="CommentLoading")}catch{}var w=i(26156),v=i(71073),g=i(23656),j=i(21086),b=i(38829),N=i(26076),k=i(19805),I=i(30617),S=i(49245),R=i(68534),T=i(42118),_=i(81034),B=i(88431);let E=(0,a.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:i,referenceId:o,buttonText:s,commentContent:r},l)=>{let[m,d]=(0,a.useState)(!1),c=(0,a.useRef)(null),u=(0,a.useRef)(void 0),{commentBoxSubject:h}=(0,I.X)(),p=(0,a.useCallback)(()=>{},[]),{markdownBody:y,resetMarkdownBody:x,markdownValidationResult:f,handleMarkdownBodyChanged:C}=(0,_.x)({commentBoxRef:c,markdownComposerRef:l,onChange:p,onCancel:()=>{},referenceId:o,insidePortal:!1});(0,a.useEffect)(()=>{e&&!y&&C(e)},[e]),(0,a.useEffect)(()=>{if(r&&u.current!==r){C(r),u.current=r;let e=window.setTimeout(()=>{c.current&&(c.current?.scrollIntoView(),c.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[r]),(0,B.N)(()=>{if(c&&c.current){let e=window.setTimeout(()=>{c.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[c]);let w=async()=>{d(!0),await i(y,x),d(!1)};return(0,n.jsx)(T.hF,{ref:c,validationResult:f,disabled:m,onChange:e=>{C(e)},onCancel:()=>{C(""),t?.()},onSave:w,saveButtonText:s,saveButtonTrailingIcon:!1,value:y,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,subject:h})});function M({comment:e,commitOid:t,onCancel:i,onUpdate:o}){let{editComment:s}=(0,I.X)(),r=(0,a.useRef)(null),l=async t=>{let i=await s(t,e);i.updatedFields&&o({...e,...i.updatedFields})};return(0,n.jsx)(E,{commitOid:t,initialMarkdown:e.body,ref:r,onSave:l,onCancel:i,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}E.displayName="CommitCommentEditor";try{M.displayName||(M.displayName="UpdateCommitComment")}catch{}function O({comments:e,commit:t,locked:i,deleteComment:a,updateComment:o,setNewCommentContent:s,repoOwnerGlobalRelayId:r}){return 0===e.length?null:(0,n.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,n.jsx)(A,{comment:e,commit:t,locked:i,deleteComment:a,updateComment:o,setNewCommentContent:s,repoOwnerGlobalRelayId:r},e.id))})}function A({comment:e,commit:t,locked:i,deleteComment:o,updateComment:r,setNewCommentContent:l,repoOwnerGlobalRelayId:m}){let d=(0,s.t)(),[c,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(e.isHidden),y=(0,a.useRef)(null),{deleteComment:f,hideComment:C,unhideComment:w}=(0,I.X)(),v=async()=>{let t=await f(e.id.toString());"canceled"===t||"error"!==t&&"success"===t&&o(e.id)},g=async t=>{let i=await C(e.id.toString(),t);"error"!==i&&"success"===i&&(r({...e,isHidden:!0,minimizedReason:t}),p(!0))},j=async()=>{let t=await w(e.id.toString());"error"!==t&&"success"===t&&(r({...e,isHidden:!1,minimizedReason:null}),p(!1))},b=t.authors.length>0?t.authors[0]?.login:"",T={...(0,S.p)(e,t,d,m),referenceText:(0,R.F)(t.oid)};return(0,n.jsxs)("div",{className:"border rounded-2",ref:y,id:e.urlFragment,tabIndex:-1,children:[(0,n.jsx)($,{comment:T,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:b,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:h,editComment:()=>{u(!0)},onReplySelect:l,onMinimize:p,navigate:()=>{},hideComment:g,unhideComment:j,deleteComment:v,commentRef:y,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),h?null:c?(0,n.jsx)("div",{className:"m-2",children:(0,n.jsx)(M,{comment:e,commitOid:t.oid,onUpdate:e=>{r(e),u(!1)},onCancel:()=>u(!1)})}):(0,n.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,n.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,n.jsx)(N.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,n.jsx)(a.Suspense,{fallback:(0,n.jsx)(x.e,{}),children:(0,n.jsx)(k.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:i})})]})]})}function $({hideActions:e,...t}){let i,o,s=t.commitComment;return t.showEditHistory&&(i=(0,n.jsx)(a.Suspense,{fallback:null,children:(0,n.jsx)(D,{id:s.relayId})}),o=(0,n.jsx)(L,{id:t.comment.id})),(0,n.jsx)(w.v,{lastEditedByMessage:o,editHistoryComponent:i,forceInlineAvatar:!0,...t,actions:e?void 0:(0,n.jsx)(v.p,{onSuccessfulBlock:()=>{setTimeout(()=>l.cg?.location.reload(),800)},...t})})}function D({id:e}){let t=(0,b.f)({id:e});return t?(0,n.jsx)(g.W,{editHistory:t}):null}function L({id:e}){let t=(0,b.f)({id:e});return t?(0,n.jsx)(j._,{editInformation:t}):null}try{O.displayName||(O.displayName="ExistingCommitComments")}catch{}try{A.displayName||(A.displayName="ExistingCommitComment")}catch{}try{$.displayName||($.displayName="CommitCommentHeader")}catch{}try{D.displayName||(D.displayName="CommitCommentHeaderEditHistory")}catch{}try{L.displayName||(L.displayName="CommitCommentHeaderLastEditedBy")}catch{}var U=i(25407),F=i(79634),P=i(96379),H=i(15220);function z({commitOid:e,locked:t,onClose:i}){let o=(0,s.t)(),{helpUrl:r}=(0,F.X)(),[l,m]=(0,a.useState)(!1),c=t?"Unlock":"Lock",u=async()=>{(await (0,P.DI)(`${(0,U.$Qz)({owner:o.ownerLogin,repo:o.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?i(!0):m(!0)},h=async()=>{(await (0,P.lS)(`${(0,U.$Qz)({owner:o.ownerLogin,repo:o.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?i(!1):m(!0)};return(0,n.jsxs)(H.l,{onClose:()=>i(),width:"large",title:`${c} conversation on this commit`,footerButtons:[{content:`${c} conversation`,buttonType:"danger",style:{width:"100%"},onClick:t?h:u}],children:[l&&(0,n.jsxs)(d.A,{className:"mb-2",variant:"danger",children:["There was an error ",c.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,n.jsxs)("p",{children:[c,"ing the conversation means:"]}),(0,n.jsx)("ul",{className:"ml-4",children:t?(0,n.jsxs)("li",{children:[(0,n.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("li",{children:["Other users ",(0,n.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),o.isOrgOwned?(0,n.jsxs)("li",{children:["You and other members of teams with"," ",(0,n.jsx)("a",{href:`${r}/get-started/learning-about-github/access-permissions-on-github`,children:"write access"})," ","to this repository ",(0,n.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,n.jsxs)("li",{children:["You and other collaborators"," ",(0,n.jsx)("a",{href:`${r}/get-started/learning-about-github/access-permissions-on-github`,children:"with access"})," to this repository ",(0,n.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,n.jsxs)("p",{className:"mb-0 mt-2",children:["You can always ",t?"lock":"unlock"," this commit again in the future."]})]})}try{z.displayName||(z.displayName="LockConversationDialog")}catch{}var V=i(21067),X=i(60912),Q=i(61423),G=i(11738),K=i(81156),Y=i(77430);function W({commitOid:e,onAddComment:t,onExpandCommentEditor:i,newCommentContent:o,canComment:s,locked:r,repoArchived:d,avatarURL:c}){let u=(0,V.M3)(),{addComment:h}=(0,I.X)(),p=(0,a.useRef)(null),y=async(e,i)=>{let n=await h(e);n.comment&&(t(n.comment),i())},x=(0,Q.i)(d,r,u?void 0:(0,n.jsx)(q,{redirectUrl:l.fV?.href}),"commit");return(0,n.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:s?(0,n.jsx)(Z,{commitOid:e,commentEditor:p,onExpandEditor:i,onSave:y,newCommentContent:o,avatarURL:c||K.t.ghostUser.avatarUrl}):(0,n.jsx)(X.P,{icon:m.LockIcon,reason:x})})}function Z(e){let[t,i]=(0,a.useState)(()=>void 0!==e.newCommentContent),[s,r]=(0,a.useState)(e.newCommentContent);t||void 0===e.newCommentContent||s===e.newCommentContent||(i(!0),r(e.newCommentContent));let l="Comment";return t?(0,n.jsx)("div",{id:o.Bq.issueCommentComposer,children:(0,n.jsx)(E,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,initialMarkdown:e.newCommentContent,buttonText:l,onCancel:()=>{i(!1)}})}):(0,n.jsxs)("div",{id:o.Bq.issueCommentComposer,className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,n.jsx)(Y.r,{src:e.avatarURL,size:20}),(0,n.jsx)(G.z,{onClick:()=>{i(!0),e.onExpandEditor?.()},children:l})]})}function q({redirectUrl:e}){return(0,n.jsxs)("span",{children:["Please ",(0,n.jsx)("a",{href:e?`/login?return_to=${e}`:"/login",children:"sign in"})," to comment."]})}try{W.displayName||(W.displayName="NewCommitComment")}catch{}try{Z.displayName||(Z.displayName="CompactEditor")}catch{}try{q.displayName||(q.displayName="LoggedOutMessage")}catch{}var J=i(10925);let ee=(0,a.forwardRef)(({commitOid:e,subscribed:t},i)=>{let o,[r,l]=(0,a.useState)(t),[d,u]=(0,a.useState)(!1),h=(0,s.t)(),p=(0,J.H)("/notifications/thread","post");o=d?`You're now ${r?"subscribed":"unsubscribed"} to this thread.`:r?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let y=async()=>{let t=new FormData;t.append("repository_id",h.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",r?"unsubscribe":"subscribe"),t.append("authenticity_token",p??""),(await (0,P.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(l(!r),u(!0))};return(0,n.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:i,children:[(0,n.jsx)(c.Q,{onClick:y,size:"small",leadingVisual:r?m.BellSlashIcon:m.BellIcon,children:r?"Unsubscribe":"Subscribe"}),(0,n.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:o})]})});ee.displayName="NotificationsFooter";let et="comments";function ei(e){return(0,n.jsx)("div",{className:(0,h.$)("d-flex flex-column gap-2 pt-3",o.mU.commentsContainer,"Comment-module__commit-discussion-comments--GlkCu"),id:et,children:(0,a.createElement)(en,{...e,key:e.commit.oid})})}function en({commit:e,commentInfo:t,repoOwnerGlobalRelayId:i}){let o=(0,s.t)(),m=(0,r.i)(),{retry:u,loadMore:h,canLoadMore:x,addComment:f,deleteComment:w,updateComment:v,count:g,comments:j,subscribed:b,providerState:N}=(0,p.y)(),[k,I]=(0,a.useState)(void 0),[S,R]=(0,a.useState)(t.locked),T=(0,a.useMemo)(()=>(0,y.N)(e.oid,o.id),[e.oid,o.id]),_=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(l.cg?.location.hash){let e=l.cg.location.hash.slice(1);if(j.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[j]);let B=(0,a.useCallback)(()=>{setTimeout(()=>_.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ea,{commitOid:e.oid,commentCount:g,canLock:t.canLock,locked:S,setLocked:R}),"loading"===N&&(0,n.jsx)(C,{}),"error"===N&&(0,n.jsxs)(d.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,n.jsx)("span",{children:"Failed to load comments."}),(0,n.jsx)(c.Q,{onClick:()=>u(),children:"Retry"})]}),"loaded"===N&&x&&(0,n.jsx)(c.Q,{className:"width-full",onClick:()=>h(),children:"Load more comments"}),(0,n.jsx)(O,{comments:j,commit:e,locked:S,repoOwnerGlobalRelayId:i,deleteComment:w,updateComment:v,setNewCommentContent:I}),T?(0,n.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,n.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:"Comment-module__discussion-comments-rose--JwtpK"},`rose-${t}`))}):null,"loaded"===N||0!==j.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{commitOid:e.oid,onAddComment:f,onExpandCommentEditor:B,newCommentContent:k,canComment:t.canComment,locked:S,repoArchived:t.repoArchived,avatarURL:m?.avatarURL}),m?(0,n.jsx)(ee,{ref:_,commitOid:e.oid,subscribed:b??!1}):null]}):null]})}function ea({commitOid:e,commentCount:t,locked:i,setLocked:o,canLock:s}){let[r,l]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,n.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,n.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,n.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,n.jsx)(u.A,{children:t})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c.Q,{leadingVisual:i?m.KeyIcon:m.LockIcon,variant:"invisible",onClick:()=>l(!0),children:[i?"Unlock":"Lock"," conversation"]}),r&&(0,n.jsx)(z,{commitOid:e,locked:i,onClose:e=>{l(!1),void 0!==e&&o(e)}})]})]})}try{ei.displayName||(ei.displayName="DiscussionComments")}catch{}try{en.displayName||(en.displayName="DiscussionCommentsInternal")}catch{}try{ea.displayName||(ea.displayName="DiscussionCommentsHeader")}catch{}},4929:(e,t,i)=>{i.d(t,{V:()=>s});var n=i(74848),a=i(29731),o=i(34164);function s({children:e,alignment:t,variant:i,...s}){return(0,n.jsx)("div",{...(0,a.G)("list-view-item-metadata-item"),...s,className:(0,o.$)("Metadata-module__metadata--ODMG0","primary"===i?"Metadata-module__primary--S8Orc":"Metadata-module__secondary--1te4w","right"===t&&"Metadata-module__alignRight--A1PHa",s.className),children:e})}try{s.displayName||(s.displayName="ListItemMetadata")}catch{}},10925:(e,t,i)=>{i.d(t,{H:()=>a});var n=i(76648);function a(e,t){let{csrf_tokens:i}=(0,n.B)();return i?.[e]?.[t]}},21935:(e,t,i)=>{i.d(t,{c:()=>d,y:()=>c});var n,a=i(74848),o=i(73189),s=i(25407),r=i(96379),l=i(96540);let m=(0,l.createContext)({comments:[],addComment:o.l,deleteComment:o.l,updateComment:o.l,loadMore:o.l,retry:o.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function d({children:e,comments:t=[],commentCount:i=0,canLoadMore:n=!1,subscribed:o=!1,providerState:d="initial",repo:c,commitOid:u}){let[h,p]=(0,l.useState)(t),[y,x]=(0,l.useState)(i),[f,C]=(0,l.useState)(n),[w,v]=(0,l.useState)(d),[g,j]=(0,l.useState)(o);(0,l.useEffect)(()=>{x(i),p(t),C(n),j(o),v(d)},[d]);let b=(0,l.useCallback)(async e=>{v("loading");let t=await (0,r.Sr)((0,s.Mo3)({owner:c.ownerLogin,repo:c.name,commitOid:u,beforeCommentId:e}));if(t.ok){let i=await t.json();e?p(e=>[...i.comments,...e]):p(i.comments),v("loaded"),x(i.count),j(i.subscribed),C(i.canLoadMore)}else v("error")},[c.ownerLogin,c.name,u]),N=(0,l.useCallback)(()=>{let e=h[0];e&&f&&b(e.id.toString())},[f,h,b]),k=(0,l.useCallback)(e=>{p([...h,e]),x((y??0)+1)},[h,y]),I=(0,l.useCallback)(e=>{p(h.filter(t=>t.id!==e)),x((y??0)-1)},[h,y]),S=(0,l.useCallback)(e=>{p(h.map(t=>t.id===e.id?e:t))},[h]),R=(0,l.useMemo)(()=>({addComment:k,canLoadMore:f,comments:h,count:y,deleteComment:I,loadMore:N,retry:b,subscribed:g,providerState:w,updateComment:S}),[k,f,h,y,I,b,N,w,g,S]);return(0,a.jsx)(m.Provider,{value:R,children:e})}function c(){let e=(0,l.useContext)(m);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{m.displayName||(m.displayName="DiscussionCommentsContext")}catch{}try{d.displayName||(d.displayName="DiscussionCommentsProvider")}catch{}try{(n=DiscussionComments).displayName||(n.displayName="DiscussionComments")}catch{}},24967:(e,t,i)=>{i.d(t,{e:()=>o});var n=i(74848),a=i(81945);function o(){return(0,n.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,n.jsx)(a.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{o.displayName||(o.displayName="ReactionViewerLoading")}catch{}},28014:(e,t,i)=>{i.d(t,{B:()=>d,r:()=>m});var n=i(74848),a=i(73189),o=i(96540);let s=(0,o.createContext)({comments:[],addComments:a.l,findInlineComment:()=>void 0,findInlineCommentWithRelay:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0,updateInlineCommentMapWithNewComment:()=>void 0,getInlineCommentInfoByPathAndPosition:()=>void 0});function r(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function l(e){let t=new Map;for(let i in e)if(e.hasOwnProperty(i)){let n=new Map;for(let t in e[i])e[i].hasOwnProperty(t)&&n.set(Number(t),e[i][Number(t)]);t.set(i,n)}return t}function m({children:e,initialFiles:t,initialExpandedThreadId:i,initialInlineComments:a}){let[m,d]=(0,o.useState)(()=>a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[]),[c,u]=(0,o.useState)(t??[]),[h,p]=(0,o.useState)(()=>t?r(t):new Map),[y,x]=(0,o.useState)(()=>a?l(a):new Map),f=(0,o.useCallback)((e,t,i,n)=>{if(n){let n=y.get(e)?.get(t)??[];n=n.concat(i);let a=y.get(e)?.set(t,n);x(y.set(e,a??new Map)??y)}else{let n=y.get(e)?.set(t,i);x(y.set(e,n??new Map)??y)}},[y]);(0,o.useEffect)(()=>{u(t??[]),p(t?r(t):new Map),x(a?l(a):new Map),d(a?Object.values(a).flatMap(e=>Array.from(Object.values(e).flat())):[])},[t,a]);let C=(0,o.useCallback)((e,t,i)=>{let n=e.map(e=>e.id),a=m.filter(e=>!n.includes(e.id)),o=c.filter(e=>e.path!==t||e.position!==parseInt(i)),s={path:t,position:parseInt(i),count:e.length,threads:[{id:`${t}::${i}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};d([...a,...e]),u([...o,s]),p(r([...o,s])),f(t,parseInt(i),e,!1)},[c,m,f]),w=(0,o.useCallback)(e=>{if(e)return m.find(t=>t.id===e)},[m]),v=(0,o.useCallback)(e=>m.find(t=>t.relayId===e),[m]),g=(0,o.useCallback)(e=>{let t=0;for(let i of c)i.path===e&&(t+=i.count);return t},[c]),j=(0,o.useCallback)((e,t)=>h.get(`${e}::${t}`),[h]),b=(0,o.useCallback)((e,t)=>y.get(e)?.get(t),[y]),N=(0,o.useMemo)(()=>({comments:m,addComments:C,findInlineComment:w,findInlineCommentWithRelay:v,getCommentCountByPath:g,getThreadDataByPathAndPosition:j,getInlineCommentInfoByPathAndPosition:b,updateInlineCommentMapWithNewComment:f,initialExpandedThreadId:i}),[C,m,w,v,g,j,b,f,i]);return(0,n.jsx)(s.Provider,{value:N,children:e})}function d(){let e=(0,o.useContext)(s);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{s.displayName||(s.displayName="InlineCommentsContext")}catch{}try{m.displayName||(m.displayName="InlineCommentsProvider")}catch{}},30617:(e,t,i)=>{i.d(t,{X:()=>l});var n=i(78314),a=i(25407),o=i(76648),s=i(96379),r=i(96540);function l(){let e=(0,n.t)(),{commit:t}=(0,o.B)(),i=`/${(0,a.QU3)(e.ownerLogin)}/${(0,a.QU3)(e.name)}/commit_comment`,l=`${i}/create`,m=(0,r.useCallback)(async(e,i,n)=>{let a=new FormData;a.append("commit_id",t.oid),a.append("comment[body]",e),i&&n&&(a.append("path",i),a.append("position",n.toString()));let o=await (0,s.DI)(l,{method:"POST",body:a});return o.ok?{error:null,comment:(await o.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[t.oid,l]),d=(0,r.useCallback)(async(e,t)=>{let n=new FormData;n.append("_method","put"),n.append("commit_comment[id]",t.id.toString()),n.append("commit_comment[body]",e),n.append("commit_comment[bodyVersion]",t.bodyVersion);let a=await (0,s.DI)(i,{method:"POST",body:n});if(!a.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await a.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[i]),c=(0,r.useCallback)(async e=>{let t=new FormData;return(t.append("_method","delete"),t.append("commit_comment[id]",e),(await (0,s.DI)(i,{method:"POST",body:t})).ok)?"success":"error"},[i]),u=(0,r.useCallback)(async(e,t)=>{let n=new FormData;return(n.append("_method","put"),n.append("classifier",t),(await (0,s.DI)(`${i}/${e}/minimize`,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok)?"success":"error"},[i]),h=(0,r.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,s.DI)(`${i}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[i]),p=(0,r.useMemo)(()=>({repository:{databaseId:e.id,nwo:`${e.ownerLogin}/${e.name}`,slashCommandsEnabled:!1},type:"commit",id:{id:t.oid}}),[e.id,e.name,e.ownerLogin,t.oid]);return(0,r.useMemo)(()=>({addComment:m,commentBoxSubject:p,editComment:d,deleteComment:c,hideComment:u,unhideComment:h}),[m,c,d,u,h,p])}},34745:(e,t,i)=>{i.d(t,{f:()=>q});var n=i(74848),a=i(44569),o=i(71315),s=i(96459),r=i(5956),l=i(96540),m=i(97174),d=i(76214),c=i(4559),u=i(99896),h=i(2970),p=i(98994),y=i(43617),x=i(4929),f=i(95378),C=i(73017),w=i(30459),v=i(54571),g=i(16790),j=i(4095),b=i(48926),N=i(25407),k=i(66108),I=i(38621),S=i(21373),R=i(26108),T=i(55255),_=i(11196),B=i(68534),E=i(1117);let M=l.memo(O);function O({repo:e,oid:t}){let i=`browse-repo-${(0,B.F)(t)}`,{sendAnalyticsEvent:a}=(0,w.s)(),{loggingPrefix:o,loggingPayload:s}=(0,g.xe)(),r=(0,g.eX)();return(0,n.jsx)(T.A,{"aria-label":"Browse repository at this point",id:i,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":i,href:(0,N.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{r&&a(`${o}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",s)},children:(0,n.jsx)(I.CodeIcon,{})})})}let A=l.memo($);function $({repo:e,oid:t,path:i}){if(!i)return null;let a=`view-code-${(0,B.F)(t)}`;return(0,n.jsx)(T.A,{"aria-label":"View code at this point",id:a,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":a,href:(0,N.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:i}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,n.jsx)(I.FileCodeIcon,{})})})}function D({commitUrl:e,oid:t,softNavToCommit:i}){let a={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,n.jsx)(T.A,{"aria-label":"View commit details",direction:"s",children:i?(0,n.jsx)(S.Q,{as:k.N,to:e,...a,children:(0,B.F)(t)}):(0,n.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...a,children:(0,n.jsx)("span",{className:"Button-content",children:(0,n.jsx)("span",{className:"Button-label color-fg-muted",children:(0,B.F)(t)})})})})}function L({showDescription:e,setShowDescription:t,oid:i}){let a=(0,B.F)(i),o=`show-description-${a}`,s=`${!e?"Show":"Hide"} description for ${a}`;return(0,n.jsx)(_.m,{id:o,text:s,"aria-label":s,children:(0,n.jsx)(R.K,{icon:I.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":o,"aria-pressed":e,"aria-expanded":e,onClick:i=>{i.preventDefault(),t(!e)}})})}function U({count:e,repo:t,oid:i}){if(!e)return null;let a=`comment-count-${(0,B.F)(i)}`;return(0,n.jsx)(T.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:a,direction:"sw",children:(0,n.jsx)("a",{"aria-labelledby":a,href:`${(0,N.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:i})}#${E.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,n.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,n.jsx)(I.CommentIcon,{}),(0,n.jsx)("span",{className:"Button-label",children:e})]})})})}try{M.displayName||(M.displayName="BrowseRepositoryAtThisPoint")}catch{}try{O.displayName||(O.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{A.displayName||(A.displayName="ViewCodeAtThisPoint")}catch{}try{$.displayName||($.displayName="WrappedViewCodeAtThisPoint")}catch{}try{D.displayName||(D.displayName="ViewCommitDetails")}catch{}try{L.displayName||(L.displayName="ToggleCommitDescription")}catch{}try{U.displayName||(U.displayName="CommitCommentCount")}catch{}var F=i(44185),P=i(81945),H=i(98783),z=i(42257);function V({deferredData:e}){let{helpUrl:t}=(0,H.D)(),i=(0,j.xs)();return(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)(P.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!i&&void 0===e&&(0,n.jsx)(P.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!i&&e&&(0,n.jsx)(F.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function X({deferredData:e,oid:t,repository:i}){let a=(0,j.xs)(),o="";try{o=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,n.jsxs)(n.Fragment,{children:[a&&(0,n.jsx)(P.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&void 0===e&&(0,n.jsx)(P.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!a&&e?.statusCheckStatus&&(0,n.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,n.jsx)("div",{className:"d-none d-sm-flex",children:(0,n.jsx)(z.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:o,repo:i})})]})}try{V.displayName||(V.displayName="SignedCommitBadge")}catch{}try{X.displayName||(X.displayName="CommitChecksStatusBadge")}catch{}var Q=i(43147);let G="CommitRow-module__ListItemTitle_0--xTKIC",K=(0,l.lazy)(()=>i.e(22220).then(i.bind(i,22220)).then(e=>({default:e.CommitActionBar})));function Y({commit:e,repo:t,path:i,softNavToCommit:a}){let[o,s]=(0,l.useState)(!1),r=(0,l.useRef)(null),[m,d]=(0,u.ym)(e.oid,t),[N,k]=(0,l.useState)(!1),I=(0,j.NO)(e.oid),[S]=(0,v.I)(()=>!1,!0,[]),{sendAnalyticsEvent:R}=(0,w.s)(),{loggingPrefix:T,loggingPayload:_}=(0,g.xe)(),B=(0,g.eX)(),E=()=>{B&&R(`${T}click`,"COMMITS_TITLE_CLICKED",_)};return(0,l.useEffect)(()=>{o&&r.current&&r.current.textContent&&(0,c.i)(r.current.textContent)},[r,o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h.c,{"data-testid":"commit-row-item","data-commit-link":e.url,title:e.shortMessageMarkdownLink&&!S?(0,n.jsx)(f.kx,{html:e.shortMessageMarkdownLink,onClick:E,containerClassName:G,headingClassName:G,children:e.bodyMessageHtml&&(0,n.jsx)(L,{showDescription:o,setShowDescription:s,oid:e.oid})}):(0,n.jsx)(f.ao,{value:e.shortMessage,href:e.url,onClick:E,containerClassName:G,headingClassName:G,children:e.bodyMessageHtml&&(0,n.jsx)(L,{showDescription:o,setShowDescription:s,oid:e.oid})}),metadata:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.V,{children:(0,n.jsx)(U,{oid:e.oid,repo:t,count:I?.commentCount??0})}),(0,n.jsx)(x.V,{className:"CommitRow-module__ListItemMetadata_0--Tnt1n",children:(0,n.jsx)(V,{deferredData:I})}),(0,n.jsxs)(x.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,n.jsxs)("div",{className:"d-flex",children:[(0,n.jsx)(D,{oid:e.oid,commitUrl:e.url,softNavToCommit:a}),(0,n.jsx)(Q.w,{sha:e.oid})]}),(0,n.jsx)(A,{repo:t,oid:e.oid,path:i}),(0,n.jsx)(M,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,n.jsx)(l.Suspense,{children:(0,n.jsx)(K,{commit:e,repo:t,path:i,setDialogOpen:k,fetchCheckDetails:d,deferredData:I})}),className:"CommitRow-module__ListItem_0--Iwpdk",children:[(0,n.jsx)("div",{className:"px-1"}),(0,n.jsxs)(y.Q,{children:[o&&e.bodyMessageHtml&&(0,n.jsx)(p.U,{children:(0,n.jsx)(C.JR,{ref:r,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,n.jsx)(p.U,{children:(0,n.jsx)(b.j,{commit:e,repo:t,children:(0,n.jsx)(X,{repository:t,deferredData:I,oid:e.oid})})})]})]}),I?.statusCheckStatus&&N&&(0,n.jsx)(u.xC,{combinedStatus:m,isOpen:N,onDismiss:()=>{k(!1)}})]})}try{K.displayName||(K.displayName="CommitActionBar")}catch{}try{Y.displayName||(Y.displayName="CommitRow")}catch{}var W=i(89830);function Z({commits:e,title:t,shouldClipTimeline:i,repo:a,currentBlobPath:o="",softNavToCommit:s}){let r=(0,l.useId)();return(0,n.jsxs)(W.s,{clipTimeline:i?"top":"none",children:[(0,n.jsx)(W.s.Heading,{as:"h3",id:r,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,n.jsx)(d.Z,{className:"CommitGroup-module__panel--Agk7V",children:(0,n.jsx)(m.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:r,children:e.map(e=>(0,n.jsx)(Y,{commit:e,repo:a,path:o,softNavToCommit:s},e.oid))},t)})]})}try{Z.displayName||(Z.displayName="CommitGroup")}catch{}function q({leadingContent:e,commitGroups:t,trailingContent:i,deferredCommitData:m=j.Xx,repository:d,currentBlobPath:c,loggingPayload:u,loggingPrefix:h,shouldClipTimeline:p=!0,softNavToCommit:y=!1}){let x=(0,l.useRef)(0),f=(0,l.useRef)(null),C=(0,l.useRef)(null),w=(0,l.useRef)(!1),v=(0,l.useRef)([]),b=(0,s.Z)();return(0,l.useEffect)(()=>{let e=setTimeout(()=>{v.current=Array.from(document.querySelectorAll('[id*="-list-view-node-"]'))},0);return()=>clearTimeout(e)},[t]),(0,n.jsx)(j.M2,{deferredData:m,children:(0,n.jsx)(g.zq,{loggingInfo:{loggingPayload:u,loggingPrefix:h},children:(0,n.jsxs)(r.A,{clipSidebar:!0,onKeyDown:e=>{var t;"Enter"===e.key?(e=>{if("Enter"===e.key){let t=o.XC?.activeElement?.hasAttribute("data-commit-link")?o.XC?.activeElement?.getAttribute("data-commit-link"):void 0;t&&(e.ctrlKey||e.metaKey?o.cg?.open(t,"_blank"):b(t))}})(e):"Tab"===e.key?"Tab"===(t=e).key&&(t.shiftKey?(o.XC?.activeElement?.hasAttribute("data-commit-link")&&!w.current&&f.current&&(f.current.focus(),C.current=f.current),w.current=!0):(f.current=C.current,C.current=o.XC?.activeElement??null,w.current=!1)):(e=>{if(!["j","k","ArrowDown","ArrowUp"].includes(e.key)||!(0,a.zw)()&&("j"===e.key||"k"===e.key))return;let t=1;for(let e=0;e<v.current.length;e++)v.current[e]?.contains(o.XC?.activeElement)&&(t=e+1);let i=!1;if(("ArrowUp"===e.key||"k"===e.key)&&(i=!0),x.current!==t)x.current=t;else{let e=v.current[i?t-2:t];e?.focus(),e?.focus(),x.current=i?t-1:t+1}})(e)},children:[e,t.map((e,t)=>(0,n.jsx)(Z,{title:e.title,commits:e.commits,shouldClipTimeline:p&&0===t,currentBlobPath:c,repo:d,softNavToCommit:y},e.title)),i]})})})}try{q.displayName||(q.displayName="Commits")}catch{}},35898:(e,t,i)=>{i.d(t,{Q:()=>r,i:()=>l});var n=i(74848),a=i(21728),o=i(96540);let s=o.createContext(void 0);function r(e){let t,i=(0,a.c)(3),{user:o,children:r}=e;return i[0]!==r||i[1]!==o?(t=(0,n.jsxs)(s.Provider,{value:o,children:[" ",r," "]}),i[0]=r,i[1]=o,i[2]=t):t=i[2],t}function l(){return o.useContext(s)}try{s.displayName||(s.displayName="CurrentUserContext")}catch{}try{r.displayName||(r.displayName="CurrentUserProvider")}catch{}},49245:(e,t,i)=>{i.d(t,{I:()=>m,p:()=>c});var n=i(25407),a=i(71315),o=i(96379),s=i(96540),r=i(28014),l=i(68534);function m({repo:e,commit:t,viewerCanReply:i,repoOwnerGlobalRelayId:a,getInlineCommentInfoByPathAndPosition:l}){let{addComments:m}=(0,r.B)();return(0,s.useCallback)((s,r)=>new Promise(async(c,u)=>{let[h,p]=s.split("::");if(!h||!p)return void u(Error("Invalid threadId"));if(!r){let n=l(h,Number(p));c(n?d(n,t,e,i,s,a):void 0);return}let y=await (0,o.lS)(`${(0,n.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:h,position:p})}${r?"&isRefetch=true":""}`);if(y.ok){let n=await y.json();m(n.comments,h,p),c(n.comments?d(n.comments,t,e,i,s,a):void 0)}else u(Error("Failed to fetch thread"))}),[m,t,l,e,i,a])}function d(e,t,i,n,a,o){return{commentsData:{comments:e.map(e=>c(e,t,i,o))},id:a,viewerCanReply:n}}function c(e,t,i,o){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${a.cg?.location.origin}${(0,n.$Qz)({owner:i.ownerLogin,repo:i.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReact:e.viewerCanReact,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerCanUnminimize:e.viewerCanUnminimize??!1,viewerDidAuthor:e.viewerDidAuthor,reactionGroups:e.reactionGroups,reference:{number:void 0,text:(0,l.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:i.id.toString(),isPrivate:i.private,name:i.name,owner:{id:o,login:i.ownerLogin,url:""}}}}},57028:(e,t,i)=>{i.d(t,{M:()=>h});var n=i(74848),a=i(4559),o=i(40260),s=i(73189),r=i(38621),l=i(99511),m=i(26382),d=i(96540),c=i(76214);let u={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,n.jsx)(r.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,n.jsx)(r.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function h({timeoutMessage:e,unavailableMessage:t}){let i=u[""!==e?"timeout":"unavailable"],h=t??i.description;return(0,d.useEffect)(()=>{(0,a.i)(`${i.heading}. ${h} ${e}`.trim())},[i.heading,h,e]),(0,n.jsx)(c.Z,{children:(0,n.jsx)("div",{"data-hpc":!0,children:(0,n.jsxs)(m.E,{border:!1,spacious:!0,children:[(0,n.jsx)(m.E.Visual,{children:i.icon}),(0,n.jsx)(m.E.Heading,{children:i.heading}),(0,n.jsx)(m.E.Description,{children:h}),i.showTextInput&&(0,n.jsx)(l.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:s.l,readOnly:!0,size:"large",trailingAction:(0,n.jsx)(l.A.Action,{onClick:()=>(0,o.D)(e),icon:r.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{h.displayName||(h.displayName="CommitsBlankState")}catch{}},76214:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(74848),a=i(34164);function o({children:e,className:t=""}){return(0,n.jsx)("div",{className:(0,a.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{o.displayName||(o.displayName="Panel")}catch{}},78314:(e,t,i)=>{i.d(t,{d:()=>r,t:()=>l});var n=i(74848),a=i(21728),o=i(96540);let s=o.createContext({});function r(e){let t,i=(0,a.c)(3),{repository:o,children:r}=e;return i[0]!==r||i[1]!==o?(t=(0,n.jsxs)(s.Provider,{value:o,children:[" ",r," "]}),i[0]=r,i[1]=o,i[2]=t):t=i[2],t}function l(){return o.useContext(s)}try{s.displayName||(s.displayName="CurrentRepositoryContext")}catch{}try{r.displayName||(r.displayName="CurrentRepositoryProvider")}catch{}},83878:(e,t,i)=>{i.d(t,{N:()=>n});function n(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}},89830:(e,t,i)=>{i.d(t,{s:()=>h});var n=i(74848),a=i(38621),o=i(5956),s=i(81960),r=i(10095),l=i(34164);let m={timelineRowItem:"TimelineRow-module__timelineRowItem--EN_EF",timelineRowBadge:"TimelineRow-module__timelineRowBadge--Lyy1u",bottom:"TimelineRow-module__bottom--UHzX3",top:"TimelineRow-module__top--l0ZlZ"},d=()=>(0,n.jsx)(r.A,{icon:a.GitCommitIcon});function c({children:e,leadingVisual:t,clipTimeline:i="none",className:a}){return(0,n.jsxs)(o.A.Item,{className:(0,l.$)(a,m.timelineRowItem,"none"!==i&&m[i]),children:[(0,n.jsx)(o.A.Badge,{className:m.timelineRowBadge,children:t??(0,n.jsx)(d,{})}),(0,n.jsx)(o.A.Body,{className:"mt-0",children:e})]})}function u({title:e,as:t,...i}){return(0,n.jsx)(s.A,{as:t,className:"text-normal f5 py-1",...i,children:e})}let h=Object.assign(c,{Heading:u});try{d.displayName||(d.displayName="DefaultLeadingVisual")}catch{}try{c.displayName||(c.displayName="TimelineRowComponent")}catch{}try{u.displayName||(u.displayName="TimelineRowHeading")}catch{}try{h.displayName||(h.displayName="TimelineRow")}catch{}},98783:(e,t,i)=>{i.d(t,{D:()=>a});var n=i(79634);function a(){return(0,n.X)()}}}]);
//# sourceMappingURL=98540-328d5e26595b.js.map