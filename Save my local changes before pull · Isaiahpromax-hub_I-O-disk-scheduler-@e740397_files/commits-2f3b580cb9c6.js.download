"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([[19976,42967],{1756:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(23149),r=Object.create,a=function(){function e(){}return function(t){if(!(0,i.A)(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),l=n(15647),s=n(97271);let o=function(e){return"function"!=typeof e.constructor||(0,s.A)(e)?{}:a((0,l.A)(e))}},1801:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(90565);let r=function(e,t){var n=t?(0,i.A)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},4788:(e,t,n)=>{n.d(t,{N:()=>DebouncedWorkerManager});var i=n(35750),r=n(18150),a=n(85242),l=n(88243),s=n(16213),o=n(50467),c=new WeakMap,d=new WeakMap,u=new WeakMap,m=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakSet;let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if((0,i._)(this,h)&&(0,i._)(this,h).call(this,e))return(0,i._)(this,u)&&clearTimeout((0,i._)(this,u)),(0,l._)(this,p,g).call(this,e);this.idle()?((0,i._)(this,u)&&clearTimeout((0,i._)(this,u)),(0,a._)(this,u,setTimeout(()=>{(0,l._)(this,p,g).call(this,e)},(0,i._)(this,f)))):(0,a._)(this,d,e)}idle(){return!(0,i._)(this,c)}terminate(){(0,i._)(this,m).terminate()}constructor(e,t=200,n){(0,s._)(this,p),(0,r._)(this,c,{writable:!0,value:void 0}),(0,r._)(this,d,{writable:!0,value:void 0}),(0,o._)(this,"onResponse",void 0),(0,r._)(this,u,{writable:!0,value:void 0}),(0,r._)(this,m,{writable:!0,value:void 0}),(0,r._)(this,f,{writable:!0,value:void 0}),(0,r._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,m,e),(0,a._)(this,f,t),(0,a._)(this,h,n),(0,i._)(this,m).onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),(0,i._)(this,d)?((0,l._)(this,p,g).call(this,(0,i._)(this,d)),(0,a._)(this,d,void 0)):(0,a._)(this,c,void 0)}}};function g(e){(0,a._)(this,c,e),(0,i._)(this,m).postMessage(e)}},7808:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var i=n(35750),r=n(18150),a=n(85242),l=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,l._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var s=new WeakMap,o=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,i._)(this,s))return;let t={data:(0,i._)(this,o).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,a._)(this,s,!0)}constructor(e){(0,r._)(this,s,{writable:!0,value:!1}),(0,l._)(this,"onmessage",void 0),(0,r._)(this,o,{writable:!0,value:void 0}),(0,a._)(this,o,e)}}},12931:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(61140),r=n(23149),a=n(97271);let l=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var s=Object.prototype.hasOwnProperty;let o=function(e){if(!(0,r.A)(e))return l(e);var t=(0,a.A)(e),n=[];for(var i in e)"constructor"==i&&(t||!s.call(e,i))||n.push(i);return n};var c=n(38446);let d=function(e){return(0,c.A)(e)?(0,i.A)(e,!0):o(e)}},13083:(e,t,n)=>{function i(e){return`line-${e}`}function r(e,t,n){return`${e}${"left"===t?"L":"R"}${n}`}function a(e){return"DELETION"===e?"left":"right"}function l(e,t=!1,n=!1){if(n)return"var(--bgColor-attention-muted, var(--color-attention-subtle))";switch(e){case"ADDITION":return t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";case"DELETION":return t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";case"HUNK":return t?"var(--diffBlob-hunkNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";case"EMPTY":return t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";default:return}}function s(e){let t=0;if(e)for(let n of e)t=Math.max(t,n?.left??0,n?.right??0);return Math.max(8*t.toString().length+20,40).toString()}n.d(t,{IQ:()=>r,Sq:()=>i,XU:()=>a,c7:()=>s,gK:()=>l})},15647:(e,t,n)=>{n.d(t,{A:()=>i});let i=(0,n(40367).A)(Object.getPrototypeOf,Object)},18679:(e,t,n)=>{n.d(t,{s:()=>AnalyticsClient});let i=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];var r=n(36301);let AnalyticsClient=class AnalyticsClient{constructor(e){this.options=e}get collectorUrl(){return this.options.collectorUrl}get clientId(){return this.options.clientId?this.options.clientId:(0,r.y)()}createEvent(e){return{page:location.href,title:document.title,context:{...this.options.baseContext,...function(){let e={};try{for(let[t,n]of new URLSearchParams(window.location.search)){let r=t.toLowerCase();i.includes(r)&&(e[r]=n)}return e}catch(e){return{}}}(),...e}}}sendPageView(e){let t=this.createEvent(e);this.send({page_views:[t]})}sendEvent(e,t){let n={...this.createEvent(t),type:e};this.send({events:[n]})}send({page_views:e,events:t}){let n=JSON.stringify({client_id:this.clientId,page_views:e,events:t,request_context:{referrer:function(){let e;try{e=window.top.document.referrer}catch(t){if(window.parent)try{e=window.parent.document.referrer}catch(e){}}return""===e&&(e=document.referrer),e}(),user_agent:navigator.userAgent,screen_resolution:function(){try{return`${screen.width}x${screen.height}`}catch(e){return"unknown"}}(),browser_resolution:function(){let e=0,t=0;try{return"number"==typeof window.innerWidth?(t=window.innerWidth,e=window.innerHeight):null!=document.documentElement&&null!=document.documentElement.clientWidth?(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):null!=document.body&&null!=document.body.clientWidth&&(t=document.body.clientWidth,e=document.body.clientHeight),`${t}x${e}`}catch(e){return"unknown"}}(),browser_languages:navigator.languages?navigator.languages.join(","):navigator.language||"",pixel_ratio:window.devicePixelRatio,timestamp:Date.now(),tz_seconds:-60*new Date().getTimezoneOffset()}});try{if(navigator.sendBeacon)return void navigator.sendBeacon(this.collectorUrl,n)}catch{}fetch(this.collectorUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:n,keepalive:!1})}}},19976:(e,t,n)=>{n.d(t,{Jg:()=>d,nq:()=>u,uP:()=>m.u,$e:()=>g,P3:()=>h,wj:()=>x,l4:()=>j,Qe:()=>y,Ah:()=>L});var i=n(74848),r=n(21728),a=n(34164),l=n(73017),s=n(13083);let o=e=>{let t,n,o,c,d,u,m,f,h,p,g=(0,r.c)(34),{dragging:x,isHighlighted:y,isLeftColumn:b,colSpan:v,line:C,lineAnchor:N}=e,j=C.html,w="";if(["ADDITION","DELETION"].includes(C.type)&&["+","-"].includes(j[0])){let e;w=j[0],g[0]!==j?(e=j.slice(1),g[0]=j,g[1]=e):e=g[1],j=e}let L=x&&y,_=b&&"HUNK"!==C.type;g[2]!==L||g[3]!==_?(t=(0,a.$)("diff-text-cell",{"border-left color-border-accent-emphasis":L,"border-right":_}),g[2]=L,g[3]=_,g[4]=t):t=g[4],g[5]!==N?(n=N?(0,s.Sq)(N):void 0,g[5]=N,g[6]=n):n=g[6],g[7]!==y||g[8]!==C.type?(o=(0,s.gK)(C.type,!1,y),g[7]=y,g[8]=C.type,g[9]=o):o=g[9],g[10]!==o?(c={backgroundColor:o},g[10]=o,g[11]=c):c=g[11];let S=w,k="ADDITION"===C.type,E="DELETION"===C.type;g[12]!==k||g[13]!==E?(d=(0,a.$)("diff-text syntax-highlighted-line",{addition:k,deletion:E}),g[12]=k,g[13]=E,g[14]=d):d=g[14];let I=e.lineChild,D="HUNK"===C.type;g[15]!==D?(u=(0,a.$)("diff-text-inner",{"color-fg-muted":D}),g[15]=D,g[16]=u):u=g[16];let T="CONTEXT"===C.type?"-7px":void 0;return g[17]!==T?(m={marginLeft:T},g[17]=T,g[18]=m):m=g[18],g[19]!==j||g[20]!==u||g[21]!==m?(f=(0,i.jsx)(l.$6,{className:u,html:j,style:m}),g[19]=j,g[20]=u,g[21]=m,g[22]=f):f=g[22],g[23]!==w||g[24]!==e.lineChild||g[25]!==f||g[26]!==d?(h=(0,i.jsxs)("code",{"data-code-marker":S,className:d,children:[I,f]}),g[23]=w,g[24]=e.lineChild,g[25]=f,g[26]=d,g[27]=h):h=g[27],g[28]!==v||g[29]!==h||g[30]!==t||g[31]!==n||g[32]!==c?(p=(0,i.jsx)("td",{className:t,colSpan:v,id:n,style:c,children:h}),g[28]=v,g[29]=h,g[30]=t,g[31]=n,g[32]=c,g[33]=p):p=g[33],p};try{o.displayName||(o.displayName="DiffText")}catch{}let c=e=>{let t,n,l,o,c,d,u,m,f,h,p,g,x,y=(0,r.c)(30);y[0]!==e?({ariaLabel:t,children:n,hasExpanderButton:o,lineType:u,colSpan:l,interactiveProps:c,isHighlighted:d,...m}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=l,y[4]=o,y[5]=c,y[6]=d,y[7]=u,y[8]=m):(t=y[1],n=y[2],l=y[3],o=y[4],c=y[5],d=y[6],u=y[7],m=y[8]),y[9]!==n?(f=(0,i.jsx)("code",{className:"pr-2",children:n}),y[9]=n,y[10]=f):f=y[10];let b=f;if(c){let e;y[11]!==t||y[12]!==c||y[13]!==b?(e=(0,i.jsx)("button",{className:"diff-line-number-button",...c,"aria-label":t,children:b}),y[11]=t,y[12]=c,y[13]=b,y[14]=e):e=y[14],b=e}let v=c?void 0:t,C=!!c;y[15]!==o||y[16]!==C?(h=(0,a.$)("diff-line-number",{"has-expander":o,clickable:C}),y[15]=o,y[16]=C,y[17]=h):h=y[17];let N=l||1;return y[18]!==d||y[19]!==u?(p=(0,s.gK)(u,!0,d),y[18]=d,y[19]=u,y[20]=p):p=y[20],y[21]!==p?(g={backgroundColor:p},y[21]=p,y[22]=g):g=y[22],y[23]!==m||y[24]!==v||y[25]!==h||y[26]!==N||y[27]!==g||y[28]!==b?(x=(0,i.jsx)("td",{"aria-label":v,"data-line-number":!0,className:h,colSpan:N,style:g,...m,children:b}),y[23]=m,y[24]=v,y[25]=h,y[26]=N,y[27]=g,y[28]=b,y[29]=x):x=y[29],x};try{c.displayName||(c.displayName="LineNumber")}catch{}let d=e=>{let t,n,a,l,s=(0,r.c)(28),{dragging:d,isHighlighted:u,isLeftColumn:m,isSplit:f,lineAnchor:h,line:p,lineChild:g,onLineNumberClick:x}=e,y="CONTEXT"===p.type||"INJECTED_CONTEXT"===p.type,b="ADDITION"!==p.type,v=b||!f,C="DELETION"!==p.type,N=C&&!y||!f,j=f&&y?m?p.left:p.right:p.left;return s[0]!==j||s[1]!==u||s[2]!==p.left||s[3]!==p.right||s[4]!==p.type||s[5]!==x||s[6]!==b||s[7]!==v?(t=v&&(0,i.jsx)(c,{ariaLabel:`Line ${b?p.left?.toString():p.right?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:u,children:b&&j}),s[0]=j,s[1]=u,s[2]=p.left,s[3]=p.right,s[4]=p.type,s[5]=x,s[6]=b,s[7]=v,s[8]=t):t=s[8],s[9]!==u||s[10]!==p.left||s[11]!==p.right||s[12]!==p.type||s[13]!==x||s[14]!==C||s[15]!==N?(n=N&&(0,i.jsx)(c,{ariaLabel:`Line ${C?p.right?.toString():p.left?.toString()}`,lineType:p.type,interactiveProps:x?{onClick:x}:null,isHighlighted:u,children:C&&p.right}),s[9]=u,s[10]=p.left,s[11]=p.right,s[12]=p.type,s[13]=x,s[14]=C,s[15]=N,s[16]=n):n=s[16],s[17]!==d||s[18]!==u||s[19]!==m||s[20]!==p||s[21]!==h||s[22]!==g?(a=(0,i.jsx)(o,{dragging:d,isHighlighted:u,isLeftColumn:m,line:p,lineAnchor:h,lineChild:g}),s[17]=d,s[18]=u,s[19]=m,s[20]=p,s[21]=h,s[22]=g,s[23]=a):a=s[23],s[24]!==t||s[25]!==n||s[26]!==a?(l=(0,i.jsxs)(i.Fragment,{children:[t,n,a]}),s[24]=t,s[25]=n,s[26]=a,s[27]=l):l=s[27],l};try{d.displayName||(d.displayName="DiffLinePart")}catch{}function u(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("clipPath",{id:"diff-placeholder",children:[(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"67.0175439",x:"0",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"100.701754",x:"18.9473684",y:"47.7194983"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"37.8947368",x:"0",y:"71.930126"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"53.3333333",x:"127.017544",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"72.9824561",x:"187.719298",y:"48.0703769"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"76.8421053",y:"0"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"140.350877",x:"17.8947368",y:"23.8597491"}),(0,i.jsx)("rect",{height:"11.9298746",rx:"2",width:"173.684211",x:"166.315789",y:"23.8597491"})]}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("svg",{"aria-hidden":"true",version:"1.1",viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",className:"DiffPlaceholder-module__DiffPlaceholderSVG--zRrf1",children:(0,i.jsxs)("defs",{children:[e,(0,i.jsxs)("linearGradient",{id:"animated-diff-gradient",spreadMethod:"reflect",x1:"0",x2:"0",y1:"0",y2:"1",children:[(0,i.jsx)("stop",{offset:"0",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.2",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"0.5",stopColor:"#ddd"}),(0,i.jsx)("stop",{offset:"0.8",stopColor:"#eee"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#eee"}),(0,i.jsx)("animateTransform",{attributeName:"y1",dur:"1s",repeatCount:"3",values:"0%; 100%; 0"}),(0,i.jsx)("animateTransform",{attributeName:"y2",dur:"1s",repeatCount:"3",values:"100%; 200%; 0"})]})]})}),n[1]=t):t=n[1],t}try{u.displayName||(u.displayName="DiffPlaceholder")}catch{}var m=n(88098);n(91618);var f=n(38621);function h(e){let t,n,a,l=(0,r.c)(10),{currentLine:s,hunkButton:d,isLeftColumn:u,isSplit:m}=e;if(m&&!u)return null;l[0]!==s.type||l[1]!==d||l[2]!==m?(t=d?(0,i.jsx)(c,{colSpan:m?1:2,hasExpanderButton:!0,lineType:s.type,children:d}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c,{lineType:s.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})}),!m&&(0,i.jsx)(c,{lineType:s.type,children:(0,i.jsx)(f.KebabHorizontalIcon,{})})]}),l[0]=s.type,l[1]=d,l[2]=m,l[3]=t):t=l[3];let h=m?3:void 0;return l[4]!==s||l[5]!==h?(n=(0,i.jsx)(o,{isHighlighted:!1,isLeftColumn:!0,colSpan:h,line:s}),l[4]=s,l[5]=h,l[6]=n):n=l[6],l[7]!==t||l[8]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,n]}),l[7]=t,l[8]=n,l[9]=a):a=l[9],a}try{h.displayName||(h.displayName="HunkHeaderDiffLine")}catch{}function p(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(f.KebabHorizontalIcon,{})}),t[0]=e):e=t[0],e}try{p.displayName||(p.displayName="HunkKebabIcon")}catch{}function g(e){let t,n,l,s=(0,r.c)(5),{isLeftColumn:o}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(c,{lineType:"EMPTY"}),s[0]=t):t=s[0],s[1]!==o?(n=(0,a.$)("empty-diff-line",{"border-right":o}),s[1]=o,s[2]=n):n=s[2],s[3]!==n?(l=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)("td",{className:n,colSpan:1})]}),s[3]=n,s[4]=l):l=s[4],l}try{g.displayName||(g.displayName="EmptyDiffLine")}catch{}function x(e){let t,n,a,l,s,o,c,d,u=(0,r.c)(15);return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Original file line"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),u[0]=t):t=u[0],u[1]!==e.lineWidth?(n=(0,i.jsx)("col",{width:e.lineWidth}),u[1]=e.lineWidth,u[2]=n):n=u[2],u[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)("col",{}),u[3]=a):a=u[3],u[4]!==e.lineWidth?(l=(0,i.jsx)("col",{width:e.lineWidth}),u[4]=e.lineWidth,u[5]=l):l=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("col",{}),u[6]=s):s=u[6],u[7]!==n||u[8]!==l?(o=(0,i.jsxs)("colgroup",{children:[n,a,l,s]}),u[7]=n,u[8]=l,u[9]=o):o=u[9],u[10]!==e.children?(c=(0,i.jsx)("tbody",{children:e.children}),u[10]=e.children,u[11]=c):c=u[11],u[12]!==o||u[13]!==c?(d=(0,i.jsxs)(i.Fragment,{children:[t,o,c]}),u[12]=o,u[13]=c,u[14]=d):d=u[14],d}try{x.displayName||(x.displayName="SplitDiffTable")}catch{}function y(e){let t,n,a,l,s,o,c,d=(0,r.c)(13);return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("thead",{className:"sr-only",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Original file line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line number"}),(0,i.jsx)("th",{scope:"col",children:"Diff line change"})]})}),d[0]=t):t=d[0],d[1]!==e.lineWidth?(n=(0,i.jsx)("col",{width:e.lineWidth}),a=(0,i.jsx)("col",{width:e.lineWidth}),d[1]=e.lineWidth,d[2]=n,d[3]=a):(n=d[2],a=d[3]),d[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("col",{width:"100%"}),d[4]=l):l=d[4],d[5]!==n||d[6]!==a?(s=(0,i.jsxs)("colgroup",{children:[n,a,l]}),d[5]=n,d[6]=a,d[7]=s):s=d[7],d[8]!==e.children?(o=(0,i.jsx)("tbody",{children:e.children}),d[8]=e.children,d[9]=o):o=d[9],d[10]!==s||d[11]!==o?(c=(0,i.jsxs)(i.Fragment,{children:[t,s,o]}),d[10]=s,d[11]=o,d[12]=c):c=d[12],c}try{y.displayName||(y.displayName="UnifiedDiffTable")}catch{}let b="UnifiedDiffLines-module__diffTextInner--z42oB";function v(e){let t,n,a,l,o=(0,r.c)(9),{line:c,children:d}=e;return o[0]!==c.type?(t=(0,s.gK)(c.type,!0),o[0]=c.type,o[1]=t):t=o[1],o[2]!==t?(n={backgroundColor:t,textAlign:"center"},o[2]=t,o[3]=n):n=o[3],o[4]!==d?(a=(0,i.jsx)("code",{children:d}),o[4]=d,o[5]=a):a=o[5],o[6]!==n||o[7]!==a?(l=(0,i.jsx)("td",{className:"UnifiedDiffLines-module__diffLineNumber--Ls6hS",style:n,children:a}),o[6]=n,o[7]=a,o[8]=l):l=o[8],l}function C(e){let t,n,s,o=(0,r.c)(4),{line:c}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(p,{}),o[0]=t):t=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.$)(b,"color-fg-muted"),o[1]=n):n=o[1];let d=c.html;return o[2]!==d?(s=(0,i.jsx)("td",{colSpan:4,className:"UnifiedDiffLines-module__diffHunkCell--PwOTu",valign:"top",children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t,(0,i.jsx)("code",{className:"UnifiedDiffLines-module__diffHunkText--nwvt0",children:(0,i.jsx)(l.$6,{className:n,html:d})})]})}),o[2]=d,o[3]=s):s=o[3],s}function N(e){let t,n,o,c=(0,r.c)(13),{line:d}=e,u="HUNK"===d.type,m="ADDITION"!==d.type,f="DELETION"!==d.type,h="ADDITION"===d.type?"+":"DELETION"===d.type?"-":void 0,p=!!h;return c[0]!==u||c[1]!==d?(t=u&&(0,i.jsx)(C,{line:d}),c[0]=u,c[1]=d,c[2]=t):t=c[2],c[3]!==u||c[4]!==d||c[5]!==h||c[6]!==m||c[7]!==p||c[8]!==f?(n=!u&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v,{line:d,children:m&&d.left}),(0,i.jsx)(v,{line:d,children:f&&d.right}),(0,i.jsx)("td",{className:"UnifiedDiffLines-module__diffTextCell--y7sIw",style:{backgroundColor:(0,s.gK)(d.type,!1)},children:(0,i.jsxs)("code",{className:(0,a.$)("ADDITION"===d.type&&"UnifiedDiffLines-module__syntaxHighlightedAdditionLine--GBB6F","DELETION"===d.type&&"UnifiedDiffLines-module__syntaxHighlightedDeletionLine--mmCob"),children:[p&&(0,i.jsx)("span",{className:"UnifiedDiffLines-module__diffTextMarker--XE3qq",children:h}),(0,i.jsx)(l.$6,{className:b,html:d.html,style:{backgroundColor:(0,s.gK)(d.type,!1)}})]})})]}),c[3]=u,c[4]=d,c[5]=h,c[6]=m,c[7]=p,c[8]=f,c[9]=n):n=c[9],c[10]!==t||c[11]!==n?(o=(0,i.jsxs)("tr",{children:[t,n]}),c[10]=t,c[11]=n,c[12]=o):o=c[12],o}function j(e){let t,n,l,s,o=(0,r.c)(14),{className:c,lines:d,lineWidth:u,tabSize:m}=e;if(o[0]!==d||o[1]!==m){let e;o[3]!==m?(e=(e,t)=>(0,i.jsx)(N,{line:e,tabSize:m},t),o[3]=m,o[4]=e):e=o[4],t=d.map(e),o[0]=d,o[1]=m,o[2]=t}else t=o[2];let f=t;return o[5]!==c?(n=(0,a.$)("UnifiedDiffLines-module__unifiedDiffLines--UDm5a",c,"tab-size"),o[5]=c,o[6]=n):n=o[6],o[7]!==f||o[8]!==u?(l=(0,i.jsx)(y,{lineWidth:u,children:f}),o[7]=f,o[8]=u,o[9]=l):l=o[9],o[10]!==n||o[11]!==l||o[12]!==m?(s=(0,i.jsx)("table",{className:n,"data-tab-size":m,children:l}),o[10]=n,o[11]=l,o[12]=m,o[13]=s):s=o[13],s}try{v.displayName||(v.displayName="LineNumberCell")}catch{}try{C.displayName||(C.displayName="HunkCell")}catch{}try{N.displayName||(N.displayName="UnifiedDiffRow")}catch{}try{j.displayName||(j.displayName="UnifiedDiffLines")}catch{}function w(e){return"LEFT"===e?"-":"RIGHT"===e?"+":""}function L({startDiffSide:e,endDiffSide:t,originalStartLine:n,originalEndLine:i}){return e&&t&&"number"==typeof n&&"number"==typeof i?0===n&&1===i&&e===t?"-1 to +1":e===t&&n===i?`${w(e)}${n}`:`${w(e)}${n} to ${w(t)}${i}`:""}},20622:(e,t,n)=>{n.d(t,{uT:()=>a});let i={baseComparisonInfo:"base_comparison_info",changeGroups:"change_groups",codeButton:"code_button",codeowners:"codeowners",diffEntries:"diff_entries",diffstat:"diffstat",header:"header",mergeBox:"merge_box",mergeInstructions:"merge_instructions",pendingReview:"pending_review",statusChecks:"status_checks",tabCounts:"tab_counts",threadPreviews:"thread_previews",diffViewUserSettings:"user_diff_view_settings",diffContextLines:"diff_entry_lines",richDiff:"rich_diff",description:"description"},r={abandonReview:"abandon_review",addCommentReaction:"add_comment_reaction",changeBase:"change_base",cleanupCodespaces:"cleanup_codespaces",convertToDraft:"convert_to_draft",createReviewComment:"create_review_comment",deleteHeadRef:"delete_head_ref",dequeuePullRequest:"dequeue_pull_request",disableAutoMerge:"disable_auto_merge",dismissReview:"dismiss_review",enableAutoMerge:"enable_auto_merge",generateChangeGroups:"generate_change_groups",markReadyForReview:"mark_ready_for_review",merge:"merge",removeCommentReaction:"remove_comment_reaction",reRequestReviewFromUser:"re_request_review_from_user",resolveThread:"resolve_thread",runActionRequiredWorkflows:"run_action_required_workflows",submitCopilotGroupsFeedback:"submit_copilot_groups_feedback",submitReview:"submit_review",submitSuggestedChanges:"apply_suggestions",unresolveThread:"unresolve_thread",updateReviewComment:"update_review_comment",updatePullRequestBranch:"update_pull_request_branch",updateTitle:"update_title",updateShowChangeGroupsPreference:"update_show_change_groups_preference",updateMergeBoxUserPreference:"update_merge_box_user_preference",updateWhitespacePreference:"update_whitespace_preference",hideComment:"hide_comment",unhideComment:"unhide_comment"},a={...i,...r};Object.values(i),Object.values(r)},21179:(e,t,n)=>{n.d(t,{A:()=>E});var i=n(97250),r=n(40473);let a=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1};var l=n(64099);let s=function(e,t,n,i,s,o){var c=1&n,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var m=o.get(e),f=o.get(t);if(m&&f)return m==t&&f==e;var h=-1,p=!0,g=2&n?new r.A:void 0;for(o.set(e,t),o.set(t,e);++h<d;){var x=e[h],y=t[h];if(i)var b=c?i(y,x,h,t,e,o):i(x,y,h,e,t,o);if(void 0!==b){if(b)continue;p=!1;break}if(g){if(!a(t,function(e,t){if(!(0,l.A)(g,t)&&(x===e||s(x,e,n,i,o)))return g.push(t)})){p=!1;break}}else if(!(x===y||s(x,y,n,i,o))){p=!1;break}}return o.delete(e),o.delete(t),p};var o=n(241),c=n(43988),d=n(66984);let u=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n};var m=n(29959),f=o.A?o.A.prototype:void 0,h=f?f.valueOf:void 0;let p=function(e,t,n,i,r,a,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!a(new c.A(e),new c.A(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,d.A)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=u;case"[object Set]":var f=1&i;if(o||(o=m.A),e.size!=t.size&&!f)break;var p=l.get(e);if(p)return p==t;i|=2,l.set(e,t);var g=s(o(e),o(t),i,r,a,l);return l.delete(e),g;case"[object Symbol]":if(h)return h.call(e)==h.call(t)}return!1};var g=n(19042),x=Object.prototype.hasOwnProperty;let y=function(e,t,n,i,r,a){var l=1&n,s=(0,g.A)(e),o=s.length;if(o!=(0,g.A)(t).length&&!l)return!1;for(var c=o;c--;){var d=s[c];if(!(l?d in t:x.call(t,d)))return!1}var u=a.get(e),m=a.get(t);if(u&&m)return u==t&&m==e;var f=!0;a.set(e,t),a.set(t,e);for(var h=l;++c<o;){var p=e[d=s[c]],y=t[d];if(i)var b=l?i(y,p,d,t,e,a):i(p,y,d,e,t,a);if(!(void 0===b?p===y||r(p,y,n,i,a):b)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var v=e.constructor,C=t.constructor;v!=C&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof C&&C instanceof C)&&(f=!1)}return a.delete(e),a.delete(t),f};var b=n(37298),v=n(92049),C=n(99856),N=n(4076),j="[object Arguments]",w="[object Array]",L="[object Object]",_=Object.prototype.hasOwnProperty;let S=function(e,t,n,r,a,l){var o=(0,v.A)(e),c=(0,v.A)(t),d=o?w:(0,b.A)(e),u=c?w:(0,b.A)(t);d=d==j?L:d,u=u==j?L:u;var m=d==L,f=u==L,h=d==u;if(h&&(0,C.A)(e)){if(!(0,C.A)(t))return!1;o=!0,m=!1}if(h&&!m)return l||(l=new i.A),o||(0,N.A)(e)?s(e,t,n,r,a,l):p(e,t,d,n,r,a,l);if(!(1&n)){var g=m&&_.call(e,"__wrapped__"),x=f&&_.call(t,"__wrapped__");if(g||x){var S=g?e.value():e,k=x?t.value():t;return l||(l=new i.A),a(S,k,n,r,l)}}return!!h&&(l||(l=new i.A),y(e,t,n,r,a,l))};var k=n(53098);let E=function e(t,n,i,r,a){return t===n||(null!=t&&null!=n&&((0,k.A)(t)||(0,k.A)(n))?S(t,n,i,r,e,a):t!=t&&n!=n)}},22031:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(52851),r=n(52528);let a=function(e,t,n,a){var l=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var c=t[s],d=a?a(n[c],e[c],c,n,e):void 0;void 0===d&&(d=e[c]),l?(0,r.A)(n,c,d):(0,i.A)(n,c,d)}return n}},25556:(e,t,n)=>{n.d(t,{m:()=>p});var i=n(74848),r=n(11683),a=n(96540),l=n(56149),s=n(12683),o=n(34164);let c=n(38267).Ay.span.withConfig({displayName:"ControlledTooltip__TooltipBase",componentId:"sc-da442a75-0"})(["&::after{position:absolute;z-index:1000000;display:none;padding:0.5em 0.75em;font:normal normal 11px/1.5 ",";-webkit-font-smoothing:subpixel-antialiased;color:",";text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;pointer-events:none;content:attr(data-visible-text);background:",";border-radius:",";opacity:0;}@keyframes tooltip-appear{from{opacity:0;}to{opacity:1;}}&.tooltipped-open,&:hover,&:active,&:focus{&::after{display:inline-block;text-decoration:none;animation-name:tooltip-appear;animation-duration:0.1s;animation-fill-mode:forwards;animation-timing-function:ease-in;animation-delay:0s;}}&.tooltipped-no-delay.tooltipped-open,&.tooltipped-no-delay:hover,&.tooltipped-no-delay:active,&.tooltipped-no-delay:focus{&::after{animation-delay:0s;}}&.tooltipped-s,&.tooltipped-se,&.tooltipped-sw{&::after{top:100%;right:50%;margin-top:6px;}}&.tooltipped-se{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-sw::after{margin-right:-",";}&.tooltipped-n,&.tooltipped-ne,&.tooltipped-nw{&::after{right:50%;bottom:100%;margin-bottom:6px;}}&.tooltipped-ne{&::after{right:auto;left:50%;margin-left:-",";}}&.tooltipped-nw::after{margin-right:-",";}&.tooltipped-s::after,&.tooltipped-n::after{transform:translateX(50%);}&.tooltipped-w{&::after{right:100%;bottom:50%;margin-right:6px;transform:translateY(50%);}}&.tooltipped-e{&::after{bottom:50%;left:100%;margin-left:6px;transform:translateY(50%);}}&.tooltipped-align-right-2::after{right:0;margin-right:0;}&.tooltipped-align-left-2::after{left:0;margin-left:0;}",";"],(0,s.yB)("fonts.normal"),(0,s.yB)("colors.fg.onEmphasis"),(0,s.yB)("colors.neutral.emphasisPlus"),(0,s.yB)("radii.2"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),(0,s.yB)("space.3"),s.sx),d=()=>()=>void 0,u=()=>!1,m=()=>!0,f=(0,a.forwardRef)(function({direction:e="n",className:t,text:n,noDelay:r,align:s,wrap:f,open:h=!1,portalProps:p={},...g},x){let y=(0,a.useSyncExternalStore)(d,m,u),b=(0,o.$)(t,`tooltipped-${e}`,s&&`tooltipped-align-${s}-2`,r&&"tooltipped-no-delay",f&&"tooltipped-multiline",h&&"tooltipped-open");return y?(0,i.jsx)(l.ZL,{...p,children:(0,i.jsx)(c,{ref:x,role:"tooltip","aria-label":n,"data-visible-text":n||g["aria-label"],...g,sx:{position:"fixed",zIndex:1,...g.sx},className:b})}):null});try{f.displayName||(f.displayName="ControlledTooltip")}catch{}var h=n(65787);let p=(0,a.forwardRef)(function({contentRef:e,open:t,anchoredPositionAlignment:n,anchorSide:l,anchorOffset:s,alignmentOffset:o,allowOutOfBounds:c,...d},u){let m=(0,a.useRef)(null);(0,a.useImperativeHandle)(u,()=>m.current);let p=(0,a.useRef)({left:0,top:0}),g=(0,a.useSyncExternalStore)((0,a.useCallback)(n=>{if(!m.current||!e.current||!t)return()=>void 0;let i=(0,h.U)(e.current);return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}},[e,t]),(0,a.useCallback)(()=>{if(!m.current||!e.current)return p.current;let t=(0,r.uG)(m.current,e.current,{align:n??"center",side:l??"outside-top",alignmentOffset:o??0,anchorOffset:s??0,allowOutOfBounds:c});return(t.left!==p.current.left||t.top!==p.current.top)&&(p.current=t),p.current},[e,o,s,n,l,c]),(0,a.useCallback)(()=>p.current,[]));return(0,i.jsx)(f,{...d,ref:m,open:t,style:{position:"absolute",...g,...d.style}})});try{p.displayName||(p.displayName="PortalTooltip")}catch{}},29959:(e,t,n)=>{n.d(t,{A:()=>i});let i=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},30459:(e,t,n)=>{n.d(t,{S:()=>o,s:()=>s});var i=n(21728),r=n(96540),a=n(53419),l=n(49936);function s(){let e,t,n=(0,i.c)(6),s=(0,r.useContext)(l.I);if(!s)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:o,category:c,metadata:d}=s;n[0]!==o||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let i={react:!0,app_name:o,category:c,...d};(0,a.BI)(e,{...i,...void 0===n?{}:n,target:t})},n[0]=o,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function o(){let e,t,n=(0,i.c)(4),{sendAnalyticsEvent:r}=s();n[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t={sendClickAnalyticsEvent:a},n[2]=a,n[3]=t):t=n[3],t}},34535:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(96540);function r({focusRowRef:e,mouseRowRef:t}){let[n,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let n=e.current,i=t.current;if(!n||!i)return;let a=()=>{let e=n.querySelector(".PRIVATE_TreeView-item-content-text");e?.scrollWidth!==e?.offsetWidth&&r(!0)},l=()=>a(),s=()=>r(!1),o=()=>a(),c=()=>r(!1);return n.addEventListener("focus",l),n.addEventListener("blur",s),i.addEventListener("mouseenter",o),i.addEventListener("mouseleave",c),()=>{n.removeEventListener("focus",l),n.removeEventListener("blur",s),i.removeEventListener("mouseenter",o),i.removeEventListener("mouseleave",c)}},[e,t]),n}},37351:(e,t,n)=>{n.d(t,{_:()=>i});function i(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}},39619:(e,t,n)=>{n.d(t,{HS:()=>l,Oc:()=>a,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>s,fD:()=>o,qR:()=>r});var i=n(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,i._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,n){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,i._)(this,"reference",void 0),(0,i._)(this,"openPanel",void 0),(0,i._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=n}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,i._)(this,"context",void 0),this.context=e}};function r(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function a(e,t=!1,n){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,n))}function l(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function s(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function o(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},39759:(e,t,n)=>{n.d(t,{A:()=>i});let i=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},40058:(e,t,n)=>{n.d(t,{T:()=>N});var i=n(74848),r=n(21728),a=n(77430),l=n(38621),s=n(94236),o=n(99511),c=n(46251),d=n(69726),u=n(72511),m=n(5524),f=n(96540),h=n(23470);let p=f.memo(function(e){let t,n,l,s,o,c=(0,r.c)(19),{user:d,isCurrent:u,onSelect:f,shouldSetAsDiv:h,count:p,position:g}=e,x=h?"div":"li";c[0]!==f||c[1]!==d?(t=()=>{f&&f(d)},c[0]=f,c[1]=d,c[2]=t):t=c[2];let y=g+1,b=d.primaryAvatarUrl;return c[3]!==d.path?(n=d.path.startsWith("/apps/"),c[3]=d.path,c[4]=n):n=c[4],c[5]!==n||c[6]!==d.primaryAvatarUrl?(l=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(a.r,{src:b,square:n})}),c[5]=n,c[6]=d.primaryAvatarUrl,c[7]=l):l=c[7],c[8]!==d.name?(s=(0,i.jsx)(m.l.Description,{truncate:!0,children:d.name}),c[8]=d.name,c[9]=s):s=c[9],c[10]!==p||c[11]!==u||c[12]!==x||c[13]!==t||c[14]!==y||c[15]!==l||c[16]!==s||c[17]!==d.login?(o=(0,i.jsxs)(m.l.Item,{as:x,selected:u,onSelect:t,"aria-setsize":p,"aria-posinset":y,children:[l,d.login,s]}),c[10]=p,c[11]=u,c[12]=x,c[13]=t,c[14]=y,c[15]=l,c[16]=s,c[17]=d.login,c[18]=o):o=c[18],o});try{p.displayName||(p.displayName="UserItem")}catch{}let g="UsersList-module__scrollableUserList--v1HiT";function x(e){let t,n=(0,r.c)(2);return n[0]!==e?(t=e.users.length>20?(0,i.jsx)(b,{...e}):(0,i.jsx)(y,{...e}),n[0]=e,n[1]=t):t=n[1],t}function y(e){let t,n,a=(0,r.c)(12),{users:l,currentUser:s,onSelect:o,style:c,className:d}=e,u=d?`${g} ${d}`:g;if(a[0]!==s?.login||a[1]!==o||a[2]!==l){let e;a[4]!==s?.login||a[5]!==o||a[6]!==l.length?(e=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,count:l.length,position:t},e.login),a[4]=s?.login,a[5]=o,a[6]=l.length,a[7]=e):e=a[7],t=l.map(e),a[0]=s?.login,a[1]=o,a[2]=l,a[3]=t}else t=a[3];return a[8]!==u||a[9]!==c||a[10]!==t?(n=(0,i.jsx)(m.l,{role:"menu",style:c,className:u,selectionVariant:"single",children:t}),a[8]=u,a[9]=c,a[10]=t,a[11]=n):n=a[11],n}function b(e){let t,n,a=(0,r.c)(9),{users:l,currentUser:s,onSelect:o,style:c,className:d}=e,u=d?`${g} ${d}`:g;return a[0]!==s?.login||a[1]!==o||a[2]!==l.length?(t=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===s?.login,onSelect:o,shouldSetAsDiv:!0,count:l.length,position:t},e.login),a[0]=s?.login,a[1]=o,a[2]=l.length,a[3]=t):t=a[3],a[4]!==u||a[5]!==c||a[6]!==t||a[7]!==l?(n=(0,i.jsx)(h.F,{items:l,itemHeight:33,style:c,makeKey:v,shouldUseActionList:!0,renderItem:t,className:u}),a[4]=u,a[5]=c,a[6]=t,a[7]=l,a[8]=n):n=a[8],n}function v(e){return e.login}try{x.displayName||(x.displayName="UsersList")}catch{}try{y.displayName||(y.displayName="FullUsersList")}catch{}try{b.displayName||(b.displayName="VirtualUsersList")}catch{}var C=n(4559);function N(e){var t,n;let o,c,d,u,m,h,p,g,y,b,v,N,k,E,I,D=(0,r.c)(52),{defaultText:T,usersState:A,currentUser:R,onSelect:$,hotKey:M,onOpenChange:O,renderCustomFooter:P,size:U,showTypedInUser:B,width:F,label:H}=e,z=void 0!==B&&B,V=void 0===F?"large":F,W=void 0===H?"":H,[G,q]=(0,f.useState)("");D[0]!==G||D[1]!==z||D[2]!==A.users?(o=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(A.users,G),c=z&&(t=G,n=o,!!t&&(0===n.length||n.length>1||1===n.length&&!!n[0]&&n[0].login.toLowerCase()!==t.toLowerCase())),D[0]=G,D[1]=z,D[2]=A.users,D[3]=o,D[4]=c):(o=D[3],c=D[4]);let K=c,X=0===o.length&&!K,Q=!A.loading&&!A.error&&X;return D[5]!==Q?(d=()=>{Q&&(0,C.i)("Nothing to show")},D[5]=Q,D[6]=d):d=D[6],D[7]!==Q||D[8]!==G?(u=[Q,G],D[7]=Q,D[8]=G,D[9]=u):u=D[9],(0,f.useEffect)(d,u),D[10]!==Q||D[11]!==O?(m=e=>{O&&O(e),Q&&(0,C.i)("Nothing to show")},D[10]=Q,D[11]=O,D[12]=m):m=D[12],D[13]!==R?(h=(0,i.jsx)("div",{className:"mr-2",children:R?(0,i.jsx)(a.r,{size:16,src:R.primaryAvatarUrl,square:R.path.startsWith("/apps/")}):(0,i.jsx)(l.PeopleIcon,{size:"small",className:"fgColor-muted"})}),D[13]=R,D[14]=h):h=D[14],D[15]!==R||D[16]!==T||D[17]!==W?(p=(0,i.jsx)("div",{className:"UserSelector-module__truncatedUserText--hOMue",children:R?(0,i.jsxs)("span",{children:[W,R.login]}):(0,i.jsx)("span",{children:T})}),D[15]=R,D[16]=T,D[17]=W,D[18]=p):p=D[18],D[19]!==h||D[20]!==p?(g=(0,i.jsxs)("div",{className:"d-flex",children:[h,p]}),D[19]=h,D[20]=p,D[21]=g):g=D[21],D[22]!==M||D[23]!==U||D[24]!==g?(y=(0,i.jsx)(s.W.Button,{"data-hotkey":M,size:U,"data-testid":"user-selector-button",children:g}),D[22]=M,D[23]=U,D[24]=g,D[25]=y):y=D[25],D[26]!==G?(b=(0,i.jsx)(j,{defaultText:G,onFilterChange:q}),D[26]=G,D[27]=b):b=D[27],D[28]!==G||D[29]!==$||D[30]!==K||D[31]!==X||D[32]!==A.error||D[33]!==A.loading?(v=A.loading?(0,i.jsx)(w,{}):A.error?(0,i.jsx)(L,{}):(0,i.jsxs)(i.Fragment,{children:[X&&(0,i.jsx)(_,{}),K&&(0,i.jsx)(S,{filterText:G,onSelect:$})]}),D[28]=G,D[29]=$,D[30]=K,D[31]=X,D[32]=A.error,D[33]=A.loading,D[34]=v):v=D[34],D[35]!==R||D[36]!==o||D[37]!==$||D[38]!==P?(N=o.length>0&&(0,i.jsx)(x,{users:o,currentUser:R,onSelect:$,className:P?"UserSelector-module__userListWithFooter--EOx8I":"UserSelector-module__userListDefault--tFqfI"}),D[35]=R,D[36]=o,D[37]=$,D[38]=P,D[39]=N):N=D[39],D[40]!==P?(k=P?.(),D[40]=P,D[41]=k):k=D[41],D[42]!==b||D[43]!==v||D[44]!==N||D[45]!==k||D[46]!==V?(E=(0,i.jsxs)(s.W.Overlay,{width:V,children:[b,v,N,k]}),D[42]=b,D[43]=v,D[44]=N,D[45]=k,D[46]=V,D[47]=E):E=D[47],D[48]!==y||D[49]!==E||D[50]!==m?(I=(0,i.jsx)("div",{children:(0,i.jsxs)(s.W,{onOpenChange:m,children:[y,E]})}),D[48]=y,D[49]=E,D[50]=m,D[51]=I):I=D[51],I}function j(e){let t,n,a=(0,r.c)(5),{onFilterChange:s,defaultText:c}=e;return a[0]!==s?(t=e=>s(e.target.value),a[0]=s,a[1]=t):t=a[1],a[2]!==c||a[3]!==t?(n=(0,i.jsx)("div",{className:"p-2 border-bottom border-color-border-default",children:(0,i.jsx)(o.A,{leadingVisual:l.SearchIcon,value:c,placeholder:"Find a user...",onChange:t,className:"UserSelector-module__userSearchInput--J_Pgo"})}),a[2]=c,a[3]=t,a[4]=n):n=a[4],n}function w(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-2",children:(0,i.jsx)(d.A,{size:"medium",srText:"Loading users..."})}),t[0]=e):e=t[0],e}function L(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(u.A,{variant:"danger",children:"Could not load users"}),t[0]=e):e=t[0],e}function _(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-3",children:"Nothing to show"}),t[0]=e):e=t[0],e}function S(e){let t,n,a,l=(0,r.c)(8),{filterText:s,onSelect:o}=e;return l[0]!==s||l[1]!==o?(t=()=>{o&&o({login:s,name:s,path:"",primaryAvatarUrl:""})},l[0]=s,l[1]=o,l[2]=t):t=l[2],l[3]!==s?(n=(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)("span",{className:"text-bold",children:s})]}),l[3]=s,l[4]=n):n=l[4],l[5]!==t||l[6]!==n?(a=(0,i.jsx)(m.l.Item,{role:"none",onSelect:t,className:"UserSelector-module__filterResultItem--JqRZP",children:n}),l[5]=t,l[6]=n,l[7]=a):a=l[7],a}try{N.displayName||(N.displayName="UserSelector")}catch{}try{j.displayName||(j.displayName="UserFilter")}catch{}try{w.displayName||(w.displayName="Loading")}catch{}try{L.displayName||(L.displayName="LoadingFailed")}catch{}try{_.displayName||(_.displayName="UsersZeroState")}catch{}try{S.displayName||(S.displayName="UsersTypedInUser")}catch{}},40064:(e,t,n)=>{n.d(t,{V:()=>m});var i=n(74848),r=n(96540),a=n(43258),l=n(38621),s=n(52870),o=n(56149);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,i.jsx)(l.InfoIcon,{}),success:(0,i.jsx)(l.CheckIcon,{}),error:(0,i.jsx)(l.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:a="info",role:l="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:f}=(0,s.A)();return(0,r.useEffect)(()=>{t&&f(()=>m(!1),t-300)},[f,t]),(0,i.jsx)(o.ZL,{children:(0,i.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,i.jsxs)("div",{className:`Toast ${c[a]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${a}`,role:l,children:[(0,i.jsx)("span",{className:"Toast-icon",children:n||d[a]}),(0,i.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(a.T8);return(0,i.jsxs)(i.Fragment,{children:[e.map((e,t)=>(0,i.jsx)(u,{message:e.message,icon:e.icon,timeToLive:a.Qn,type:e.type,role:e.role},t)),t&&(0,i.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},40473:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(21738);function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i.A;++t<n;)this.add(e[t])}r.prototype.add=r.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},r.prototype.has=function(e){return this.__data__.has(e)};let a=r},42255:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(70263),r=n(96540);let a=function(e){let t=(0,i.A)(),[n,a]=(0,r.useState)(e);return[n,(0,r.useCallback)(e=>{t()&&a(e)},[t])]}},43258:(e,t,n)=>{n.d(t,{Qn:()=>o,T8:()=>d,Y6:()=>m,k6:()=>u});var i=n(74848),r=n(52870),a=n(96540),l=n(73189),s=n(42255);let o=5e3,c=(0,a.createContext)({addToast:l.l,addPersistedToast:l.l,clearPersistedToast:l.l}),d=(0,a.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,s.A)([]),[l,u]=(0,a.useState)(null),{safeSetTimeout:m}=(0,r.A)(),f=(0,a.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),o)},[t,m,n]),h=(0,a.useCallback)(function(e){u(e)},[u]),p=(0,a.useCallback)(function(){u(null)},[u]),g=(0,a.useMemo)(()=>({addToast:f,addPersistedToast:h,clearPersistedToast:p}),[h,f,p]),x=(0,a.useMemo)(()=>({toasts:t,persistedToast:l}),[t,l]);return(0,i.jsx)(c.Provider,{value:g,children:(0,i.jsx)(d.Provider,{value:x,children:e})})}function m(){return(0,a.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},44953:(e,t,n)=>{n.d(t,{_:()=>i});function i(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}},46996:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(21179);let r=function(e,t){return(0,i.A)(e,t)}},51407:(e,t,n)=>{n.d(t,{Y:()=>i});function i(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},52475:(e,t,n)=>{n.d(t,{_S:()=>a,cB:()=>s,cW:()=>l});var i=n(53627),r=n(71315);let a=()=>{let e=(0,i.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},l=e=>{(0,i.C3)({appId:e})},s=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,i.C3)({appId:s()})},!0)},52528:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(84171);let r=function(e,t,n){"__proto__"==t&&i.A?(0,i.A)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},52851:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(52528),r=n(66984),a=Object.prototype.hasOwnProperty;let l=function(e,t,n){var l=e[t];a.call(e,t)&&(0,r.A)(l,n)&&(void 0!==n||t in e)||(0,i.A)(e,t,n)}},54589:(e,t,n)=>{n.d(t,{X:()=>s});var i=n(74848),r=n(26607),a=n(10242),l=n(84174);let s=({children:e="Preview",feedbackUrl:t,className:n})=>(0,i.jsx)(l.V,{className:n,label:(0,i.jsx)(r.A,{variant:"success",children:e}),link:t?(0,i.jsx)(a.A,{feedbackUrl:t}):void 0});try{s.displayName||(s.displayName="BetaLabel")}catch{}},59403:(e,t,n)=>{n.d(t,{Dx:()=>l,IP:()=>a,M4:()=>r,dt:()=>s});var i=n(91385);let r=1/0,a=-1/0,l=1,s=(e,t,n=l)=>{let s=e.trim().toLowerCase(),o=t.trim().toLowerCase();if(s===o)return r;if(0===o.length||0===s.length)return a;let c=(0,i.fN)(s,o);return c===1/0&&s!==o?a:o.startsWith(s)||o.endsWith(s)?c+n:c}},63352:(e,t,n)=>{n.d(t,{Z:()=>N});var i=n(74848),r=n(21728),a=n(75202),l=n(71315),s=n(96540),o=n(38621),c=n(26108),d=n(15220),u=n(64451),m=n(86877),f=n(46720),h=n(4175),p=n(21373);let g=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Comment is a duplicate of another comment",value:"DUPLICATE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],x=e=>{let t,n,a,l,o=(0,r.c)(16),{commentId:c,onClose:x,onSubmit:y,feedbackOptions:b,returnFocusRef:v}=e,C=void 0===b?g:b,[N,j]=(0,s.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],o[0]=t):t=o[0];let[w,L]=(0,s.useState)(t),[_,S]=(0,s.useState)("");o[1]!==c||o[2]!==w||o[3]!==y||o[4]!==_?(n=e=>{e.preventDefault(),j(!0),w.length&&y({commentId:c,type:"NEGATIVE",feedbackChoice:w,textResponse:_})},o[1]=c,o[2]=w,o[3]=y,o[4]=_,o[5]=n):n=o[5];let k=n,E=(0,s.useId)(),I=N&&0===w.length;return o[6]!==C||o[7]!==k||o[8]!==I||o[9]!==_||o[10]!==E?(a=()=>(0,i.jsxs)("form",{onSubmit:k,children:[(0,i.jsxs)(d.l.Body,{children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)(u.A,{onChange:L,required:!0,children:[(0,i.jsx)(u.A.Label,{children:"Category"}),C.map(e=>(0,i.jsxs)(m.A,{id:`feedback_choice_${e.value}`,children:[(0,i.jsx)(f.A,{value:e.value,"aria-describedby":I?E:void 0}),(0,i.jsx)(m.A.Label,{children:e.label})]},e.value)),I&&(0,i.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,i.jsxs)(m.A,{id:"text_response",children:[(0,i.jsx)(m.A.Label,{children:"How should we improve this response?"}),(0,i.jsx)(h.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:_,resize:"vertical",onChange:e=>S(e.currentTarget.value)})]})]}),(0,i.jsx)(d.l.Footer,{children:(0,i.jsx)(p.Q,{type:"submit",disabled:I,children:"Submit"})})]}),o[6]=C,o[7]=k,o[8]=I,o[9]=_,o[10]=E,o[11]=a):a=o[11],o[12]!==x||o[13]!==v||o[14]!==a?(l=(0,i.jsx)(d.l,{onClose:x,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:v,renderBody:a}),o[12]=x,o[13]=v,o[14]=a,o[15]=l):l=o[15],l};try{x.displayName||(x.displayName="NegativeFeedbackForm")}catch{}let y=e=>{let t,n,a=(0,r.c)(6),{onClick:l,commentId:s,disabled:d}=e;return a[0]!==s||a[1]!==l?(t=()=>l({type:"POSITIVE",commentId:s}),a[0]=s,a[1]=l,a[2]=t):t=a[2],a[3]!==d||a[4]!==t?(n=(0,i.jsx)(c.K,{size:"small",variant:"invisible",disabled:d,icon:o.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),a[3]=d,a[4]=t,a[5]=n):n=a[5],n},b=e=>{let t,n,a,l,d,u=(0,r.c)(13),{onClick:m,commentId:f,disabled:h,feedbackOptions:p}=e,[g,y]=(0,s.useState)(!1),b=(0,s.useRef)(null);u[0]!==m?(t=e=>{m(e),y(!1)},u[0]=m,u[1]=t):t=u[1];let v=t;return u[2]!==f||u[3]!==g||u[4]!==p||u[5]!==v?(n=g&&(0,i.jsx)(x,{onClose:()=>y(!1),onSubmit:v,commentId:f,feedbackOptions:p,returnFocusRef:b}),u[2]=f,u[3]=g,u[4]=p,u[5]=v,u[6]=n):n=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>y(!0),u[7]=a):a=u[7],u[8]!==h?(l=(0,i.jsx)(c.K,{ref:b,size:"small",variant:"invisible",disabled:h,icon:o.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:a}),u[8]=h,u[9]=l):l=u[9],u[10]!==n||u[11]!==l?(d=(0,i.jsxs)(i.Fragment,{children:[n,l]}),u[10]=n,u[11]=l,u[12]=d):d=u[12],d};try{y.displayName||(y.displayName="PositiveFeedbackButton")}catch{}try{b.displayName||(b.displayName="NegativeFeedbackButton")}catch{}var v=n(96379);let C=e=>{let t,n,a,o,c,d,u=(0,r.c)(20),{commentId:m,commentUrl:f,feedbackPath:h,feedbackOptions:p,additionalParameters:g}=e,[x,C]=(0,s.useState)();e:{if(h){t=h;break e}if(f){let e;u[0]!==f?((e=new URL(f,l.fV.origin)).hash="",u[0]=f,u[1]=e):e=u[1],t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let N=t;u[2]!==g||u[3]!==N?(n={path:N,additionalParameters:g},u[2]=g,u[3]=N,u[4]=n):n=u[4];let j=(({path:e,additionalParameters:t})=>(0,s.useCallback)(({type:n,commentId:i,feedbackChoice:r,textResponse:a})=>{try{let l=new FormData;if(l.set("comment_id",i),l.set("feedback",n),t)for(let[e,n]of Object.entries(t))l.set(e,n);for(let e of r??[])l.append("feedback_choice[]",e);a&&l.set("text_response",a),(0,v.DI)(e,{method:"POST",body:l})}catch{}},[e,t]))(n);u[5]!==j?(a=e=>{C(e.type),j(e)},u[5]=j,u[6]=a):a=u[6];let w=a,L=`copilot-code-review-feedback-${m}`;return u[7]!==m||u[8]!==w||u[9]!==x?(o="NEGATIVE"!==x&&(0,i.jsx)(y,{disabled:!!x,commentId:m,onClick:w}),u[7]=m,u[8]=w,u[9]=x,u[10]=o):o=u[10],u[11]!==m||u[12]!==p||u[13]!==w||u[14]!==x?(c="POSITIVE"!==x&&(0,i.jsx)(b,{disabled:!!x,onClick:w,commentId:m,feedbackOptions:p}),u[11]=m,u[12]=p,u[13]=w,u[14]=x,u[15]=c):c=u[15],u[16]!==L||u[17]!==o||u[18]!==c?(d=(0,i.jsxs)("div",{"data-testid":L,className:"d-flex gap-1",children:[o,c]}),u[16]=L,u[17]=o,u[18]=c,u[19]=d):d=u[19],d},N=e=>{let t,n=(0,r.c)(2);return n[0]!==e?(t=(0,i.jsx)(a.t,{fallback:null,children:(0,i.jsx)(C,{...e})}),n[0]=e,n[1]=t):t=n[1],t};try{C.displayName||(C.displayName="Feedback")}catch{}try{N.displayName||(N.displayName="CopilotCodeReviewFeedback")}catch{}},64099:(e,t,n)=>{n.d(t,{A:()=>i});let i=function(e,t){return e.has(t)}},65001:(e,t,n)=>{var i=n(70103),r=n(1723),a=n(74848),l=n(78314),s=n(35898),o=n(75202),c=n(76648),d=n(96540),u=n(38621),m=n(26382);function f(){return(0,a.jsx)("div",{children:(0,a.jsxs)(m.E,{border:!1,spacious:!1,children:[(0,a.jsx)(m.E.Visual,{children:(0,a.jsx)(u.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),(0,a.jsx)(m.E.Heading,{children:"Unable to load page."}),(0,a.jsxs)(m.E.Description,{children:[(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})})}try{f.displayName||(f.displayName="CommitErrorState")}catch{}function h(e){let t=(0,c.B)(),[n]=(0,d.useState)(t?.repo),[i]=(0,d.useState)(t?.currentUser);return(0,a.jsx)(o.t,{critical:!0,fallback:(0,a.jsx)(f,{}),children:(0,a.jsx)(s.Q,{user:i,children:(0,a.jsx)(l.d,{repository:n,children:e.children})})})}try{h.displayName||(h.displayName="App")}catch{}var p=n(70719),g=n(79472),x=n(18799),y=n(19976),b=n(53627),v=n(25407),C=n(30721),N=n(71315),j=n(83494),w=n(54571),L=n(70843),_=n(87555),S=n(34164),k=n(72511),E=n(10095);function I(){return(0,a.jsxs)(k.A,{variant:"warning",className:"mb-4",children:[(0,a.jsx)(E.A,{icon:u.AlertIcon,className:"mr-2"}),(0,a.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{I.displayName||(I.displayName="SpoofedCommitWarningBanner")}catch{}var D=n(83878);function T({oid:e,repo:t}){return(0,D.N)(e,t.id)?(0,a.jsxs)(k.A,{className:"mb-4",children:[(0,a.jsx)("img",{src:"/images/modules/commit/flowers@2x.png",alt:"flower",width:"88px",height:"49px",className:"mr-4 mt-1 float-left"}),(0,a.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,a.jsx)("p",{children:"We will miss you."})]}):null}try{T.displayName||(T.displayName="WeirichCommitBanner")}catch{}function A({oid:e,repo:t,commitBranchState:n}){return(0,a.jsxs)(a.Fragment,{children:[n.loading||0!==n.branches.length?null:(0,a.jsx)(I,{}),(0,a.jsx)(T,{oid:e,repo:t})]})}try{A.displayName||(A.displayName="CommitBanners")}catch{}var R=n(1117),$=n(46251),M=n(91747),O=n(73017),P=n(16051),U=n(21373),B=n(84268),F=n(26108),H=n(26607),z=n(55255),V=n(98783),W=n(3536),G=n(68534),q=n(48926),K=n(43147),X=n(13071),Q=n(76214),J=n(81945),Y=n(72579);function Z({data:e,repo:t,className:n}){return e.loading||0!==e.branches.length?(0,a.jsxs)("div",{className:(0,S.$)(n,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),children:[(0,a.jsx)(E.A,{className:"mr-1",icon:u.GitBranchIcon}),e.loading?(0,a.jsx)(J.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(ee,{branch:n,repo:t}),i!==e.branches.length-1?(0,a.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null}function ee({branch:e,repo:t}){let n=e.branch;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.A,{className:"mx-1",href:(0,v.bSP)({repo:t,head:n}),children:e.branch}),e.prs.length>0?(0,a.jsxs)(a.Fragment,{children:["(",e.prs.map((t,n)=>(0,a.jsxs)(d.Fragment,{children:[(0,a.jsx)(et,{pullRequest:t}),n!==e.prs.length-1?(0,a.jsx)(a.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})}function et({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,r=i?`${t.ownerLogin}/${t.name}`:"";return(0,a.jsxs)(B.A,{href:(0,v.oDn)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,v.i9S)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[r,"#",n]})}try{Z.displayName||(Z.displayName="CommitBranchInfo")}catch{}try{ee.displayName||(ee.displayName="BranchFragment")}catch{}try{et.displayName||(et.displayName="PullRequestLink")}catch{}var en=n(66108);function ei({commit:e,repo:t}){return(0,a.jsxs)(a.Fragment,{children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,n)=>(0,a.jsxs)(d.Fragment,{children:[0!==n?" + ":"",(0,a.jsx)(B.A,{to:(0,v.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:e})+new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin).search,as:en.N,className:"color-fg-default Link--inTextBlock","data-hotkey":function(e){switch(e){case 0:return"p";case 1:return"o";default:return}}(n),"data-hovercard-url":(0,v.fQd)({owner:t.ownerLogin,repo:t.name,commitish:e}),children:(0,G.F)(e)})]},e))]})}try{ei.displayName||(ei.displayName="CommitParents")}catch{}var er=n(5524),ea=n(15220);function el({data:e,repo:t,className:n}){if(0===e.tags.length)return null;let i=e.tags.length>2&&e.tags.length<25,r=e.tags.length>=25;return(0,a.jsxs)("div",{className:(0,S.$)(n,"d-flex flex-items-center flex-wrap gap-1"),children:[(0,a.jsx)(E.A,{className:"mr-2 fgColor-muted",icon:u.TagIcon}),(0,a.jsx)(B.A,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),i?(0,a.jsx)(es,{tags:e.tags,repo:t}):null,r?(0,a.jsx)(eo,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,a.jsx)(B.A,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})}function es({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null),l=(0,d.useCallback)(()=>{i(!0),requestAnimationFrame(()=>r.current?.focus())},[]);return n?(0,a.jsx)(a.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,a.jsx)(B.A,{ref:0===n?r:null,href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,a.jsx)(F.K,{"aria-label":"Show more tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:l})}function eo({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.K,{"aria-label":"Show all tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:r}),n&&(0,a.jsx)(ea.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:r,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,a.jsx)(er.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,a.jsx)(er.l.LinkItem,{href:(0,v.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{el.displayName||(el.displayName="CommitTagInfo")}catch{}try{es.displayName||(es.displayName="ExpandedTags")}catch{}try{eo.displayName||(eo.displayName="CommitTagsDialog")}catch{}let ec=(0,d.memo)(ed);function ed({commit:e,commitInfo:t,repo:n}){let i=(0,d.useRef)(null),{helpUrl:r}=(0,V.D)(),l=(0,W.I)(`${(0,v.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`);return(0,a.jsxs)(P.z,{children:[(0,a.jsx)(P.z.TitleArea,{variant:"large",className:"CommitHeader-module__PageHeader_TitleArea--aAkxF",children:(0,a.jsxs)(P.z.Title,{as:"h1",className:(0,S.$)("f2","CommitHeader-module__PageHeader_Title--W3dtK"),children:["Commit ",(0,a.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:(0,G.F)(e.oid)})]})}),(0,a.jsx)(P.z.Actions,{className:(0,S.$)("CommitHeader-module__commit-header-actions--Fj6HO"),children:(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-md-justify-end",children:[(0,a.jsx)(eu,{}),(0,a.jsx)(z.A,{text:"Browse the repository at this point in the history",direction:"sw",className:(0,S.$)("d-none d-md-flex","CommitHeader-module__browseFilesTooltip--q3qJZ"),children:(0,a.jsx)(U.Q,{as:B.A,href:(0,v.IO9)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:u.FileCodeIcon,className:"CommitHeader-module__browseFilesButton--hQymw",children:"Browse files"})}),(0,a.jsx)(F.K,{as:B.A,href:(0,v.IO9)({repo:n,action:"tree",commitish:e.oid}),icon:u.FileCodeIcon,"aria-label":"Browse files",className:"d-flex d-md-none"})]})}),(0,a.jsx)(P.z.Description,{children:(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[(0,a.jsx)(q.j,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},textVariant:"muted",children:(0,a.jsx)(X.C,{deferredData:l,oid:e.oid,repo:n,helpUrl:r})}),(0,a.jsxs)(Q.Z,{className:"pt-0",children:[(e.shortMessageMarkdown||e.bodyMessageHtml)&&(0,a.jsxs)("div",{className:"CommitHeader-module__commitMessageContainer--vwxSp",children:[e.shortMessageMarkdown&&(0,a.jsx)(O.JR,{ref:i,html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),e.bodyMessageHtml&&(0,a.jsx)(O.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),(0,a.jsxs)("div",{className:"CommitHeader-module__commitBranchContainer--PWvaQ",children:[(0,a.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,a.jsx)(Z,{data:t,repo:n}),t.tags.length>0&&(0,a.jsx)("span",{className:"px-2",children:"\xb7"}),(0,a.jsx)(el,{data:t,repo:n})]}),(0,a.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[(0,a.jsx)(ei,{commit:e,repo:n})," commit ",(0,a.jsx)("span",{className:"fgColor-default",children:(0,G.F)(e.oid)}),(0,a.jsx)(K.w,{className:"ml-2",sha:e.oid,direction:"sw"})]})]}),(0,M.u)("show_pusher_on_commit_detail")&&e.pusher&&(0,a.jsx)("div",{className:(0,S.$)("CommitHeader-module__pusher-container--AoXTp CommitHeader-module__commitMessageContainer--vwxSp"),children:(0,a.jsx)(q.C,{commit:e,repo:n,textVariant:"muted"})})]})]})})]})}function eu(){return(0,M.u)("diff_ux_refresh_beta")?(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,a.jsx)(H.A,{variant:"success",children:"Preview"}),(0,a.jsx)(B.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal d-none d-sm-block",children:"Give feedback"})]}):null}try{ec.displayName||(ec.displayName="CommitHeader")}catch{}try{ed.displayName||(ed.displayName="CommitHeaderUnmemoized")}catch{}try{eu.displayName||(eu.displayName="Feedback")}catch{}function em({unavailableReason:e,commit:t,commitInfo:n}){let i=(0,l.t)(),r=ef[e];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:(0,a.jsx)(ec,{commit:t,commitInfo:n,repo:i})}),(0,a.jsxs)(m.E,{children:[(0,a.jsx)(m.E.Visual,{children:r.visual}),(0,a.jsx)(m.E.Heading,{children:r.heading}),(0,a.jsx)(m.E.Description,{children:r.description}),r.secondaryAction]})]})}let ef={corrupt:{visual:(0,a.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(m.E.SecondaryAction,{href:(0,v.y2B)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,a.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(m.E.SecondaryAction,{href:(0,v.y2B)(),children:"Please contact support for more information"})},timeout:{visual:(0,a.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,a.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{em.displayName||(em.displayName="CommitUnavailable")}catch{}var eh=n(35311),ep=n(73189),eg=n(79634),ex=n(88431),ey=n(51220),eb=n(38943),ev=n(96379);let eC={extraDiffEntries:[],loading:!0,error:!1};var eN=n(99511);let ej=(0,d.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:i,focusedSearchResult:r,currentIndex:l,setCurrentIndex:s,setFocusedSearchResult:o,scrollDiffCellIntoView:c}){let m=(0,d.useRef)([]),f=(0,d.useRef)(0),h=(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,a.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===r?0:l+1,"/",f.current]}),!t&&(0,a.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:u.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,a.jsx)(F.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:u.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===r||""===r.pathDigest){e.current=0,o({pathDigest:m.current[0]??"",indexWithinDigest:0});return}1===t?(s(l===f.current-1?0:l+1),r.indexWithinDigest===n.get(r.pathDigest).length-1?(e.current=e.current+1,e.current===m.current.length&&(e.current=0),r.pathDigest=m.current[e.current]??"",r.indexWithinDigest=0):r.indexWithinDigest=r.indexWithinDigest+1):(s(0===l?f.current-1:l-1),0===r.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=m.current.length-1),r.pathDigest=m.current[e.current]??"",r.indexWithinDigest=n.get(r.pathDigest).length-1):r.indexWithinDigest=r.indexWithinDigest-1),o(r)};return(0,d.useEffect)(()=>{m.current=Array.from(n.keys()),e.current=0,o({pathDigest:m.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;f.current=t},[e,n,n.size,o]),(0,d.useEffect)(()=>{n.size>0&&void 0!==r&&c(r)},[n,r,l]),(0,a.jsxs)("div",{className:"DiffFind-module__defaultStyles--HqMRo",children:[(0,a.jsx)(j.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,a.jsx)(j.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,a.jsx)(eN.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:f.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,a.jsx)(E.A,{icon:u.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:t=>{t.target.value?(i(t.target.value),s(0)):(i(""),o(void 0),e.current=0)},block:!0,trailingAction:h})})]})});try{ej.displayName||(ej.displayName="DiffFind")}catch{}function ew(e,t){return`${"left"===t?"L":"R"}${e}`}function eL(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function e_(e){let t=ew(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=ew(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function eS(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,b.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}var ek=n(7808),eE=n(4788);function eI({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e,r=new Map;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},a=e.reduce((n,i,a)=>{if(r[a])return n;r[a]=!0;let l=eT(t,[e[a]]),s=l.next();for(;!s.done&&n.size<200;){let{resultsWithinDiff:t}=s.value;n.set(e[a]?.pathDigest??"",t),s=l.next()}return n},new Map);if(a.size<200&&i){let n=eT(t,e,a.size),i=n.next();for(;!i.done&&a.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;a.set(e[r]?.pathDigest??"",t),i=n.next()}}return a}(n,eD(t),i):function(e,t){let n=new Map,i=eT(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:a}=r.value;n.set(e[a]?.pathDigest??"",t),r=i.next()}return n}(n,eD(t)),query:t}}function eD(e){return{kind:"Text",regexp:RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")}}function*eT(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],a=0;for(let l=0;l<n.diffLines.length;l++){let s,o;s=t[i]?.diffLines[l]?.type==="HUNK"?n.diffLines[l]?.text:n.diffLines[l]?.text?.substring(1);let c=n.diffLines[l];for(;s&&null!==(o=e.regexp.exec(s));){let e=o[0],t=o.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:a,matchContent:e,column:t,diffLineNumIndex:l,isHunk:c?.type==="HUNK",hunkLineNumber:c?.blobLineNumber??-1,leftLineNumber:c?.type!=="ADDITION"?c?.left??-1:-1,rightLineNumber:c?.type!=="DELETION"?c?.right??-1:-1,columnEnd:t+e.length,text:s}),a++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}var eA=n(84078);function eR(){let[e,t]=(0,d.useState)(!1);return(0,a.jsx)("div",{className:e?"":"pt-4",children:!e&&(0,a.jsx)(eA.l,{title:"Some content is hidden",description:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>t(!0)})})}try{eR.displayName||(eR.displayName="VirtualizedBanner")}catch{}var e$=n(50683),eM=n(59523),eO=n(28014),eP=n(30617),eU=n(49245);async function eB(e,t,n){let i=await (0,ev.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function eF({repo:e,sha1:t,sha2:n,entry:i}){let r=await (0,ev.Sr)((0,v.uxJ)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n}));if(r.ok)return(await r.json()).diffLines;throw Error("error fetching diff lines.")}var eH=n(13083),ez=n(60745),eV=n(21537),eW=n(11683);let eG={ArrowLeft:eW.z0.ArrowHorizontal,ArrowDown:eW.z0.ArrowVertical,ArrowUp:eW.z0.ArrowVertical,ArrowRight:eW.z0.ArrowHorizontal,h:eW.z0.HL,j:eW.z0.JK,k:eW.z0.JK,l:eW.z0.HL,a:eW.z0.AD,s:eW.z0.WS,w:eW.z0.WS,d:eW.z0.AD,Tab:eW.z0.Tab,Home:eW.z0.HomeAndEnd,End:eW.z0.HomeAndEnd,PageUp:eW.z0.PageUpDown,PageDown:eW.z0.PageUpDown,Backspace:eW.z0.Backspace},eq=eW.z0.ArrowAll|eW.z0.PageUpDown|eW.z0.HomeAndEnd|eW.z0.AD,eK={displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"},eX=(0,d.createContext)(null);function eQ({children:e,...t}){let n=!!t.commentingImplementation,i=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==i)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let r=t?.ghostUser??eK,l=(0,d.useMemo)(()=>({ghostUser:r,...t}),[...Object.values(t),r]);return(0,a.jsx)(eX.Provider,{value:l,children:e})}function eJ(){let e=(0,d.useContext)(eX);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{eX.displayName||(eX.displayName="DiffContext")}catch{}try{eQ.displayName||(eQ.displayName="DiffContextProvider")}catch{}var eY=n(4559),eZ=n(50899),e0=n(46996),e1=n(18651);let e2="FAILURE",e3="NOTICE",e4="WARNING",e5="empty-diff-line";function e8(e,t,n){return"left"===n?!e9(e)&&e.left===t:!e9(e)&&(0,eH.XU)(e.type)===n&&e.right===t}function e7(e,t,n){let i=`-${e9(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${e9(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function e6(e,t){return`${e}-${t}`}function e9(e){return!!e&&e===e5}function te(e){return"CONTEXT"===e.type}function tt(e,t,n=!1){return n?function(e,t){let n;switch(t){case"ADDITION":n=["+"];break;case"DELETION":n=["-"];break;case"CONTEXT":n=[" "];break;case"INJECTED_CONTEXT":n=[" ","~"]}if(void 0===n||0===n.length||n.every(t=>!e.startsWith(t)))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t):function(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t)}function tn(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function ti(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function tr({line:e,range:t,fileAnchor:n}){let i,{origin:r,pathname:a}=window.location;if(e){let r=ti(e)?e.left:e.right;i=t&&r&&t.startLineNumber<=r&&t.endLineNumber>=r?e_(t):function(e,t){let n=ti(e),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return e_({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)}else t&&(i=e_(t));if(i)return`${r}${a}#${i}`}function ta({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,e1.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,e1.U0)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,e1.U0)()?"\u21E7":"Shift + "}`),r+=i}function tl({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,e1.U0)()?"Command+":"Control+"),n&&(r+=(0,e1.U0)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let ts=["ADDITION","DELETION","CONTEXT"],to=e=>e?e.filter(e=>!e9(e)).map(e=>{let[t]=tt(tn(e.html),e.type);return t}).join(`
`):"";function tc(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?`color-mix(in oklab, var(--bgColor-accent-emphasis) 8%, ${i})`:i}function td({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:i}){let r=!!n,{startOrientation:a,endOrientation:l}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!i)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let s=u(a).findIndex(t=>e8(t,e.startLineNumber,e.startOrientation)),o=u(l).findIndex(t=>e8(t,e.endLineNumber,e.endOrientation)),c=s>=0&&o>=0;function d(e){if(!c||e9(e))return!1;let t=u((0,eH.XU)(e.type)).indexOf(e);return t>=s&&t<=o}function u(e){var i;return r&&"left"!==("string"==typeof(i=e)?i:(0,eH.XU)(i.type))?n:t}let m=u("left").filter(e=>d(e)),f=u("right").filter(e=>d(e));return{isRowSelected:d,selectedRightLines:f,selectedLeftLines:m}}let tu=(0,d.createContext)(null);function tm(){let e=(0,d.useContext)(tu);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function tf(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,eY.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,eY.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function th({children:e}){let t=(0,d.useRef)(new Map),n=(0,eZ.K)((e,n)=>{if(!e)return;let i=e.diffAnchor,r=t.current.get(i);if(!r)return;let{leftLines:a,rightLines:l}=function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e5);for(;n.length<t.length;)n.push(e5)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}(r);return td({selectedDiffRowRange:e,leftLines:a,rightLines:l,isNumberCell:n})}),[i,r]=(0,d.useState)(()=>(function(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}})(N.fV.hash)),[l,s]=(0,d.useState)(()=>{if(i){let e=n(i);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),o=(0,eZ.K)((e,t)=>{let i=n(e,t),r=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,e0.A)(l,r)||s(r)}),c=(0,eZ.K)((e,t,n,a,l)=>{if(!t||!n)return;let s=a&&i&&i.diffAnchor===e?t<=i.firstSelectedLineNumber?{...i,startLineNumber:t,startOrientation:n,endLineNumber:i.firstSelectedLineNumber,endOrientation:i.firstSelectedOrientation}:{...i,startLineNumber:i.firstSelectedLineNumber,startOrientation:i.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};tf(s),(l||a)&&r(s),o(s,l),eS(e_(s))}),u=(0,eZ.K)(e=>{tf(e),r(e),o(e),eS(e_(e))}),m=(0,eZ.K)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{u({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),f=(0,eZ.K)(()=>{i&&(r(void 0),o(void 0),(0,eY.i)("Selection Cleared"),(0,b.K3)())}),h=(0,eZ.K)((e,n)=>{t.current.set(e,n),i?.diffAnchor===e&&o(i)}),p=(0,eZ.K)(e=>t.current.get(e)),g=(0,d.useMemo)(()=>({selectedDiffRowRange:i,updateSelectedDiffRowRange:c,clearSelectedDiffRowRange:f,replaceSelectedDiffRowRange:u,replaceSelectedDiffRowRangeFromGridCells:m,updateDiffLines:h,selectedDiffLines:l,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:p}),[i,c,f,u,m,l,h,n,p]);return(0,a.jsx)(tu.Provider,{value:g,children:e})}try{tu.displayName||(tu.displayName="SelectedDiffRowRangeContext")}catch{}try{th.displayName||(th.displayName="SelectedDiffRowRangeContextProvider")}catch{}let tp="final-hunk-header-line";function tg(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function tx(e,t){if("HUNK"===e.type&&e.__id===tp)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(tg).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function ty(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let a=e[r];if(a&&!e9(a)&&(t=a,"HUNK"===a.type)){let t,l=e[i];if(!l||e9(l))continue;let s=r-1;for(;(!t||e9(t))&&(t=e[s],-1!=--s););t&&!e9(t)&&n.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),a.__id===tp&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!e9(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}var tb=n(69726);function tv({children:e,helpText:t,helpUrl:n,onLoadDiff:i,diffAnchor:r}){let l=n&&t,[s,o]=(0,d.useState)("initial"),c=(0,d.useCallback)(async()=>{try{o("loading"),await i()}catch{o("error")}},[i,o]);return(0,a.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":r,children:(0,a.jsxs)("div",{className:(0,S.$)("HiddenDiffPatch-module__gridColumnTemplate--UvUAt"),children:[(0,a.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,a.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===s&&(0,a.jsx)(tb.A,{size:"medium"}),"error"===s&&(0,a.jsx)(u.AlertIcon,{size:24}),"initial"===s&&(0,a.jsx)(U.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{c(),o("loading")},children:"Load Diff"}),"error"===s?(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,a.jsx)(B.A,{inline:!0,as:"button",onClick:()=>{c(),o("loading")},children:"Retry"})]}):(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,l&&(0,a.jsx)(B.A,{inline:!0,href:n,children:t})]})]})]})})}try{tv.displayName||(tv.displayName="HiddenDiffPatch")}catch{}var tC=n(12918);let tN=(0,d.createContext)(null);function tj({children:e,currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:c,isRowSelected:u=!1,isSplit:m,modifiedLineThreads:f,nextHunk:h,originalLineThreads:p,previousHunk:g,rowId:x,diffContext:y,setInGridMode:b}){let v=(0,d.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:l,filePath:s,hasHiddenUnicodeCharacters:o,isLeftSide:c,isRowSelected:u,isSplit:m,modifiedLineThreads:f,modifiedLineHasThreads:f&&f.length>0,nextHunk:h,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,previousHunk:g,rowId:x,diffContext:y,setInGridMode:b}),[t,n,i,r,l,s,o,c,u,m,f,h,p,g,x,y,b]);return(0,a.jsx)(tN.Provider,{value:v,children:e})}function tw(){let e=(0,d.useContext)(tN);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{tN.displayName||(tN.displayName="DiffLineContext")}catch{}try{tj.displayName||(tj.displayName="DiffLineContextProvider")}catch{}function tL(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData?.totalCount??0,a=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:a,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var t_=n(45800),tS=n(35750),tk=n(18150),tE=n(85242),tI=n(88243),tD=n(16213),tT=n(50467),tA=new WeakMap,tR=new WeakMap,t$=new WeakMap,tM=new WeakMap,tO=new WeakMap,tP=new WeakMap,tU=new WeakSet,tB=new WeakSet,tF=new WeakSet,tH=new WeakSet,tz=new WeakSet,tV=new WeakSet,tW=new WeakSet,tG=new WeakSet,tq=new WeakSet,tK=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tS._)(this,tR).get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,tI._)(this,tW,t1).call(this,r)&&(0,tS._)(this,tM)&&(a=(0,tS._)(this,tM),(0,tE._)(this,tM,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tS._)(this,tA).length-1,t=(0,tS._)(this,tA)[e]?.length;t&&(n=(0,tS._)(this,tA)[e]?.[t-1]);break}case"ArrowUp"===e:(0,tI._)(this,tW,t1).call(this,r-1)?((0,tI._)(this,tK,t4).call(this,a),n=(0,tS._)(this,tA)[r-1]?.[0]):n=(0,tS._)(this,tA)[r-1]?.[a];break;case"ArrowDown"===e:(0,tI._)(this,tW,t1).call(this,r+1)?((0,tI._)(this,tK,t4).call(this,a),n=(0,tS._)(this,tA)[r+1]?.[0]):n=(0,tS._)(this,tA)[r+1]?.[a];break;case"ArrowLeft"===e:n=(0,tS._)(this,tA)[r]?.[a-1];break;case"ArrowRight"===e:n=(0,tS._)(this,tA)[r]?.[a+1];break;case"PageUp"===e:{(0,tI._)(this,tK,t4).call(this,a);let e=(0,tI._)(this,tF,tJ).call(this,r);n=(0,tS._)(this,tA)[e]?.[0];break}case"PageDown"===e:{(0,tI._)(this,tK,t4).call(this,a);let e=(0,tI._)(this,tB,tQ).call(this,r),t=0;e||(e=(0,tS._)(this,tA).length-1,t=a),n=(0,tS._)(this,tA)[e]?.[t];break}case"Home"===e:n=(0,tS._)(this,tA)[r]?.[0];break;case"End"===e:{let e=(0,tS._)(this,tA)[r];if(e&&!(0,tI._)(this,tW,t1).call(this,r)){let t=e.length-1;n=(0,tS._)(this,tA)[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,tI._)(this,tH,tY).call(this,e,t)}focusFirstGridCell(e){e&&(0,tS._)(this,tR).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tS._)(this,tA)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tS._)(this,tR).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tS._)(this,tA)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=(0,tS._)(this,tR).get(i?.cellId??"");if(!r)return;let[a,l]=r;if("ArrowUp"===e){let e=a-1;for(;!t&&e>=0;)t=(0,tI._)(this,tU,tX).call(this,{rowIndex:e,columnIndex:l}),e--}if("ArrowDown"===e){let e=a+1;for(;!t&&e<(0,tS._)(this,tA).length;)t=(0,tI._)(this,tU,tX).call(this,{rowIndex:e,columnIndex:l}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tS._)(this,tR).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tS._)(this,tP)?(0,tS._)(this,tA)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tS._)(this,tP)?(0,tS._)(this,tA)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tS._)(this,tA)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tS._)(this,tA).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tS._)(this,tA).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=e6(e7((0,tS._)(this,tO),e,t),0),r=(0,tS._)(this,tR).get(i);if(!r)return!1;let[a]=r;return!!n===(0,tI._)(this,tW,t1).call(this,a)}constructor(e,t,n,i,r){(0,tD._)(this,tU),(0,tD._)(this,tB),(0,tD._)(this,tF),(0,tD._)(this,tH),(0,tD._)(this,tz),(0,tD._)(this,tV),(0,tD._)(this,tW),(0,tD._)(this,tG),(0,tD._)(this,tq),(0,tD._)(this,tK),(0,tk._)(this,tA,{writable:!0,value:[]}),(0,tk._)(this,tR,{writable:!0,value:new Map}),(0,tk._)(this,t$,{writable:!0,value:new Set}),(0,tT._)(this,"focusedGridCell",void 0),(0,tT._)(this,"lastSelectedGridCell",void 0),(0,tk._)(this,tM,{writable:!0,value:void 0}),(0,tk._)(this,tO,{writable:!0,value:void 0}),(0,tk._)(this,tP,{writable:!0,value:void 0}),(0,tE._)(this,tO,e),(0,tE._)(this,tP,t),(0,tI._)(this,tH,tY).call(this,n,i),this.focusFirstGridCell(r)}};function tX({rowIndex:e,columnIndex:t}){let n=(0,tS._)(this,tA)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tS._)(this,tP):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tS._)(this,tP):return n?.[t+1];default:return n?.[t]}}function tQ(e){return Array.from((0,tS._)(this,t$)).sort((e,t)=>e-t).find(t=>t>e)}function tJ(e){return Array.from((0,tS._)(this,t$)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function tY(e,t){(0,tE._)(this,tA,[]),(0,tE._)(this,tR,new Map),(0,tE._)(this,t$,new Set);for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if((0,tS._)(this,tP)){let e=(t||[])[n],a=e7((0,tS._)(this,tO),r,e);e9(r)||"HUNK"!==r.type?(0,tI._)(this,tG,t2).call(this,{leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):(0,tI._)(this,tV,t0).call(this,i,a,n)}else{let e=e7((0,tS._)(this,tO),r,r);e9(r)||"HUNK"!==r.type?(0,tI._)(this,tq,t3).call(this,{diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):(0,tI._)(this,tV,t0).call(this,i,e,n)}(0,tS._)(this,tA).push(i)}}}function tZ({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a,isSplit:l}){let s,o,c=e6(r,e);o=!(l||e9(t))&&t?.type==="DELETION"&&1===e||!(l||e9(t))&&t?.type==="ADDITION"&&0===e||e9(t),e9(t)||"left"!==n||(s=t?.left),e9(t)||"right"!==n||(s=t?.right),i.push({lineNumber:s,orientation:n,isEmpty:o,isHunk:!1,cellId:e6(r,e),columnIndex:e}),(0,tS._)(this,tR).set(c,[a,e])}function t0(e,t,n){let i=e6(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),(0,tS._)(this,tR).set(i,[n,0]),(0,tS._)(this,t$).add(n)}function t1(e){return(0,tS._)(this,t$).has(e)}function t2({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){(0,tI._)(this,tz,tZ).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tI._)(this,tz,tZ).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tI._)(this,tz,tZ).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tI._)(this,tz,tZ).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}function t3({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=e9(e)||"DELETION"!==e.type?"right":"left";(0,tI._)(this,tz,tZ).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tI._)(this,tz,tZ).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tI._)(this,tz,tZ).call(this,{cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function t4(e){(0,tI._)(this,tW,t1).call(this,e)||(0,tE._)(this,tM,e)}function t5(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function t8(e){return e in eG&&(eG[e]&eq)>0}function t7({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:r,replaceSelectedDiffRowRangeFromGridCells:a,rightLines:l,disabled:s}){var o;let c,u=(0,d.useRef)(void 0),m=(0,d.useMemo)(()=>new GridNavigator(n,i,r,l,u.current?.focusedGridCell?.cellId),[n,i,r,l]);(0,d.useEffect)(()=>{u.current=m},[m]),(0,d.useEffect)(()=>{let e=t.current,n=()=>{m.clearLastSelectedCell()};return e?.addEventListener("mousedown",n),()=>e?.removeEventListener("mousedown",n)},[t,m]),o=u.current,(0,d.useEffect)(()=>{if(o&&document.activeElement){let e=function(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],l=n?.[r]??a,s=!e9(a)&&a?.type==="HUNK";a&&l&&!e.hasLine(a,l,s)&&i.push(a)}return i}(o,r,l);if(0!==e.length){if(document.activeElement===document.body){let t,i,a,l=r.indexOf(e[e.length-1]),s=r[l+1],o=e[0];s&&!e9(s)&&"HUNK"===s.type&&(t=e6(e7(n,s,s),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(t=e6(e7(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(a?a.focus():i.focus(),m.focusGridCell(t),t5(i))}else if("BUTTON"===document.activeElement.tagName)t5(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=m.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,r,m,l,o,t]),c=(0,d.useCallback)(e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&m.focusGridCell(t)},[m]),(0,d.useEffect)(()=>{let e=t.current;return e?.addEventListener("focusin",c),()=>e?.removeEventListener("focusin",c)},[t,c]);let f=(0,d.useCallback)((t,i,r)=>{let l=m.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=m.getFirstCodeCell(),t=m.getLastCodeCell();if(!e||!t)return i;return a({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=m.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),t6(e.cellId),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=m.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return a({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),t6(e.cellId),i}case"ArrowLeft"===r.key&&r.metaKey&&r.shiftKey:return i;default:{let t=m.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),m.clearLastSelectedCell(),n??void 0}}},[m,n,a,e]);return(0,t_.G)({containerRef:t,bindKeys:eq,getNextFocusable:f,focusableElementFilter:e=>"BUTTON"!==e.tagName&&"TEXTAREA"!==e.tagName,focusInStrategy:"previous",disabled:s},[f]),{gridNavigator:m}}function t6(e){let t=N.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!N.XC||!N.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(N.cg.innerHeight||N.XC.documentElement.clientHeight)&&t.right<=(N.cg.innerWidth||N.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var t9=n(87825);let ne=(0,d.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function nt({enableDiffGridMode:e,children:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useCallback)(()=>{i(!0),e?.(!1)},[e]),l=(0,d.useCallback)(()=>{i(!1),e?.(!0)},[e]),s=(0,d.useMemo)(()=>({isInDialogMode:n,enableInlineCommentDialogMode:r,disableInlineCommentDialogMode:l}),[n,r,l]);return(0,a.jsx)(ne.Provider,{value:s,children:t})}let nn=()=>(0,d.useContext)(ne);try{ne.displayName||(ne.displayName="InlineCommentDialogModeContext")}catch{}try{nt.displayName||(nt.displayName="InlineCommentDialogModeProvider")}catch{}function ni(e){return null!=e}let nr="thread",na="annotation",nl=(0,d.createContext)(null);function ns({children:e,line:t}){let[n,i]=(0,d.useState)(!1),[r,l]=(0,d.useState)(),[s,o]=(0,d.useState)(),[c,u]=(0,d.useState)(),[m,f]=(0,d.useState)(),[h,p]=(0,d.useState)(),{ghostUser:g,markerNavigationImplementation:x}=eJ(),{originalLineThreads:y,modifiedLineThreads:b}=tw(),[v,C]=(0,d.useState)(),N=nc({line:t,side:v,originalLineThreads:y,modifiedLineThreads:b,ghostUser:g}),j=(0,d.useMemo)(()=>!!r||!!s||!!c||!!m,[r,c,s,m]),w=(0,d.useCallback)(()=>{i(!0)},[]),L=(0,d.useCallback)(()=>{i(!1)},[]),_=(0,d.useCallback)(e=>{e?p({id:e,kind:nr}):p(void 0)},[]),S=h?.kind===nr?h.id:void 0,k=h?.kind===na?h.id:void 0,E=(0,d.useCallback)(e=>{e?p({id:e,kind:na}):p(void 0)},[]),I=(0,d.useCallback)((e,t,n)=>{var i;let r,a;switch(i=x?.overlayPortalContainerName,r=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),a=document.querySelector(`#${i} div[role="dialog"]`),(r||a)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0})),e){case"context-menu":l(t),f(void 0),u(void 0),o(void 0);break;case"new-conversation":f({cellId:t,withSuggestedChange:n?.withSuggestedChange}),l(void 0),u(void 0),o(void 0);break;case"marker-details":u(t),l(void 0),o(void 0),f(void 0);break;case"marker-list":o(t),l(void 0),f(void 0),u(void 0)}},[x?.overlayPortalContainerName]),D=(0,d.useCallback)(e=>{switch(e){case"context-menu":l(void 0);break;case"new-conversation":f(void 0);break;case"marker-details":u(void 0);break;case"marker-list":o(void 0)}},[]),T=(0,d.useCallback)(e=>(C(e),nc({line:t,side:e,modifiedLineThreads:b,originalLineThreads:y,ghostUser:g})),[t,b,y,g]),A=(0,d.useMemo)(()=>t.annotationsData?.annotations?.filter(ni)??[],[t.annotationsData?.annotations]),R=(0,d.useMemo)(()=>({annotations:A,isActionBarVisible:n,showActionBar:w,hideActionBar:L,selectThreadId:_,selectAnnotationId:E,closeDialog:D,openDialog:I,anyMenuOpen:j,selectedThreadId:S,selectedAnnotationId:k,openContextMenuCell:r,openMarkersListCell:s,openMarkerDetailsCell:c,openNewConversationCell:m,threads:N,updateVisibleThreads:T}),[A,n,w,L,_,E,D,I,j,S,k,r,s,c,m,N,T]);return(0,a.jsx)(nl.Provider,{value:R,children:e})}function no(){let e=(0,d.useContext)(nl);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function nc({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,ghostUser:r}){switch(t){case"LEFT":return n||[];case"RIGHT":return i||[];case void 0:return tL(e.threadsData,r);default:return[]}}try{nl.displayName||(nl.displayName="MarkersDialogContext")}catch{}try{ns.displayName||(ns.displayName="MarkersDialogContextProvider")}catch{}var nd=n(40260),nu=n(98211),nm=n(94236);let nf=(0,d.createContext)({});function nh({children:e}){let[t,n]=(0,d.useState)(!1),i=(0,d.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,a.jsx)(nf.Provider,{value:i,children:e})}try{nf.displayName||(nf.displayName="DialogStateContext")}catch{}try{nh.displayName||(nh.displayName="DialogStateProvider")}catch{}let np=eW.z0.ArrowAll;eW.z0.ArrowHorizontal,eW.z0.ArrowVertical,eW.z0.ArrowVertical,eW.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let a=this.markers[n];if(a)return this.currentMarkerPosition={markerId:a.id,index:n},a}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let a=this.markerComments[r]||[];if(0===a.length)return;let l=t.getAttribute("data-marker-navigation-comment-id"),s=a.findIndex(e=>e.id===l);if(-1===s)return;let o=s===a.length-1;switch(e){case"ArrowDown":if(o)return;n=s+1;break;case"ArrowUp":if(0===s)return;n=s-1;break;default:return}let c=a[n];if(c)return this.currentMarkerCommentPosition={markerId:c.id,index:n},c}constructor(e,t,n){if((0,tT._)(this,"markers",void 0),(0,tT._)(this,"markerComments",null),(0,tT._)(this,"currentMarkerPosition",null),(0,tT._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){const e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};let ng="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nx(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(ng)??[]))t.setAttribute("tabindex","0")}function ny({commentSubjectType:e,markerRef:t,isThread:n=!1,thread:i}){let{isInDialogMode:r}=nn();(0,d.useEffect)(()=>{let a=null;if(!n||i){if(r)"commit"===e?a=setTimeout(()=>{nx(t.current)},100):nx(t.current);else{var l;l=t.current,l?.setAttribute("aria-hidden","true"),function e(t=0){setTimeout(()=>{let t=Array.from(l?.querySelectorAll("*")??[]),n=Array.from(l?.querySelectorAll(ng)??[]);if(0===n.length)return e(200);for(let e of t)e?.setAttribute("aria-hidden","true");for(let e of n)e.setAttribute("tabindex","-1")},t)}()}return()=>{a&&clearTimeout(a)}}},[r,e,t,n,i])}var nb=n(77430),nv=n(98552),nC=n(69497),nN=n(38267);function nj({annotationLevel:e,...t}){let{icon:n,...i}=n_[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:i,className:r}){return(0,a.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:i})}({...n,...i,...t})}let nw=(0,nN.i7)(["0%{opacity:0;}100%{opacity:1;}"]),nL=(0,nN.Ay)(nj).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-a72ff19-0"})(["animation:"," 0.1s ease-in;"],nw),n_={[e2]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,a.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[e4]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[e3]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{nj.displayName||(nj.displayName="AnnotationIcon")}catch{}try{nL.displayName||(nL.displayName="AnimatedAnnotationIcon")}catch{}let nS={[e2]:(0,a.jsx)(u.StopIcon,{className:"fgColor-danger"}),[e4]:(0,a.jsx)(u.AlertIcon,{className:"fgColor-attention"}),[e3]:(0,a.jsx)(u.InfoIcon,{className:"fgColor-muted"})};function nk({annotation:e}){return(0,a.jsxs)("div",{className:(0,S.$)("p-3 bgColor-default",n_[e.annotationLevel]?.borderColor,"Annotation-module__annotation--XyhuZ"),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[nS[e.annotationLevel],(0,a.jsx)(nv.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:n_[e.annotationLevel]?.ariaLabel})]}),(0,a.jsx)("div",{className:"ml-4",children:e.title&&(0,a.jsx)(nv.A,{weight:"semibold",size:"medium",className:n_[e.annotationLevel]?.primaryColorClass,children:e.title})}),(0,a.jsxs)("h2",{className:"sr-only",children:[n_[e.annotationLevel]?.ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(O.$6,{html:e.message,className:"Annotation-module__annotationMessage--vtkTa"})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,a.jsxs)("div",{className:"Annotation-module__annotationSource--_lhYD",children:[(0,a.jsx)(nb.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(nC.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(nv.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(nv.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(U.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{nk.displayName||(nk.displayName="Annotation")}catch{}function nE({annotation:e,isFirstMarker:t,commentingImplementation:n}){let i=(0,d.useRef)(null),{isInDialogMode:r}=nn();return ny({commentSubjectType:n.commentSubjectType,markerRef:i}),(0,a.jsx)("div",{id:`annotation_${e.databaseId}`,ref:i,className:(0,S.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",t?"mb-1":"mb-2","InlineAnnotation-module__inlineAnnotation--zYahl"),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:r?0:-1,children:(0,a.jsx)(nk,{annotation:e})})}try{nE.displayName||(nE.displayName="InlineAnnotation")}catch{}var nI=n(82075),nD=n(30459),nT=n(11196),nA=n(12683);function nR(){return(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)(m.E,{border:!0,children:[(0,a.jsx)(m.E.Visual,{children:(0,a.jsx)(u.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,a.jsx)(m.E.Heading,{children:(0,a.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsx)(m.E.Description,{children:"Refresh the page or try again later"})}),(0,a.jsx)(m.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})}try{nR.displayName||(nR.displayName="CommentErrorFallback")}catch{}let n$="InlineReviewThread-module__inlineReviewThreadHeading--ytbVB";var nM=n(11738);function nO(e,t="r"){(0,b.Zu)(`#${t}${e}`)}var nP=n(91835),nU=n(46747);let{getItem:nB,removeItem:nF,setItem:nH}=(0,nI.D)("localStorage");function nz({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:l}){let s,o,[c,u]=(0,d.useState)(!1),m=(0,d.useMemo)(()=>a||(a??((e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")})({diffSide:e,filePath:t,line:i,subjectId:r},l)),[e,t,i,r,a,l]),{hasPersistedComment:f,removePersistedCommentFromStorage:h}=(s=nB(m),o=!!s?.text?.trim(),(0,d.useEffect)(()=>{o&&n?.(s)},[o]),{hasPersistedComment:o,removePersistedCommentFromStorage:()=>{nF(m),o=!1,s=null}});return{hasPersistedComment:f,persistCommentToStorage:(0,nU.d)(e=>{if(c)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{nH(m,t)}catch{u(!0)}},1e3),removePersistedCommentFromStorage:h}}function nV(e,t){for(let n of function e(t,n=[]){var i,r;let a;if(""===t)return n;let l=t.match(nW());if(!l)return n;let s=l.groups.fence;if(!s)return n;let o=s.includes("~")?"~":"`",c=t.match((a=nW([i=o],r=s.length),RegExp(`${a.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${i}{${r},}[ 	]*$`,"ms")));if(!c)return n;let d=0,u=l.groups.indent;""!==u&&(d=u.length);let m=c.groups.suggestion;if(d>0){let e=RegExp(`^ {0,${d}}`,"m");m=m.replace(e,"")}return n.push(m),e(t.slice(c.index+c[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function nW(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}var nG=n(42118);let nq=(0,d.forwardRef)(({children:e,subject:t,...n},i)=>(0,a.jsx)(nG.hF,{...n,ref:i,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));function nK({batchPending:e,batchingEnabled:t,commentBoxSubject:n,condensed:i,fileLevelComment:r,filePath:l,focusOnMount:s,isReplying:o,lineNumber:c,onAddComment:u,onCancelComment:m,onPersistedCommentExists:f,quotedText:h="",side:p,startLineNumber:g,subjectId:x,threadId:y,suggestedChangesConfig:b}){let[v,C]=(0,d.useState)(h),[j,w]=(0,d.useState)(!1),[L,_]=(0,d.useState)(),S=(0,d.useRef)(null),k=(0,d.useRef)(null),{persistCommentToStorage:E,removePersistedCommentFromStorage:I}=nz({diffSide:p,filePath:l,line:c,subjectId:x,threadId:y,handlePersistedCommentExists:({text:e})=>{e&&(C(e),f?.())},fileLevelComment:!!r});(0,d.useEffect)(()=>{if(s){let e=setTimeout(()=>{if(k.current&&(N.XC||N.cg)){let e=k.current,t=e.getBoundingClientRect(),n=N.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(N.cg?.innerHeight||n))){let i=t.top,r=N.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);N.cg?.scrollTo({top:i-r-2/3*n+a,behavior:"smooth"})}}S.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[s]);let D=({submitBatch:e})=>{let t="Failed to save comment";if(j)return;if(!v.trim())return void _(`${t}: Body can't be blank`);w(!0),_(void 0);let n=nV(v,b?.sourceContentFromDiffLines??"");if(!n.isValid){_(n.errorMessage),w(!1);return}u?.({commentText:v,onCompleted(){w(!1),R()},onError(e){w(!1),e.message&&(t=`${t}: ${e.message}`),_(t)},submitBatch:e})},T=()=>D({submitBatch:!1}),A=()=>D({submitBatch:!0}),R=(0,d.useCallback)(()=>{I(),C(""),m?.()},[m,I]),$={footer:{justifyContent:o?"end":"space-between","> div:first-child":{display:i||o?"none":"flex"},...i&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,a.jsx)("div",{className:"AddCommentEditor-module__AddCommentEditor--PS0ul",onKeyDown:e=>{"Escape"!==e.key||v.trim()?e.stopPropagation():(e.preventDefault(),R())},children:(0,a.jsxs)(nq,{ref:S,label:"Add diff comment",sx:$,value:v,onChange:e=>{_(void 0),E({text:e}),C(e)},onPrimaryAction:t?T:A,suggestedChangesConfig:b,markdownErrorMessage:L,subject:n,lineNumber:c,filePath:l,startLineNumber:g,children:[m&&(0,a.jsx)(nP.x,{disabled:j,className:"py-1 px-2",variant:"default",onClick:R,children:"Cancel"}),!e&&(0,a.jsx)(nP.x,{disabled:j||!v.length,className:"py-1 px-2",variant:t?"default":"primary",onClick:A,ref:k,children:o?"Reply":"Comment"}),t&&(0,a.jsx)(nP.x,{disabled:j||!v.length,className:"py-1 px-2",variant:"primary",onClick:T,children:e?"Add review comment":"Start a review"})]})})}nq.displayName="ConversationCommentBox";try{nK.displayName||(nK.displayName="AddCommentEditor")}catch{}var nX=n(26156),nQ=n(71073),nJ=n(81156),nY=n(63352),nZ=n(78809),n0=n(24967),n1=n(19805),n2=n(43258),n3=n(59394),n4=n(40961);function n5({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,nD.s)();return(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsx)(U.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{n5.displayName||(n5.displayName="AddToExistingBatch")}catch{}var n8=n(73783);let n7={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function n6({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:i}=(0,nD.s)(),[r,l]=(0,d.useState)(n7.applySuggestion),[s,o]=(0,d.useState)(!1),c=(0,d.useRef)(null),m=(0,d.useRef)(null),f=()=>o(!s),{addSuggestedChangeToPendingBatch:h}=e,p=(0,d.useCallback)(()=>{r===n7.addSuggestionToBatch&&(h(n),i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===n7.applySuggestion&&t(m)},[h,t,r,i,n]);return(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsxs)(n8.A,{children:[(0,a.jsx)(U.Q,{variant:"primary",onClick:p,ref:m,children:r.text}),(0,a.jsxs)(nm.W,{anchorRef:c,open:s,onOpenChange:f,children:[(0,a.jsx)(nm.W.Anchor,{children:(0,a.jsx)(F.K,{ref:c,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:u.TriangleDownIcon,size:"medium",variant:"primary",onClick:f})}),(0,a.jsx)(nm.W.Overlay,{width:"medium",children:(0,a.jsx)(er.l,{selectionVariant:"single",children:Object.keys(n7).map(e=>{let t=n7[e];return(0,a.jsx)(er.l.Item,{selected:r===t,onSelect:()=>l(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{n6.displayName||(n6.displayName="ApplyOrAddToBatch")}catch{}var n9=n(70263),ie=n(86877),it=n(4175);function ii({children:e,footerButtons:t}){let{containerRef:n}=(0,t_.G)({bindKeys:eW.z0.ArrowHorizontal|eW.z0.Tab,focusInStrategy:"closest"});return t?(0,a.jsx)(ea.l.Footer,{ref:n,children:(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,a.jsx)(ea.l.Buttons,{buttons:t})}),e]})}):null}let ir="CHANGE_COMMIT_MESSAGE",ia="CHANGE_EXTENDED_DESCRIPTION";function il(e,t){switch(t.type){case ir:return{...e,commitMessage:t.payload};case ia:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function is({authorLogins:e,batchSize:t,onClose:n,onCommit:i}){let r=(0,n9.A)(),{sendAnalyticsEvent:l}=(0,nD.s)(),[s,o]=(0,d.useState)(!1),[c,u]=(0,d.useState)(),[m,f]=(0,d.useReducer)(il,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),h=(0,d.useCallback)((e,t,n)=>{if(!r())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",o(!1),u(i)},[r]),p=(0,d.useCallback)(()=>{r()&&(o(!1),c&&u(void 0))},[c,r]),g=(0,d.useCallback)(()=>{s||(o(!0),l("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),i(`${m.commitMessage}

${m.extendedDescription}`,h,p))},[t,m.commitMessage,m.extendedDescription,p,h,s,i,l]);return(0,a.jsxs)(ea.l,{title:"Apply suggestion",renderFooter:()=>(0,a.jsx)(ii,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,a.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",s&&(0,a.jsx)(tb.A,{size:"small",className:"ml-1"})]}),onClick:g,buttonType:"primary"}],children:c&&(0,a.jsx)(ie.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:c})}),onClose:n,children:[(0,a.jsxs)(ie.A,{className:"mb-2",children:[(0,a.jsx)(ie.A.Label,{required:!0,children:"Commit message"}),(0,a.jsx)(eN.A,{block:!0,name:"commit_message",onChange:e=>f({type:ir,payload:e.target.value}),value:m.commitMessage})]}),(0,a.jsxs)(ie.A,{children:[(0,a.jsx)(ie.A.Label,{children:"Extended description"}),(0,a.jsx)(it.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>f({type:ia,payload:e.target.value}),value:m.extendedDescription})]})]})}try{ii.displayName||(ii.displayName="DialogFooter")}catch{}try{is.displayName||(is.displayName="ApplySuggestionDialog")}catch{}function io({reason:e,className:t="m-2"}){return(0,a.jsx)("div",{className:t,children:(0,a.jsx)("small",{className:"fgColor-muted",children:e})})}try{io.displayName||(io.displayName="CodeSuggestionUnavailable")}catch{}function ic({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let i=(0,d.useRef)(null),r=(0,d.useCallback)(()=>{t(i)},[t]),l=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:s}=(0,nD.s)();return(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,a.jsx)(H.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)(U.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),s("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,a.jsx)(U.Q,{ref:i,size:"medium",count:l,variant:"primary",onClick:r,children:`Apply suggestion${l>1?"s":""}`})]})]})}try{ic.displayName||(ic.displayName="CommitOrRemoveFromBatch")}catch{}function id({commentingImplementation:e,suggestedChange:t}){let n,{setIsDialogOpen:i}=(0,d.useContext)(nf),[r,l]=(0,d.useState)(!1),s=(0,d.useRef)(void 0),{pendingSuggestedChangesBatch:o,submitSuggestedChanges:c}=e,u=o.some(e=>{var n,i;let r,a;return n=e,i=t,n.commentId===i.commentId&&n.path===i.path&&n.suggestion.length===i.suggestion.length&&(r=n.suggestion,a=i.suggestion,r.length===a.length&&!r.some((e,t)=>e!==a[t]))}),m=0===o.length,{isValid:f,reason:h}=(n={isValid:!1,reason:"Unable to commit due to other pending changes affecting this line."},o.length>=50?{isValid:!1,reason:"Unable to commit due to too many changes in the batch."}:o.find(e=>e.threadId===t.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(t,o)?n:{isValid:!0}),p=(0,d.useMemo)(()=>u?o:[t],[u,o,t]),g=(0,d.useCallback)(e=>{l(e),i?.(e)},[i]),x=(0,d.useCallback)(()=>{if(g(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[g]),y=(0,d.useCallback)(e=>{g(!0),s.current=e},[g,s]),b=(0,d.useCallback)((e,t,n)=>{c({suggestedChanges:p,commitMessage:e,onCompleted:()=>{x(),n()},onError:t})},[x,c,p]);return(0,a.jsxs)("div",{className:"border-top p-2",children:[u&&(0,a.jsx)(ic,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&!f&&h&&(0,a.jsx)(io,{reason:h,className:"m-0"}),!u&&m&&(0,a.jsx)(n6,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&f&&!m&&(0,a.jsx)(n5,{commentingImplementation:e,suggestedChange:t}),r&&(0,a.jsx)(is,{authorLogins:p.map(e=>e.authorLogin),batchSize:p.length,onClose:x,onCommit:b})]})}try{id.displayName||(id.displayName="CodeSuggestionActions")}catch{}function iu({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:i,filePath:r,isOutdated:l,isThreadResolved:s,subject:o,suggestedChangesConfig:c,databaseId:u,viewerData:m}){let f=function(e,t,n,i,r){let[a,l]=(0,d.useState)();return(0,ex.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let l of a){let a=l?.closest("div.js-suggested-changes-blob");if(!a)continue;let s=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(e=>e.textContent),lineRange:r.lineRange,threadId:i})}l(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),a}(n,t,r,u,e),h=o?.state?.toUpperCase();return(0,a.jsx)(a.Fragment,{children:f?.length?f.map(n=>{let{isValid:r,reason:d}=function({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:l,applySuggestedChangesValidationData:s,suggestedChangesConfig:o}){let{lineRange:c}=s;if(t)return{isValid:!1,reason:"This suggestion is outdated and cannot be applied."};if(n)return{isValid:!1,reason:"This suggestion is part of a pending comment and cannot be applied."};if(i)return{isValid:!1,reason:"This suggestion is part of a resolved comment and cannot be applied."};if(r)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is closed."};if(a)return{isValid:!1,reason:"This suggestion cannot be applied because the pull request is queued to merge."};if(!l)return{isValid:!1,reason:"You do not have permission to apply this suggestion."};if(!c)return{isValid:!1,reason:"This suggestion does not have a valid line range."};if(!o)return{isValid:!1,reason:"Unable to determine the validity of this suggestion."};if(!o?.isValidSuggestionRange)return{isValid:!1,reason:"Unable to apply suggestions on deleted lines."};let d=o?.sourceContentFromDiffLines,u=e.suggestion.join(`
`);return 0!==e.suggestion.length&&u===d?{isValid:!1,reason:"This suggestion is invalid because no changes were made to the code."}:{isValid:!0}}({suggestedChange:n,isOutdated:l,isPending:"PENDING"===t.state.toUpperCase(),isResolved:s,pullRequestIsClosed:void 0===h||"CLOSED"===h||"MERGED"===h,pullRequestIsInMergeQueue:!!o?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!r&&d?(0,n4.createPortal)((0,a.jsx)(io,{reason:d}),n.ref):(0,n4.createPortal)((0,a.jsx)(id,{commentingImplementation:i,suggestedChange:n}),n.ref)}):null})}try{iu.displayName||(iu.displayName="SuggestedChangeView")}catch{}function im({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:i,isOutdated:r,isThreadResolved:l,anchorPrefix:s="r",comment:o,commentingImplementation:c,filePath:m,hideActions:f,isFirstComment:h=!1,enterDialogMode:p=ep.l,onRefreshThread:g,onQuoteReply:x=ep.l,subjectId:y,subject:b,threadCommentCount:v,threadId:C,threadPositionNumber:j,threadsConnectionId:w,suggestedChangesConfig:L,applySuggestedChangesValidationData:_,viewerData:E,ghostUser:I=nJ.t.ghostUser,skipReactions:D=!1,originalDiffPathUri:T}){let{addToast:A}=(0,n2.Y6)(),[R,$]=(0,d.useState)(!1),[M,P]=(0,d.useState)(o.isHidden),[U,B]=(0,d.useState)(o.body),[F,H]=(0,d.useState)(!1),[z,V]=(0,d.useState)(""),{persistCommentToStorage:W,removePersistedCommentFromStorage:G}=nz({subjectId:y,filePath:m,fileLevelComment:"FILE"===o.subjectType,threadId:o.id,handlePersistedCommentExists:({text:e})=>{e&&B(e)}}),{blockUserFromOrg:q,unblockUserFromOrg:K,editComment:X,deleteComment:Q,hideComment:J,unhideComment:Y,reactToComment:Z,lazyFetchReactionGroups:ee}=c,et=!!q,en=!!K,ei=(0,d.useRef)(null),er=(0,d.useRef)(null),[ea,el]=(0,d.useState)(""),{isInDialogMode:es}=nn(),eo=()=>{ei.current?.focus()};(0,d.useEffect)(()=>{if(R){let e=window.setTimeout(eo);return()=>{window.clearTimeout(e)}}},[R]);let ec=(0,n3.S)(),{enableInlineCommentDialogMode:ed,disableInlineCommentDialogMode:eu}=nn(),em=async()=>{eu();let e=!1;try{e=await ec({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{ed()}e&&Q({commentId:o.id,onCompleted:()=>{g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to delete comment"})},threadCommentCount:v,threadId:C,threadsConnectionId:w,filePath:m})},ef=(0,d.useCallback)((e,t,n,i,r,a)=>{q&&q({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a,onCompleted:()=>{t&&P(!0),g?.(C)},onError:()=>{el("Failed to block user")}})},[q,g,C]),eh=(0,d.useCallback)((e,t)=>{K&&K({organizationLogin:e,userLogin:t,onCompleted:()=>{g?.(C)},onError:()=>{el("Failed to unblock user")}})},[g,C,K]),eg=(0,d.useCallback)(()=>{H(!0);let e=nV(U,L?.sourceContentFromDiffLines??"");if(!e.isValid){V(e.errorMessage),H(!1);return}X({text:U,comment:o,onCompleted:()=>{$(!1),H(!1),G(),g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to update comment"})}})},[A,U,o,X,g,G,L,C]),ex=o.databaseId?.toString(),ey=ex?`${s}${ex}`:void 0,eb=ey&&N.fV?new URL(`${N.fV.pathname}#${ey}`,N.fV.origin).toString():"",ev=(0,d.useRef)(null);(0,d.useEffect)(()=>{e&&ex&&ey&&window.location.hash.split("#").pop()===ey&&(nO(ex,s),p?.(!1),ev.current?.focus())},[s,ey,ex,p,e]);let eC={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eN=t>0,ej=t>1,ew=c.suggestedChangesEnabled,eL=R?"editing":M?"hidden":"visible",e_={headingProps:{as:"h3"},avatarUrl:o.author?.avatarUrl??I.avatarUrl,comment:{...o,url:eb,referenceText:o.reference.text??`#${o.reference.number}`},commentRef:ev,deleteComment:em,editComment:()=>{$(!0)},editHistoryComponent:void 0,hideComment:e=>{J({commentDatabaseId:o.databaseId,reason:e,onCompleted:()=>{P(!0),g?.(C)},onError:()=>{H(!1),el("Failed to hide comment")}})},onBlock:et?ef:void 0,onUnblock:en?eh:void 0,onMinimize:P,onSuccessfulBlock:()=>{setTimeout(()=>N.cg?.location.reload(),800)},isMinimized:M,commentAuthorLogin:o.author?.login??I.login,navigate:ep.l,commentSubjectAuthorLogin:o.reference?.author?.login??"",commentSubjectType:c.commentSubjectType,onReplySelect:x,unhideComment:()=>{Y({commentDatabaseId:o.databaseId,onCompleted:()=>{P(!1),g?.(C)},onError:()=>{H(!1),el("Failed to unhide comment")}})},hideActions:f,isReply:eN,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:T,isOutdated:r,commentAuthorSlug:"copilot"===o.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===o.reviewVariantType?nX.S.Bot:void 0};return(0,a.jsxs)(nA.az,{ref:ev,id:e?ey:void 0,tabIndex:n?es?0:-1:0,"data-first-thread-comment":h,"data-marker-navigation-comment-thread-id":C,"data-marker-navigation-comment-id":o.id,...es?{role:"document","aria-roledescription":"comment","aria-label":eN?void 0!==j?`Reply ${t} to Comment ${j}`:`Reply ${t}`:void 0!==j?`Comment ${j}`:"Comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":eC,":focus":eC,scrollMarginTop:e?"120px":0},children:[ej&&(0,a.jsx)(nA.az,{sx:{display:"flex",pl:+!!eN},children:(0,a.jsx)(nA.az,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,a.jsx)(nA.az,{sx:{px:3,pt:2*!ej,pb:0},children:(0,a.jsx)(nX.v,{...e_,commentBody:o.body,threadCommentCount:v,isInDialogMode:es,actions:f?void 0:(0,a.jsx)(nQ.p,{...e_}),isOutdated:r})}),ea&&(0,a.jsxs)(k.A,{variant:"danger",className:"m-3",children:[(0,a.jsx)(u.StopIcon,{className:"mr-2"}),ea]}),(0,a.jsxs)(nA.az,{sx:{display:"flex",pl:+!!eN},children:[eN&&(0,a.jsx)(nA.az,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===eL&&(0,a.jsx)("div",{className:(0,S.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eN?"pl-0":"pl-2"),children:(0,a.jsxs)(nq,{ref:ei,label:"Update comment",value:U,onChange:e=>{W({text:e}),B(e),V(void 0)},onPrimaryAction:eg,subject:c.commentBoxSubject,suggestedChangesConfig:L,markdownErrorMessage:z,children:[(0,a.jsx)(nG.xR,{variant:"default",onClick:()=>{$(!1),G(),B(o.body)},children:"Cancel"}),(0,a.jsx)(nG.xR,{disabled:F||!U.length,variant:"primary",onClick:eg,children:"Update"})]})}),"visible"===eL&&(0,a.jsx)(nA.az,{sx:eN?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:o.bodyHTML&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.vb,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${o.id}`,html:o.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===o.reviewVariantType&&(0,a.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,a.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===o.reviewVariantType&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(nY.Z,{commentUrl:o.url,commentId:o.databaseId?.toString()??""})}),o.reactionGroups&&Z?(0,a.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,a.jsx)(nZ.P,{reactionGroups:o.reactionGroups,onReact:(e,t)=>{Z?.({commentDatabaseId:o.databaseId,threadId:C,reaction:e,viewerHasReacted:t,onCompleted:()=>{g?.(C)},onError:()=>{H(!1),A({type:"error",message:"Failed to react to comment"})}})},canReact:o.viewerCanReact})}):!D&&(0,a.jsx)(nA.az,{sx:{display:"flex",flexDirection:"column",mt:3},children:ee?(0,a.jsx)(d.Suspense,{fallback:(0,a.jsx)(n0.e,{}),children:(0,a.jsx)(n1.ReactionViewerRelayQueryComponent,{id:o.id,subjectLocked:!o.viewerCanReact})}):(0,a.jsx)(n1.ReactionViewerRelay,{reactionGroups:o,subjectId:o.id,canReact:o.viewerCanReact})})]}),ew&&_&&(0,a.jsx)(iu,{comment:o,commentBodyRef:er,commentingImplementation:c,filePath:m,isOutdated:r,isThreadResolved:l,databaseId:o.databaseId,suggestedChangesConfig:L,applySuggestedChangesValidationData:_,subject:b,viewerData:E})]})})]})]})}try{im.displayName||(im.displayName="ReviewThreadComment")}catch{}function ih({subject:e,tabSize:t,hideHeaderDetails:n,className:i,diffTableClassName:r}){if(!e?.diffLines||e?.diffLines.length<1)return null;let l=(0,eH.c7)(e.diffLines);return(0,a.jsxs)("div",{className:(0,S.$)("StaticUnifiedDiffPreview-module__StaticDiffPreview--R_cuY",i),children:[!n&&(0,a.jsx)("div",{className:"StaticUnifiedDiffPreview-module__HeaderContainer--l3mJd",children:(0,a.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,y.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,a.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,a.jsx)(y.l4,{lineWidth:l,lines:e.diffLines,tabSize:t,className:r})]})}try{ih.displayName||(ih.displayName="StaticUnifiedDiffPreview")}catch{}function ip({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:i,commentsConnectionId:r,filePath:l,hideDiffPreview:s,isInlineComment:o,onRefreshThread:c,enterDialogMode:u,repositoryId:m,subject:f,subjectId:h,tabSize:p,thread:g,threadPositionNumber:x,threadsConnectionId:y,shouldLimitHeight:b=!0,suggestedChangesConfig:v,viewerData:C,ghostUser:j}){let[w,L]=(0,d.useState)(!1),[_,S]=(0,d.useState)(void 0),{sendAnalyticsEvent:k}=(0,nD.s)(),{addThreadReply:E}=i,I=(0,d.useRef)(null),D=e=>{S(e),L(!0)};if(null===g.commentsData.comments||g.commentsData.comments.length<1)return null;let T=function(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}(g),A="LINE"===g.subjectType?{lineRange:T}:void 0;return(0,a.jsx)("div",{"data-testid":"review-thread",children:(0,a.jsxs)(nA.az,{sx:b?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!s&&g.isOutdated&&(0,a.jsx)(ih,{subject:g.subject,tabSize:p??4}),g.commentsData.comments.map((e,t)=>(0,a.jsx)(im,{enterDialogMode:u,isAnchorable:!0,index:t,threadPositionNumber:x,isFirstComment:0===t,isInlineComment:o,isLastChild:t===g.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:g.commentsData.__id,commentingImplementation:i,filePath:l,isOutdated:g.isOutdated,repositoryId:m,subject:f,subjectId:h,threadId:g.id,onRefreshThread:c,onQuoteReply:D,threadCommentCount:g.commentsData.comments.length,threadsConnectionId:y,isThreadResolved:!!g.isResolved,suggestedChangesConfig:v,applySuggestedChangesValidationData:A,viewerData:C,ghostUser:j},e.id)),g.reviewCommentsLimitExceeded&&(0,a.jsx)(eA.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(g.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),g.viewerCanReply&&(0,a.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[w&&(0,a.jsx)(nK,{batchingEnabled:e,batchPending:t,commentBoxSubject:i.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:l,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{L(!1),k("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),N.cg?.requestAnimationFrame(()=>I.current?.focus())},repositoryId:m,quotedText:_,subjectId:h,threadId:g.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=[];g.commentsData.__id&&a.push(g.commentsData.__id),r&&a.push(r),E({commentsConnectionIds:a,filePath:l,thread:g,text:e,submitBatch:i,onCompleted:e=>{e&&nO(e.toString()),t?.(),c?.(g.id)},onError:n,threadsConnectionId:y}),k("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:v}),!w&&(0,a.jsx)(nM.z,{ref:I,onClick:()=>{k("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),L(!0)},children:"Write a reply"})]})]})})}try{ip.displayName||(ip.displayName="ReviewThread")}catch{}function ig({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})}function ix({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?ib({thread:e}):iy({thread:e}):null}function iy({thread:e}){let t="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:n$,children:["Comment on line"," ",(0,a.jsxs)(ig,{children:[t,e.line]})]})}function ib({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:n$,children:["Comment on lines"," ",(0,a.jsxs)(ig,{children:[t,e.startLine]})," ","to"," ",(0,a.jsxs)(ig,{children:[n,e.line]})]})}function iv({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:i,threadPositionNumber:r,isOutdated:l,threads:s,threadsConnectionId:c,isFirstThread:m,enterDialogMode:f,ghostUser:h,manuallyUpdateCommentsWithThisThreadId:p,suggestedChangesConfig:g,...x}){let[y,b]=(0,d.useState)(void 0),{fetchThread:v,shouldRefetchThread:C}=e,N=(0,d.useRef)(null),j=(0,nI.A)("localStorage"),w=y?.isResolved,[L,_]=(0,d.useState)(""),[E,I]=(0,d.useState)(w??!1);(0,d.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${i}`);null!==e?I(JSON.parse(e)):w&&I(!0)},[w,i]);let D=(0,d.useCallback)(async(e,t=!0)=>{b(await v(e,t))},[v]);(0,d.useEffect)(()=>{D(i,!1)},[D,p,i]),ny({commentSubjectType:e.commentSubjectType,markerRef:N,isThread:!0,thread:y}),(0,d.useEffect)(()=>{y||D(i,!1)},[i,y,v,D]);let T=(0,d.useMemo)(()=>{if(t&&y&&y.subject?.startDiffSide&&y.subject?.endDiffSide&&y.subject?.startLine&&y.subject?.endLine&&g?.configureSuggestedChangesFromLineRange){let e=y.subject?.startLine??y?.subject?.endLine,n=y.subject?.startDiffSide??y?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:y?.subject?.endLine,endOrientation:y.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return g?.configureSuggestedChangesFromLineRange(i)}},[t,y,g]);(0,d.useEffect)(()=>{y&&C?.(y)&&D(i,!0)},[D,C,y,i,s]);let{sendAnalyticsEvent:A}=(0,nD.s)(),{resolveThread:R,unresolveThread:$,resolvingEnabled:M}=e,O=s.find(e=>e.id===i);if(!y||!(y.commentsData.comments.length>0))return null;let P=!!y.isResolved,U=O?.commentsConnectionId,B=M&&y.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,a.jsx)(o.t,{fallback:(0,a.jsx)(nR,{}),children:(0,a.jsxs)("div",{className:"rounded-2 bgColor-default",ref:N,children:[(0,a.jsxs)("div",{className:(0,S.$)("px-1","InlineReviewThread-module__ReviewThreadContainer--m84Gi"),children:[(0,a.jsx)(nA.K0,{"aria-label":E?"Expand comment":"Collapse comment",icon:E?u.ChevronRightIcon:u.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{j.setItem(`reviewThreadIsCollapsed_${i}`,JSON.stringify(!E))}),I(e=>!e)},"data-is-first-collapse-button":m}),(0,a.jsx)(ix,{thread:O}),(0,a.jsxs)("div",{className:"InlineReviewThread-module__ResolvableContainer--yhxaM",children:[P&&(0,a.jsx)(H.A,{variant:"secondary",children:"Resolved"}),B&&(0,a.jsx)(nT.m,{text:P?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,a.jsx)(nA.K0,{"aria-labelledby":"resolve-conversation",icon:P?u.CheckCircleFillIcon:u.CheckCircleIcon,sx:{color:P?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:P?()=>{y&&($({threadId:y.id,onCompleted:()=>{C||D(y.id),I(!1),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{_("Failed to unresolve thread")}}),A("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{y&&(R({threadId:y.id,onCompleted:()=>{C||D(y.id),I(!0),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{_("Failed to resolve thread")}}),A("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,a.jsxs)(d.Suspense,{fallback:(0,a.jsxs)("div",{className:"InlineReviewThread-module__ThreadLoading--E5i0R",children:[(0,a.jsx)(tb.A,{}),(0,a.jsx)("p",{children:"Loading comments"})]}),children:[L&&(0,a.jsxs)(k.A,{variant:"danger",className:"m-2",children:[(0,a.jsx)(u.StopIcon,{className:"mr-2"}),L]}),!E&&(0,a.jsx)(ip,{enterDialogMode:f,commentingImplementation:e,commentsConnectionId:U,filePath:n,isInlineComment:!0,onRefreshThread:D,thread:y,threadPositionNumber:r,threadsConnectionId:c,suggestedChangesConfig:T,shouldLimitHeight:!1,...x,ghostUser:h})]})]})})}try{ig.displayName||(ig.displayName="Emphasis")}catch{}try{ix.displayName||(ix.displayName="ThreadBanner")}catch{}try{iy.displayName||(iy.displayName="SingleLineThreadBanner")}catch{}try{ib.displayName||(ib.displayName="MultineLineThreadBanner")}catch{}try{iv.displayName||(iv.displayName="InlineReviewThread")}catch{}let iC={[e2]:0,[e4]:1,[e3]:2};function iN(e){return(0,a.jsx)(nh,{children:(0,a.jsx)(ij,{...e})})}function ij({annotations:e,children:t,commentingImplementation:n,conversationListThreads:i,inlineMarkersRef:r,isMarkerListOpen:l,isRowSelected:s,fileAnchor:o,filePath:c,gutterSizeOffset:m,lineType:f,onAnnotationSelected:h,onCloseConversationList:p,onCloseFocusMode:g,onThreadSelected:x,returnFocusRef:y,selectedAnnotationId:b,selectedThreadId:v,threadsConnectionId:C,suggestedChangesConfig:N,manuallyUpdateCommentsWithThisThreadId:j,ghostUser:w,enterDialogMode:L,..._}){let[k,E]=(0,d.useState)({}),I=(0,d.useCallback)(async e=>{let t=await n.fetchThread(e,!1);t&&i.push(t),E({})},[n,i]);(0,d.useEffect)(()=>{0===i.length&&j&&""!==j&&I(j)},[n,i.length,I,j]);let{isInDialogMode:D,enableInlineCommentDialogMode:T}=nn(),A=(0,d.useRef)(null),R=(0,d.useMemo)(()=>[...e].sort((e,t)=>iC[e.annotationLevel]-iC[t.annotationLevel]),[e]),$=(0,d.useMemo)(()=>t?[...i,{id:"new-comment"},...R]:[...i,...R],[t,i,R]);return!function({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous",selectedMarkerId:r}){let a=(0,d.useRef)(void 0),l=(0,d.useRef)(void 0);(0,d.useEffect)(()=>{l.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||r||void 0),a.current=l.current},[t,r]);let s=(0,d.useCallback)((e,t,n)=>{let i=n.key,r=!t?.hasAttribute("data-marker-id")&&!t?.hasAttribute("data-marker-navigation-comment-id");switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t?.closest("[data-marker-navigation-comment-id]")||t?.closest("[data-marker-id]")||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(l.current&&t?.hasAttribute("data-marker-id")){let e=l.current.moveToNextMarker(i,t);if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(l.current&&t?.hasAttribute("data-marker-navigation-comment-id")){let e=l.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(t?.hasAttribute("data-marker-navigation-comment-id"))return t;if(t?.hasAttribute("data-marker-id"))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(t?.hasAttribute("data-marker-id"))return t;if(t?.hasAttribute("data-marker-navigation-comment-id"))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[l]);(0,t_.G)({containerRef:e,bindKeys:np,getNextFocusable:s,focusableElementFilter:e=>e.hasAttribute("data-marker-id")||e.hasAttribute("data-marker-navigation-comment-id"),focusInStrategy:i,disabled:n},[s,n])}({containerRef:A,markers:$,disabled:!D,selectedMarkerId:v}),(0,a.jsxs)("div",{className:(0,S.$)("d-flex pt-1",D?"InlineMarkers-module__markersDialogActive--NvAFu":""),style:D?{marginRight:`-${m}`,backgroundColor:tc(f,!0,s)}:{marginRight:`-${m}`},onFocus:()=>{D||T()},"data-inline-markers":!0,ref:r,children:[(0,a.jsxs)("div",{className:"InlineMarkers-module__markersWrapper--PUwBK",ref:A,children:[i.map((e,t)=>(0,a.jsx)("div",{className:(0,S.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===$.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:D?0:-1,children:(0,a.jsx)(iv,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:j,enterDialogMode:L,isFirstThread:0===t,commentingImplementation:n,filePath:c,fileAnchor:o,threadId:e.id,isOutdated:e.isOutdated,threads:i,threadsConnectionId:C,onThreadSelected:x,suggestedChangesConfig:N,ghostUser:w,..._})},`review-thread-${e.id}`)),t,R.map((e,t)=>{let i=0===t&&e===$[0];return(0,a.jsx)(nE,{annotation:e,commentingImplementation:n,isFirstMarker:i},`annotation-${e.id}`)})]}),D&&(0,a.jsx)(F.K,{icon:u.UndoIcon,className:(0,S.$)("InlineMarkers-module__closeMarkersDialogButton--kjk9B","ml-2 position-relative",0===i.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:g,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&g()}})]})}try{iN.displayName||(iN.displayName="InlineMarkers")}catch{}try{ij.displayName||(ij.displayName="InlineMarkersInternal")}catch{}var iw=n(31604),iL=n(81960);function i_({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:i,onAddComment:r,onClose:l,viewerData:s,threadsConnectionId:o,showOnCloseIcon:c=!0,...d}){return(0,a.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,a.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,a.jsxs)(iL.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,a.jsx)(nb.r,{alt:s.login,size:24,src:s.avatarUrl||"",className:"mr-2"}),(0,a.jsx)("span",{children:e??"Add a comment"})]}),l&&c&&(0,a.jsx)(F.K,{variant:"invisible",icon:u.XIcon,onClick:l,"aria-label":"Cancel"})]}),(0,a.jsx)(nK,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:i,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:a})=>{r({text:e,onError:i,onCompleted:(e,n)=>{n&&nO(n.toString()),t?.(e,n)},submitBatch:a,filePath:n,threadsConnectionId:o})},onCancelComment:l,side:t?"LEFT":"RIGHT",...d})]})}try{i_.displayName||(i_.displayName="StartThreadComment")}catch{}function iS({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:r,onCloseCommentDialog:l,suggestedChangesConfig:s,...o}){let{sendAnalyticsEvent:c}=(0,nD.s)(),{isInDialogMode:u}=nn(),m=(0,d.useMemo)(()=>{if(n&&s?.configureSuggestedChangesFromLineRange)return s.configureSuggestedChangesFromLineRange(s?.selectedDiffRowRange,s?.shouldStartNewConversationWithSuggestedChange)},[n,s]);return n?i?(0,a.jsx)(iw.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:r,style:{borderRadius:"8px"},"aria-label":"Add a comment",onClickOutside:ep.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:l,children:(0,a.jsx)(i_,{onClose:()=>{l(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...o})}):(0,a.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:u?0:-1,children:(0,a.jsx)(i_,{onClose:()=>{l(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:m,...o})}):null}try{iS.displayName||(iS.displayName="StartConversation")}catch{}function ik({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=tm(),{fileAnchor:r}=tw(),[a,l]=(0,d.useState)(t),{annotations:s,openDialog:o,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:f,selectThreadId:h,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,threads:y,anyMenuOpen:b}=no(),{sendAnalyticsEvent:v}=(0,nD.s)(),C=(0,d.useMemo)(()=>g?.cellId===e,[e,g]),N=(0,d.useMemo)(()=>g?.withSuggestedChange,[g]),j=(0,d.useCallback)(t=>{n?.(),o("new-conversation",e,t)},[e,n,o]),w=(0,d.useCallback)(()=>{j()},[j]),L=(0,d.useCallback)(()=>{j({withSuggestedChange:!0}),v("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[j,v]),_=(0,d.useCallback)(()=>{c("new-conversation")},[c]),S=(0,d.useMemo)(()=>p===e,[e,p]),k=(0,d.useCallback)(()=>{o("context-menu",e)},[e,o]),E=(0,d.useCallback)(()=>{l(t),k()},[t,k]),I=(0,d.useCallback)(()=>{c("context-menu")},[c]),D=(0,d.useCallback)(()=>{S?I():k()},[I,S,k]),T=(0,d.useCallback)(()=>{l(t),D()},[t,D]),A=(0,d.useMemo)(()=>x===e?f:void 0,[e,x,f]),R=(0,d.useMemo)(()=>x===e?u:void 0,[e,x,u]),$=(0,d.useCallback)(()=>{n?.()},[n]),M=(0,eZ.K)((e,t={skipLineSelection:!1})=>{if(h(e),$(),t.skipLineSelection)return;let n=y.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:r,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}});return{isNewConversationDialogOpen:C,startNewConversation:w,closeNewConversation:_,startNewConversationWithSuggestedChange:L,shouldStartNewConversationWithSuggestedChange:N,isContextMenuOpen:S,openContextMenu:k,openContextMenuFromActionBar:E,closeContextMenu:I,toggleContextMenu:D,toggleContextMenuFromActionBar:T,optimizedSelectedThreadId:A,optimizedSelectedAnnotationId:R,selectThread:M,selectAnnotation:(0,eZ.K)((e,t={skipLineSelection:!1})=>{if(m(e),$(),t.skipLineSelection)return;let n=s.find(t=>t.id===e);n&&i({diffAnchor:r,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),openMarkersDialog:$,closeMarkerListDialog:(0,d.useCallback)(()=>{c("marker-list")},[c]),annotations:s,returnFocusRef:a,threads:y,anyMenuOpen:b}}function iE({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=no(),[r,a]=(0,d.useState)(!1),l=(0,d.useCallback)(()=>{t()},[t]),s=(0,d.useCallback)(t=>{i||e.current&&e.current.contains(t.relatedTarget)||n()},[i,e,n]),o=(0,d.useCallback)(()=>{t()},[t]),c=(0,d.useCallback)(()=>{i||e.current===document.activeElement||e.current?.contains(document.activeElement)||n()},[i,e,n]),u=(0,d.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1))))},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:s,handleCellFocus:l,handleCellMouseEnter:o,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,d.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,d.useCallback)(e=>{!i&&t8(e.key)&&e.stopPropagation()},[i])}}function iI({fileAnchor:e}){let{isSplit:t,isLeftSide:n,diffLine:i}=tw(),{selectedDiffRowRange:r}=tm(),{getDiffSingleLineCode:a,getUnifiedDiffMultiLineCode:l,getSplitDiffMultiLineCode:s}=function(e,t){let{selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=tm();return{getUnifiedDiffMultiLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:r,endOrientation:a,startLineNumber:l,endLineNumber:s}=t,o=0,c=0;return n.length>1&&(o=n.findIndex(e=>"left"===r?e.left===l:e.right===l),c=n.findIndex(e=>"left"===a?e.left===s:e.right===s)),to(n.slice(o,c+1))},getDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let r=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return r?to([r]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?to(n.leftLines):to(n.rightLines)}}(e,r);return(0,d.useCallback)(async()=>{let e=window.getSelection();e&&""!==e.toString()?document.execCommand("copy"):void 0===r||r?.startOrientation===r?.endOrientation&&r?.startLineNumber===r?.endLineNumber?await (0,nd.D)(a(n?"left":"right",n?i?.left:i?.right)):t?await (0,nd.D)(s(n?"left":"right")):await (0,nd.D)(l())},[r,t,l,a,n,i?.left,i?.right,s])}function iD(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}var iT=n(21513);let iA="ActionBar-module__actionBarHeight--rjbc7";var iR=n(72538);let i$={compact:{avatarSize:18},relaxed:{avatarSize:20}};function iM({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=tw(),{ghostUser:i}=eJ();(0,d.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:r}=i$[t],l=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===l)return null;let s={},o=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&o.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?s[e?.author.login]=e.author:i?.login&&(s[i.login]=i)}));let c=[...o.sort((e,t)=>(n_[e.level]?.priority||0)<(n_[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,a.jsx)(nL,{annotationLevel:t.level},t.id):(0,a.jsx)(nj,{annotationLevel:t.level},t.id)),...Object.keys(s).map(e=>{let t=s[e]?.login,n=s[e]?.avatarUrl??(i?.avatarUrl||" ");return(0,a.jsx)(nb.r,{alt:t,size:20,src:n},t)})].slice(0,3),u=l>9?"9+":`${l}`;return(0,a.jsxs)("div",{className:(0,S.$)("d-flex","flex-justify-between","flex-items-center","CommentIndicator-module__commentIndicatorContainer--js8be"),children:[(0,a.jsx)(iR.A,{disableExpand:!0,size:r,className:(0,S.$)("CommentIndicator-module__AvatarStack--jEc1l","relaxed"===t?"CommentIndicator-module__Relaxed--BloMn":"CommentIndicator-module__Compact--ZE18o"),children:c}),(0,a.jsx)("span",{className:(0,S.$)("fgColor-default","ml-1","CommentIndicator-module__textStyles--F0_Xp"),children:u})]})}try{iM.displayName||(iM.displayName="CommentIndicator")}catch{}var iO=n(89141),iP=n(29255);function iU(){let{nextHunk:e,currentHunk:t,previousHunk:n}=tw(),{addInjectedContextLines:i}=eJ(),r=!!t&&0!==t.startBlobLineNumber,a=!!t&&!!e;return{expandStartOfHunk:()=>{r&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{a&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:a,canExpandStartOfHunk:r}}let iB={left:"L",right:"R"},iF="Add comment",iH="Suggest change";function iz(e,t,n){let i=n&&!te(t)?iB.left:iB.right;return`${e} on line ${i}${t.blobLineNumber}`}function iV({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,i,r,{selectedDiffRowRange:l,selectedDiffLines:s,replaceSelectedDiffRowRange:o}=tm(),{commentingEnabled:c}=eJ(),{diffLine:m,isLeftSide:f,isSplit:h,diffContext:p}=tw(),g=(0,d.useMemo)(()=>s.leftLines[0],[s.leftLines]),x=(0,d.useMemo)(()=>s.leftLines[s.leftLines.length-1],[s.leftLines]),y=(0,d.useMemo)(()=>s.leftLines.every(e=>!e9(e)&&"DELETION"!==e.type),[s.leftLines]),b=(0,d.useMemo)(()=>s.rightLines[0],[s.rightLines]),v=(0,d.useMemo)(()=>s.rightLines[s.rightLines.length-1],[s.rightLines]),C=(0,d.useMemo)(()=>0===s.rightLines.length,[s.rightLines]),N=(0,d.useMemo)(()=>0===s.leftLines.length,[s.leftLines]),j=(0,d.useMemo)(()=>!(s.leftLines.find(e=>!e9(e)&&!te(e)&&"INJECTED_CONTEXT"!==e.type)||s.rightLines.find(e=>!e9(e)&&!te(e)&&"INJECTED_CONTEXT"!==e.type)),[s.leftLines,s.rightLines]),w=(0,d.useCallback)((n,i)=>{!l||!x||!g||e9(x)||e9(g)||!g.left||!x.left||(o({diffAnchor:l.diffAnchor,endLineNumber:x.left,endOrientation:"left",startLineNumber:g.left,startOrientation:"left",firstSelectedLineNumber:g.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[l,x,g,o,e,t]),L=(0,d.useCallback)((n,i)=>{!l||!v||!b||e9(v)||e9(b)||!b.right||!v.right||(o({diffAnchor:l.diffAnchor,endLineNumber:v.right,endOrientation:"right",startLineNumber:b.right,startOrientation:"right",firstSelectedLineNumber:b.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[l,v,b,o,e,t]),_="DELETION"!==m.type&&("pr"===p||void 0===p),S=(0,d.useMemo)(()=>!!l&&(l.startOrientation!==l.endOrientation||l.startLineNumber!==l.endLineNumber),[l]);if(!c)return null;let k=!1,E=!1;if(l&&S){let s=iB[l.startOrientation],o=iB[l.endOrientation];return r=` on lines ${s}${l.startLineNumber}-${o}${l.endLineNumber}`,!e9(g)&&!e9(x)&&g&&x&&(k=!0,n=g.left===x.left?C?` on line L${g.left}`:`, original line L${g.left}`:C?` on lines L${g.left}-L${x.right}`:`, original lines L${g.left}-L${x.left}`),!e9(b)&&!e9(v)&&b&&v&&(E=!0,i=b.right===v.right?N||h&&j?` on line R${b.right}`:`, modified line R${v.right}`:N||h&&j?` on lines R${b.right}-R${v.right}`:`, modified lines R${b.right}-R${v.right}`),(0,a.jsx)(a.Fragment,{children:h?(0,a.jsx)(a.Fragment,{children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(er.l.Item,{onSelect:L,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iF+i,(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(er.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),iH+i]})]}):(0,a.jsxs)(a.Fragment,{children:[k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(er.l.Item,{onSelect:w,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iF+n,(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:C?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,a.jsxs)(er.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),iH+n]})]}):null,E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(er.l.Item,{onSelect:L,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iF+i,(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(er.l.Item,{onSelect:e=>L(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),iH+i]})]}):null]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(er.l.Item,{onSelect:t,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iF+r]}),_&&y&&(0,a.jsxs)(er.l.Item,{onSelect:e,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),iH+r]})]})})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(er.l.Item,{onSelect:t,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iz(iF,m,f)]}),_&&(0,a.jsxs)(er.l.Item,{onSelect:e,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),iz(iH,m,f)]})]})}try{iV.displayName||(iV.displayName="StartConversationContextMenuItems")}catch{}function iW(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iQ,{...e}),(0,a.jsx)(iK,{fileDiffReference:e.copilotChatReference}),(0,a.jsx)(i1,{handleCopyCode:e.handleCopyCode}),(0,a.jsx)(iX,{}),(0,a.jsx)(iG,{}),(0,a.jsx)(i2,{})]})}function iG(){let{diffLine:e,fileAnchor:t}=tw(),{selectedDiffRowRange:n}=tm(),i=(0,d.useCallback)(()=>{let i=tr({line:e,range:n,fileAnchor:t});i&&(0,nd.D)(i)},[t,e,n]);return(0,a.jsxs)(er.l.Item,{onSelect:i,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.LinkIcon,{})}),"Copy link",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:"Mod+Alt+y"})})]})}function iq(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i3,{}),(0,a.jsx)(iX,{})]})}let iK=e=>{let{selectedDiffRowRange:t}=tm(),{diffLine:n,isLeftSide:i,fileAnchor:r}=tw(),l=((e,t,n,i)=>{let r;if(e)return e;if(!e9(t)){let e=(n?t.left:t.right)??0,a=n?"left":"right";r={startOrientation:a,endOrientation:a,startLineNumber:e,endLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:a,diffAnchor:i}}return r})(t,n,i,r);return e.fileDiffReference?(0,a.jsx)(iO.w,{showDivider:!0,selectedRange:l,fileDiffReference:e.fileDiffReference}):null};function iX(){let{fileAnchor:e}=tw();return(0,a.jsxs)(er.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.MultiSelectIcon,{})}),"Select all",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:"Mod+a"})})]})}function iQ({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:i,startConversationWithSuggestedChange:r}){let{commentingEnabled:l}=eJ(),{annotations:s,threads:o}=no(),c=s.length>0;return l&&(n||o||c)?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(iV,{handleStartConversation:i,handleStartConversationWithSuggestedChange:r}),(0,a.jsx)(iJ,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,a.jsx)(er.l.Divider,{})]}):null}function iJ({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{commentingEnabled:n}=eJ(),{isSplit:i}=tw(),{viewerData:r}=eJ();return n&&r.commentsPreference!==x.sI.Visible?i?(0,a.jsx)(iY,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,a.jsx)(iZ,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null}function iY({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:i,isLeftSide:r}=tw(),{annotations:l}=no(),s=l.length>0;return r?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(i0,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(i||s)&&(0,a.jsx)(i0,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,a.jsxs)(a.Fragment,{children:[(i||s)&&(0,a.jsx)(i0,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,a.jsx)(i0,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})}function iZ({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=eJ(),{diffLine:i}=tw(),{annotations:r}=no();return i&&tL(i.threadsData,n).length>0||r.length>0?(0,a.jsx)(i0,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null}function i0({onSelect:e,text:t}){return(0,a.jsxs)(er.l.Item,{onSelect:e,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.CommentDiscussionIcon,{})}),t]})}function i1({handleCopyCode:e}){return(0,a.jsxs)(er.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.CopyIcon,{})}),"Copy",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)(iP.U,{keys:"Mod+c"})})]})}function i2(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=iU(),{previousHunk:n,nextHunk:i}=tw();return e||t||n||i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er.l.Divider,{}),(0,a.jsx)(i3,{}),(0,a.jsx)(i4,{})]}):null}function i3(){let{canExpandStartOfHunk:e,expandEndOfHunk:t,expandStartOfHunk:n,canExpandEndOfHunk:i}=iU();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsxs)(er.l.Item,{onSelect:n,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.FoldUpIcon,{})}),"Expand above"]}),i&&(0,a.jsxs)(er.l.Item,{onSelect:t,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.FoldDownIcon,{})}),"Expand below"]})]})}function i4(){let{previousHunk:e,nextHunk:t}=tw(),{fileAnchor:n}=tw();return(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.MoveToBottomIcon,{})}),"Go to next hunk",(0,a.jsx)(er.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.MoveToTopIcon,{})}),"Go to previous hunk",(0,a.jsx)(er.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{iW.displayName||(iW.displayName="CellContextMenu")}catch{}try{iG.displayName||(iG.displayName="CopyAnchorLink")}catch{}try{iq.displayName||(iq.displayName="EmptyCellContextMenu")}catch{}try{iX.displayName||(iX.displayName="SelectAllListItem")}catch{}try{iQ.displayName||(iQ.displayName="MarkerListItems")}catch{}try{iJ.displayName||(iJ.displayName="ViewMarkerListItems")}catch{}try{iY.displayName||(iY.displayName="SplitDiffMarkersListItems")}catch{}try{iZ.displayName||(iZ.displayName="UnifiedDiffMarkerListItem")}catch{}try{i0.displayName||(i0.displayName="MarkerListItem")}catch{}try{i1.displayName||(i1.displayName="CopyContentListItems")}catch{}try{i2.displayName||(i2.displayName="HunkListItems")}catch{}try{i3.displayName||(i3.displayName="ExpandHunksListItems")}catch{}try{i4.displayName||(i4.displayName="JumpToHunkListItems")}catch{}var i5=n(17998);function i8({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:i}){return(0,a.jsx)(i5.k,{altText:`${t}'s avatar image with pending indicator`,icon:u.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,sx:{...i},backgroundClassName:"InProgressCommentIndicator-module__InProgressCommentIndicatorBackground--zV0pN",className:"InProgressCommentIndicator-module__InProgressCommentIndicatorContainer--HrW1B"})}try{i8.displayName||(i8.displayName="InProgressCommentIndicator")}catch{}let i7=(0,d.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:i,showStartConversation:r,hasDraftComment:l,copilotChatReference:s,handleCopyCode:o,onOpenInLineThread:c,shouldDisplayCollapseComments:m,toggleViewingMarkers:f},h){let p=(0,d.useRef)(null),g=(0,d.useRef)(null),{commentingEnabled:y,viewerData:{lineSpacingPreference:b,commentsPreference:v}}=eJ(),{diffLine:C}=tw(),N=(0,d.useRef)(null),j=p.current?p:g;(0,iT.T)(h,j);let w=C.threadsData?.totalCommentsCount||0,L=C.annotationsData?.totalCount||0,{isActionBarFocused:_,handleActionBarBlur:k,handleActionBarFocusCapture:E,handleActionBarKeydownCapture:I}=iE({cellRef:i}),{annotations:D,isContextMenuOpen:T,startNewConversation:A,startNewConversationWithSuggestedChange:R,anyMenuOpen:$,threads:M,toggleContextMenu:O,toggleContextMenuFromActionBar:P}=ik({cellId:n,actionBarRef:N,onOpenInLineThread:c}),B=y&&w+L>0&&v===x.sI.Collapsed,F=y&&r,H={onBlur:k,onFocusCapture:E,onKeyDownCapture:I};return(0,a.jsxs)(a.Fragment,{children:[F&&(0,a.jsx)("div",{"aria-hidden":!_,className:(0,S.$)("d-flex","flex-row","ActionBar-module__left-action-bar--B2Plj"),children:(0,a.jsx)(a.Fragment,{children:l?(0,a.jsx)(U.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,S.$)("py-0","compact"===b?"ActionBar-module__left-action-bar-draft-compact--ru7MJ":"ActionBar-module__left-action-bar-draft-relaxed--nHQ2x",iA),onClick:A,...H,children:(0,a.jsx)(i8,{lineSpacingPreference:b,authorAvatarUrl:e,authorLogin:t})}):(0,a.jsx)(U.Q,{icon:u.PlusIcon,"aria-label":"Add comment",ref:g,size:"small",className:(0,S.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0","ActionBar-module__left-action-bar-new--Emc9g","ActionBar-module__addCommentButtonNew--EgyyF",iA,"ActionBar-module__actionBarStartCommentWidth--f77cS"),onClick:A,...H})})}),(0,a.jsx)("div",{"aria-hidden":!_,className:(0,S.$)("d-flex","flex-row","ActionBar-module__action-bar-position--INpbt"),children:(0,a.jsxs)(n8.A,{className:"ActionBar-module__action-bar-button-group--mW855",...H,children:[B&&(0,a.jsx)(U.Q,{ref:p,"aria-expanded":$,"aria-label":"View comments",size:"small",className:(0,S.$)("py-0","px-1",iA),onClick:e=>{(1===M.length||1===D.length)&&e.preventDefault(),f?.()},children:(0,a.jsx)(iM,{lineSpacingPreference:b})}),(0,a.jsxs)(nm.W,{anchorRef:N,open:T,onOpenChange:O,children:[(0,a.jsx)(nm.W.Anchor,{children:(0,a.jsx)(U.Q,{ref:N,"aria-haspopup":"true","aria-label":"More actions",icon:u.TriangleDownIcon,size:"small",className:(0,S.$)("fgColor-muted","ActionBar-module__actionBarArrowSizing--Fp2kh"),onClick:P})}),(0,a.jsx)(nm.W.Overlay,{width:"medium",children:(0,a.jsx)(er.l,{children:(0,a.jsx)(iW,{shouldDisplayCollapseComments:m,copilotChatReference:s,showStartConversation:r,handleCopyCode:o,handleViewMarkersSelection:f,startConversationCurrentLine:A,startConversationWithSuggestedChange:R})})})]})]})})]})});i7.displayName="ActionBar";let i6="DiffHighlightedOverlay-module__visibilityHidden--OT0yL",i9="DiffHighlightedOverlay-module__userSelectNone--ubGdL";function re({searchResults:e,focusedSearchResult:t,className:n,styleObject:i}){let r=0,l=e[0]?.text??"",s=e[0]?.diffLineNumIndex??-1,o=`overlay-${s}-${l}`;return(0,a.jsxs)("span",{className:(0,S.$)(n,"position-absolute",i9,!e[0].isHunk&&"DiffHighlightedOverlay-module__nonHunkStyles--JFK7K"),style:{...i},children:[e.map(e=>{var n,i;let s=e.indexWithinPathDigest===t,o=(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:(0,S.$)(i6,i9),children:l.substring(r,e.column)}),(0,a.jsx)("span",{className:(0,S.$)(i9,s&&"DiffHighlightedOverlay-module__focusedResultStyles--JG6X3",!s&&"DiffHighlightedOverlay-module__nonFocusedResultStyles--JUCld"),children:(0,a.jsx)("span",{className:(0,S.$)(!s&&i6),id:(n=e.indexWithinPathDigest,i=e.pathDigest,`match-${i}-${n}`),children:l.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return r=e.columnEnd,o}),(0,a.jsx)("span",{className:(0,S.$)(i6,i9),children:l.substring(r)})]},o)}try{re.displayName||(re.displayName="DiffHighlightedOverlay")}catch{}function rt({diffLine:e}){let t=function(e){let t=(e.annotationsData?.annotations??[]).length>0,n=(e.threadsData?.threads??[]).length>0;switch(!0){case t&&n:return"Code has comments and alerts. Press enter to view.";case n:return"Code has comments. Press enter to view.";case t:return"Code has alerts. Press enter to view.";default:return""}}(e);return t?(0,a.jsx)("span",{className:"sr-only user-select-none",children:t}):null}try{rt.displayName||(rt.displayName="DiffLineScreenReaderSummary")}catch{}let rn=["CONTEXT","INJECTED_CONTEXT"];function ri(e){let{rowId:t}=tw();if(t)return e6(t,e)}let rr=(0,d.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:i,handleDiffCellClick:r,handleDiffCellMouseDown:l,handleExitDialogMode:s,handleHideMarkersFromFocus:o,handleDiffSideCellSelectionBlocking:c,handleStartConversation:u,handleUserClosedMarkersDialog:m,lineAnchor:f,firstLineNumberSelection:h,commentDialogOpen:p,enterDialogMode:g,hasThreads:x,...y},b){let{diffLine:v,fileAnchor:C,isRowSelected:j,isLeftSide:w}=tw(),L=(0,d.useRef)(null);(0,d.useImperativeHandle)(b,()=>L.current,[]);let[_,S]=(0,d.useState)(!1),{selectedDiffRowRange:k}=tm(),{disableInlineCommentDialogMode:E,isInDialogMode:I}=nn(),D=(0,d.useRef)(null),T=(0,nu.U)(e=>{if(!e.target)return;let t=e.target;if(!_||D.current?.contains(t)||L.current?.contains(t)||2!==e.button?L.current?.contains(t)&&e.target.closest("button")?.contains(t)&&S(!1):S(!1),I){let t=!e.target.closest("[data-inline-markers]"),n=!e.target.closest("#__primerPortalRoot__");t&&n&&E()}});(0,d.useEffect)(()=>(N.XC?.addEventListener("mousedown",T),()=>N.XC?.removeEventListener("mousedown",T)),[T]),(0,d.useEffect)(()=>()=>N.XC?.removeEventListener("mousedown",T),[]);let A=(0,d.useCallback)(()=>{let e=tr({line:v,range:k,fileAnchor:C});e&&(0,nd.D)(e)},[C,v,k]),R=(0,d.useCallback)(()=>{h?.current&&(h.current=null)},[h]),$=(0,d.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?l?.():h&&(h.current=null),h&&n&&(h.current=w?v.left:v.right),c?.(e)},[c]),M=(0,d.useCallback)(()=>{L.current?.focus(),E(),s?.(),m?.()},[E,s,m]),O=iI({fileAnchor:C}),P=(0,d.useCallback)(async e=>{if(e.target===L.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault(),await O();return}if(e.target===L.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void A();if(L.current?.contains(e.target)&&e?.key==="Escape")return void M();if(L.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),L.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(L.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),L.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===L.current&&"Enter"===e.key&&(g?.(),!1===x&&u?.(),e.preventDefault())},[O,A,M,g,x,u]),U=`inline-dialog-heading-${(0,d.useId)()}`;return(0,a.jsxs)("td",{ref:L,"data-grid-cell-id":ri(i),"data-line-anchor":f,"data-selected":j,role:I?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${i<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:P,onBlur:e=>e.target.ariaSelected="false",onClick:r,onFocus:e=>e.target.ariaSelected="true",onMouseDown:$,onMouseUp:R,"aria-labelledby":I?U:void 0,...y,children:[I&&(0,a.jsx)("h1",{id:U,className:"sr-only",children:"Comment view"}),e,t&&_&&(0,a.jsx)(nm.W,{anchorRef:L,open:!0,onOpenChange:S,children:(0,a.jsx)(nm.W.Overlay,{width:e?"medium":"small",children:(0,a.jsx)(er.l,{children:t})})})]})});function ra(){let{isSplit:e}=tw();return(0,a.jsx)("div",{className:(0,S.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,a.jsx)(u.KebabHorizontalIcon,{})})}let rl=(0,d.forwardRef)(function({searchResultsForLine:e,focusedSearchResult:t,columnIndex:n,lineAnchor:i,firstLineNumberSelection:r,handleDiffCellClick:l,handleDiffSideCellSelectionBlocking:s,filePath:o,copilotChatReference:c},m){let{diffLine:f,fileAnchor:h,isLeftSide:p,isRowSelected:g}=tw(),y=(0,M.u)("react_diff_line_type_character_correction"),[b,v]=tt(f.html,f.type,y),C=v&&["+","-"].includes(v),[N,j]=(0,d.useState)(""),{isActionBarVisible:w}=no(),{selectedDiffRowRange:L,selectedDiffLines:_}=tm(),{commentBatchPending:k,commentingEnabled:E,commentingImplementation:I,initialExpandedThreadId:D,markerNavigationImplementation:T,repositoryId:A,subjectId:R,subject:$,viewerData:P}=eJ(),{hasPersistedComment:U}=nz({diffSide:p?"LEFT":"RIGHT",filePath:o,line:f.blobLineNumber,subjectId:R,fileLevelComment:!1}),{isInDialogMode:B,enableInlineCommentDialogMode:F,disableInlineCommentDialogMode:H}=nn(),z=(0,d.useRef)(null),V=(0,d.useRef)(null);(0,d.useImperativeHandle)(m,()=>V.current,[]);let W=!!f.threadsData?.threads?.length||!!f.annotationsData?.annotations?.length,G=function({hasThreads:e}){return e?"80px":"24px"}({hasThreads:W&&P.commentsPreference===x.sI.Collapsed}),q=function(e,t,n){let{selectedDiffRowRange:i}=tm();return(0,d.useMemo)(()=>{let r="Add a comment on",a=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&a&&n){let e={left:"L",right:"R"},t=e[i.startOrientation],n=e[i.endOrientation];r+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${n}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let n=t&&!te(e)?"L":"R";r+=` line ${n}${e.blobLineNumber}`}return r},[e,t,i,n])}(f,!!p,g),K=ri(n),{handleCellBlur:X,handleCellFocus:Q,handleCellMouseEnter:J,handleCellMouseLeave:Y}=iE({cellRef:V}),Z=(0,d.useRef)(null),[ee,et]=function(e){let[t,n]=(0,d.useReducer)(iD,{userMinimized:e===x.sI.Collapsed,showMarkers:!1}),i=(0,d.useRef)(e);return(0,d.useEffect)(()=>{i.current!==e&&(i.current=e,e===x.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]}(P.commentsPreference),en=(0,d.useCallback)((e=!0)=>{V.current?.classList.contains("diff-text-cell")&&(F(),et("USER_EXPANDED_MARKERS"),e&&setTimeout(()=>{V.current?.querySelector('[data-first-marker="true"]')?.focus()},0))},[et,F]),ei=(0,d.useCallback)(()=>{setTimeout(()=>V.current?.focus()),H(),et("USER_MINIMIZED_MARKERS")},[H,et]),er=(0,d.useCallback)(()=>{P.commentsPreference===x.sI.Collapsed&&ee.showMarkers?ei():en()},[ei,en,ee.showMarkers,P.commentsPreference]),{annotations:ea,isNewConversationDialogOpen:el,shouldStartNewConversationWithSuggestedChange:es,startNewConversation:eo,startNewConversationWithSuggestedChange:ec,selectAnnotation:ed,selectThread:eu,closeNewConversation:em,closeMarkerListDialog:ef,returnFocusRef:eh,optimizedSelectedAnnotationId:ep,optimizedSelectedThreadId:eg,threads:ex}=ik({cellId:K,actionBarRef:z,onOpenInLineThread:en}),ey=(0,d.useMemo)(()=>{var e;return!el&&(e=P.viewerCanComment,E&&e&&((e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!e9(e)&&ts.includes(e.type)):!e9(e)&&ts.includes(e.type)})(f,_))},[el,E,P.viewerCanComment,f,_]);(0,d.useEffect)(()=>{I&&D&&eg!==D&&ex.map(e=>e.id).includes(D)&&eu(D,{skipLineSelection:!0})},[D]),(0,d.useEffect)(()=>{if(!T)return;let{activeGlobalMarkerID:e}=T;if(e){let t=ex.map(e=>e.id),n=ea.map(e=>e.id);t.includes(e)?eu(e,{skipLineSelection:!0}):n.includes(e)&&ed(e,{skipLineSelection:!0})}},[eu,ex,T,ea,ed]);let eb=function(e,t,n){let{sendAnalyticsEvent:i}=(0,nD.s)(),{getDiffLinesFromLineRange:r,selectedDiffRowRange:a}=tm(),l=(0,eZ.K)(function(n,a){if(!e)return;let l=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=r(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:l,showSuggestChangesButton:l,sourceContentFromDiffLines:l?function(e){let n=r(e)?.selectedRightLines;if(e&&n&&n.length>1)return to(n);if(!t)return"";let[i]=tt(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{i("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:a}});return(0,d.useMemo)(()=>({selectedDiffRowRange:a,configureSuggestedChangesFromLineRange:l,shouldStartNewConversationWithSuggestedChange:n}),[a,l,n])}(I?.suggestedChangesEnabled,f,es),ev=(0,d.useCallback)(()=>{en?.(),eo?.()},[en,eo]),eC=(0,d.useCallback)(()=>{B||0!==(V.current?.querySelectorAll(":focus")??[]).length||H()},[H,B]),eN=(0,d.useRef)(!0),{ghostUser:ej}=eJ(),ew=iI({fileAnchor:h}),eL=(0,d.useMemo)(()=>W&&P.commentsPreference===x.sI.Collapsed?!ee.userMinimized:(!!el||!!W)&&!!E&&(P.commentsPreference===x.sI.Collapsed&&(!!el||!!B)||P.commentsPreference===x.sI.Visible&&(!!W||!!el||!!ee.showMarkers)||!1),[E,W,B,el,ee.showMarkers,ee.userMinimized,P.commentsPreference]),e_=(0,d.useMemo)(()=>!!(f.text.length<1&&("CONTEXT"===f.type||"INJECTED_CONTEXT"===f.type)||("DELETION"===f.type||"ADDITION"===f.type)&&1===f.text.length&&["+","-"].includes(f.text.charAt(0))),[f]);return(0,a.jsxs)(rr,{ref:V,columnIndex:n,commentDialogOpen:el,handleDiffCellClick:l,enterDialogMode:en,handleDiffSideCellSelectionBlocking:s,handleExitDialogMode:()=>et("USER_EXITED_MARKERS_DIALOG"),handleUserClosedMarkersDialog:()=>et("USER_MINIMIZED_MARKERS"),lineAnchor:i,firstLineNumberSelection:r,handleStartConversation:ev,hasThreads:W,ContextMenu:(0,a.jsx)(iW,{shouldDisplayCollapseComments:eL,copilotChatReference:c,showStartConversation:ey,handleViewMarkersSelection:er,startConversationCurrentLine:ev,startConversationWithSuggestedChange:ec}),className:(0,S.$)(`diff-text-cell ${p?"left-side-diff-cell":"right-side-diff-cell"} ${e_?"pt-4":""}`,{"border-right":p&&"HUNK"!==f.type}),style:{backgroundColor:tc(f.type,!1,g),paddingRight:G},onBlur:e=>{X(e),eC()},onFocus:Q,onMouseEnter:J,onMouseLeave:Y,children:[(0,a.jsxs)("code",{className:(0,S.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===f.type,deletion:"DELETION"===f.type}),children:[C&&(0,a.jsx)("span",{className:"diff-text-marker",children:v}),e&&e.length>0&&(0,a.jsx)(re,{searchResults:e,focusedSearchResult:t,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===f.type})}),(0,a.jsx)(O.$6,{html:b,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===f.type})})]}),f.displayNoNewLineWarning&&(0,a.jsx)(u.NoEntryIcon,{size:16,className:"fgColor-danger"}),w&&(0,a.jsx)(i7,{shouldDisplayCollapseComments:ee.showMarkers,copilotChatReference:c,authorAvatarUrl:P.avatarUrl,authorLogin:P.login,ref:z,cellId:K,cellRef:V,hasDraftComment:U,showStartConversation:ey,onOpenInLineThread:en,handleCopyCode:ew,toggleViewingMarkers:er}),I&&T&&(0,a.jsx)(a.Fragment,{children:eL?(0,a.jsx)(iN,{gutterSizeOffset:G,inlineMarkersRef:Z,manuallyUpdateCommentsWithThisThreadId:N,annotations:ea,enterDialogMode:en,batchPending:k,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:({onCompleted:e,...t})=>{I&&f&&I.deleteComment({...t,onCompleted:()=>{e?.(),ex.length<=1&&setTimeout(()=>V.current?.focus())},filePath:o})}},conversationListThreads:ex,fileAnchor:h,filePath:o,onCloseFocusMode:ei,isMarkerListOpen:!!V.current?.classList.contains("diff-text-cell")&&ex.length>0,isRowSelected:g,lineType:f.type,repositoryId:A,returnFocusRef:eh,selectedAnnotationId:ep,selectedThreadId:eg||(V.current?.classList.contains("diff-text-cell")&&ex.length>0?ex[0]?.id:null),subjectId:R,subject:$,suggestedChangesConfig:eb,onCloseConversationList:ef,onAnnotationSelected:ed,onThreadSelected:eu,viewerData:P,ghostUser:ej,children:el&&(0,a.jsx)("div",{className:(0,S.$)(" border rounded-2 color-border-default",(ex.length,"mt-2 mb-1")),children:(0,a.jsx)(iS,{isDialog:!1,addCommentDialogTitle:q,anchorRef:V,batchPending:k,batchingEnabled:I.batchingEnabled,commentBoxSubject:I.commentBoxSubject,filePath:o,isLeftSide:!!p,isOpen:el,lineNumber:g?L?.endLineNumber:f.blobLineNumber,repositoryId:A,returnFocusRef:eh,startLineNumber:g?L?.startLineNumber:void 0,subjectId:R,suggestedChangesConfig:eb,viewerData:P,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!I||!f)return;let{leftLines:i,rightLines:r}=_;if(L){var a;let e="left"===L.endOrientation?i:r,n=e[e.length-1];n&&(a=n)&&a!==e5&&n.threadsData?.__id&&(t=n.threadsData?.__id)}I.addThread({...n,diffLine:f,isLeftSide:p,isLineSelected:g,selectedDiffRowRange:L,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eu(t),j(t)}})},onCloseCommentDialog:()=>{ei(),em()}})})}):null}),!w&&P.commentsPreference===x.sI.Collapsed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===P.lineSpacingPreference?"-1px":"-2px"},className:(0,S.$)("position-absolute top-0 d-flex user-select-none","DiffLineTableCellParts-module__in-progress-comment-indicator--DmbGA"),children:U&&(0,a.jsx)(i8,{lineSpacingPreference:P.lineSpacingPreference,authorAvatarUrl:P.avatarUrl,authorLogin:P.login})}),(0,a.jsx)("div",{"aria-hidden":"true",className:(0,S.$)("position-absolute top-0 d-flex user-select-none","DiffLineTableCellParts-module__comment-indicator--EOzeT"),children:(0,a.jsx)(iM,{shouldAnimateRef:eN,lineSpacingPreference:P.lineSpacingPreference})})]}),(0,a.jsx)(rt,{diffLine:f})]})}),rs=(0,d.memo)(rl),ro=(0,d.memo)(rc);function rc({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,filePath:l,copilotChatReference:s,contentRef:o,...c}){let u=(0,d.useRef)(null),{diffLine:m,fileAnchor:f,isLeftSide:h,isRowSelected:p}=tw(),{updateSelectedDiffRowRange:g}=tm(),x=(0,d.useCallback)(()=>{r&&null!==r.current&&g(f,h?m.left:m.right,h?"left":"right",!0,!0)},[f,h,m.left,m.right,r,g]),y=(0,d.useCallback)(()=>{g(f,h?m.left:m.right,h?"left":"right",!1,!0)},[f,h,m.left,m.right,g]);return(0,a.jsx)(rr,{ref:u,className:(0,S.$)("diff-line-number position-relative",rn.includes(m.type)&&"diff-line-number-neutral"),columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,style:{backgroundColor:tc(m.type,!0,p),textAlign:"center"},handleDiffCellMouseDown:y,onMouseEnter:x,...c,children:(0,a.jsx)("code",{children:e})})}function rd({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:i}){let r=(0,d.useRef)(null),[l,s]=function(e){let[t,n]=(0,d.useState)(!1),[i,r]=(0,d.useState)(!1),a=(0,d.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]);return[{onFocus:(0,d.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:(0,d.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]),onFocusCapture:(0,d.useCallback)(e=>{e.stopPropagation(),r(!0)},[]),onKeyDownCapture:(0,d.useCallback)(e=>{t8(e.key)&&e.stopPropagation()},[])}]}(r),{diffLine:o}=tw();return(0,a.jsx)(rr,{ref:r,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...l,className:"diff-hunk-cell",children:(0,a.jsxs)("div",{className:"d-flex flex-row",children:[t?.(s)??(0,a.jsx)(ra,{}),(0,a.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,a.jsx)(re,{searchResults:n,focusedSearchResult:i,className:(0,S.$)("diff-text-inner",{"color-fg-muted":"HUNK"===o.type})}),(0,a.jsx)(O.$6,{className:"diff-text-inner color-fg-muted",html:o.html})]})]})})}function ru({columnIndex:e,showRightBorder:t}){return(0,a.jsx)(rr,{ContextMenu:(0,a.jsx)(iq,{}),className:(0,S.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}try{rr.displayName||(rr.displayName="Cell")}catch{}try{ra.displayName||(ra.displayName="HunkKebabIcon")}catch{}try{rl.displayName||(rl.displayName="ContentCellUnmemoized")}catch{}try{rs.displayName||(rs.displayName="ContentCell")}catch{}try{ro.displayName||(ro.displayName="LineNumberCell")}catch{}try{rc.displayName||(rc.displayName="LineNumberCellUnmemoized")}catch{}try{rd.displayName||(rd.displayName="HunkCell")}catch{}try{ru.displayName||(ru.displayName="EmptyCell")}catch{}let rm=({resultsForLine:e,focusedSearchResult:t,handleDiffSideCellSelectionBlocking:n,handleDiffRowClick:i,lineAnchor:r,filePath:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:c,hasHiddenUnicodeCharacters:u,isLeftSide:m,isSplit:f,setInGridMode:h}=tw(),p=(0,d.useRef)(null),g="ADDITION"!==c.type,x=!f||m,y=x&&!g,b="DELETION"!==c.type,v=!f||!m,C=v&&!b,N=(0,d.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!0)},[i,c.left]),j=(0,d.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!1)},[i,c.left]),w=(0,d.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!0)},[i,c.right]),L=(0,d.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!1)},[i,c.right]),_=(0,d.useCallback)(()=>{n&&n("left")},[n]),S=(0,d.useCallback)(()=>{n&&n("right")},[n]);return(0,a.jsxs)(ns,{line:c,children:[x&&(0,a.jsxs)(ro,{copilotChatReference:s,columnIndex:0,filePath:l,handleDiffCellClick:y?w:N,handleDiffSideCellSelectionBlocking:S,firstLineNumberSelection:o,contentRef:p,children:[u&&!b&&(0,a.jsx)(rh,{children:(0,a.jsx)(t9.o,{})}),g&&c.left]}),v&&(0,a.jsxs)(ro,{copilotChatReference:s,columnIndex:f?2:1,filePath:l,handleDiffCellClick:C?N:w,handleDiffSideCellSelectionBlocking:_,firstLineNumberSelection:o,contentRef:p,children:[u&&b&&(0,a.jsx)(rh,{children:(0,a.jsx)(t9.o,{})}),b&&c.right]}),(0,a.jsx)(nt,{enableDiffGridMode:h,children:(0,a.jsx)(rs,{copilotChatReference:s,columnIndex:f?m?1:3:2,filePath:l,handleDiffCellClick:m?j:L,lineAnchor:r,handleDiffSideCellSelectionBlocking:m?S:_,searchResultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o,ref:p})})]})},rf=({resultsForLine:e,focusedSearchResult:t,fileAnchor:n,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:l,copilotChatReference:s,firstLineNumberSelection:o})=>{let{diffLine:c,isLeftSide:d}=tw();if(e9(c))return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ru,{columnIndex:2*!d}),(0,a.jsx)(ru,{columnIndex:d?1:3,showRightBorder:d})]});let u=d?"left":(0,eH.XU)(c.type),m="left"===u?c.left:c.right,f=(0,eH.IQ)(n,u,m??0);switch(c.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,a.jsx)(rg,{copilotChatReference:s,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:l,lineAnchor:f,resultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:o});default:throw Error(`cannot handle type ${c.type}`)}};function rh({children:e}){return(0,a.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})}let rp=d.memo(rf),rg=d.memo(rm);try{rm.displayName||(rm.displayName="CodeDiffLineUnmemoized")}catch{}try{rf.displayName||(rf.displayName="DiffLineSideUnmemoized")}catch{}try{rh.displayName||(rh.displayName="DiffCodeAlert")}catch{}try{rp.displayName||(rp.displayName="DiffLineSide")}catch{}try{rg.displayName||(rg.displayName="CodeDiffLine")}catch{}let rx="ExpandableHunkHeaderDiffLine-module__expand-up-and-down--_W5im";function ry({direction:e,icon:t,label:n,onClick:i,ariaLabel:r,className:l,...s}){let{sendAnalyticsEvent:o}=(0,nD.s)(),{isSplit:c}=tw();return(0,a.jsx)("button",{onClick:()=>{i(),o("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,S.$)("Button Button--iconOnly Button--invisible","ExpandableHunkHeaderDiffLine-module__expand-button-line--iUeM1",!c&&"ExpandableHunkHeaderDiffLine-module__expand-button-unified--zEXxI",l),"aria-label":r??n,"data-direction":e,...s,children:(0,a.jsx)(t,{})})}function rb({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:i}){let{fileLineCount:r,diffLine:l}=tw(),{expandStartOfHunk:s,expandEndOfPreviousHunk:o}=iU(),c=!t,m=!e,f=0===l.blobLineNumber,h=c||m,p=m&&l.blobLineNumber===r,g=(0,d.useMemo)(()=>!h&&!(l.blobLineNumber<=0)&&(!!(l.blobLineNumber-t.blobLineNumber<=20)||!!(e.blobLineNumber-l.blobLineNumber>=20)),[h,l,e,t]),x=(0,d.useMemo)(()=>!h&&!p&&l.blobLineNumber-t.blobLineNumber>20,[h,p,l,t]),y=(0,d.useMemo)(()=>!(l.blobLineNumber<=0)&&!f&&!!c,[c,f,l]),b=(0,d.useMemo)(()=>!c&&!p&&!!m,[c,m,p]),v=(0,d.useMemo)(()=>{switch(!0){case g:return"expand-all";case x:return"expand-up-and-down";case y:return"expand-up";case b:return"expand-down"}},[g,x,y,b]),C=()=>s(),N=()=>o(),j=()=>s();return(0,a.jsx)(rd,{searchResultsForLine:n,focusedSearchResult:i,renderHunkButton:n=>{switch(v){case"expand-all":return(0,a.jsx)(ry,{...n,direction:"all",icon:u.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:j});case"expand-up-and-down":return(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)(ry,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:rx,onClick:N}),(0,a.jsx)(ry,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:rx,onClick:C})]});case"expand-up":return(0,a.jsx)(ry,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:C});case"expand-down":return(0,a.jsx)(ry,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:N});default:return null}},ContextMenu:(0,a.jsx)(rv,{handleCopyContent:()=>{let[e]=tt(tn(l.html),l.type);(0,nd.D)(e)},handleExpandAbove:C,handleExpandAll:j,handleExpandBelow:N,shouldCopyContent:!!l.html,shouldExpandAbove:x||y,shouldExpandBelow:x||b})})}function rv({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:i,handleExpandBelow:r,handleExpandAbove:l,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},c={key:"]"},d={key:"["},m={key:"C"};return(0,a.jsx)(nm.W.Overlay,{width:"medium",children:(0,a.jsxs)(er.l,{children:[(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":tl(o),onSelect:i,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.UnfoldIcon,{})}),"Expand all",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${ta(o)}`})})]}),t?(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":tl(c),onSelect:l,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.FoldUpIcon,{})}),"Expand above",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${ta(c)}`})})]}):null,e?(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":tl(d),onSelect:r,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.FoldDownIcon,{})}),"Expand below",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${ta(d)}`})})]}):null,(0,a.jsx)(i4,{}),n?(0,a.jsxs)(er.l.Item,{"aria-keyshortcuts":tl(m),onSelect:s,children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.CopyIcon,{})}),"Copy",(0,a.jsx)(er.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${ta(m)}`})})]}):null]})})}try{ry.displayName||(ry.displayName="ExpandButtonLine")}catch{}try{rb.displayName||(rb.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{rv.displayName||(rv.displayName="HunkContextMenu")}catch{}let rC=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileAnchor:o,fileLineCount:c,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,replaceSelectedDiffRowRangeFromGridCells:h,selectedDiffRowRange:p,setInGridMode:g,showHiddenUnicode:x,tableRef:y,updateDiffLines:b,copilotChatReference:v,inGridMode:C,firstLineNumberSelection:N}){let{leftLines:j,rightLines:w}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,d.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e5);for(;n.length<t.length;)n.push(e5)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":var r;i();let[e,l]=[{...r=a,threadsData:void 0,annotationsData:void 0},{...r,threadsData:r.threadsData?{...r.threadsData,threads:r.threadsData.threads,totalCommentsCount:r.threadsData.totalCommentsCount,totalCount:r.threadsData.totalCount}:void 0}];t.push(e),n.push(l);break;case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(s),{ghostUser:L}=eJ();t7({clearSelectedDiffRowRange:i,containerRef:y,fileAnchor:o,isSplitDiff:!0,leftLines:j,replaceSelectedDiffRowRangeFromGridCells:h,rightLines:w,disabled:!C});let _=(0,d.useMemo)(()=>{if(p)return td({selectedDiffRowRange:p,leftLines:j,rightLines:w,isNumberCell:!0})},[p,j,w]);(0,d.useEffect)(()=>{b(o,s)},[s,o,b]);let S=(0,d.useMemo)(()=>ty(j),[j]),k=new Map,E=new Map,I=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(k.has(n.leftLineNumber)?k.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&k.set(n.leftLineNumber,[n]),I.has(n.hunkLineNumber)?I.get(n.hunkLineNumber)?.push(n):n.isHunk&&I.set(n.hunkLineNumber,[n]),E.has(n.rightLineNumber)?E.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&E.set(n.rightLineNumber,[n]))}let D=e=>{let t=!1;return l&&!e9(e)&&(t=(0,eV.Y)(e.text),x&&t&&(e=e.html?{...e,html:(0,tC.Gx)(e.html)??e.html}:{...e,text:(0,eV.TA)(e.text)})),[e,t]},T=[];for(let e=0;e<j.length;e++){let i=j[e],l=w[e],s=j[e-1],[d,h]=D(i),[p,x]=D(l),y=e9(j[e+1])?w[e+1]:j[e+1],b=!!d&&d!==e5&&"HUNK"===d.type,C=e7(o,d,p),A=e9(d)?e9(p)?void 0:p:d;if(!A)continue;let R=e9(d)?void 0:d.threadsData,$=e9(p)?void 0:p.threadsData,{currentHunk:M,nextHunk:O,previousHunk:P}=tx(A,S),U=k.get(e9(d)?-2:d.left??-2),B=E.get(e9(p)?-2:p.right??-2),F=I.get(A.blobLineNumber),H=F?.[0]?.rightLineNumber===p?.right?n:void 0,z=U?.[0]?.leftLineNumber===d?.left?n:void 0,V=B?.[0]?.rightLineNumber===p?.right?n:void 0,W=tL($,L),G=tL(R,L),q={currentHunk:M,diffEntryId:r,fileAnchor:o,fileLineCount:c,filePath:u,isRowSelected:(_?.isRowSelected(i)||_?.isRowSelected(l))??!1,nextHunk:O,previousHunk:P,rowId:C,isSplit:!0,diffContext:t,setInGridMode:g};T.push((0,a.jsx)("tr",{className:"diff-line-row",children:b?(0,a.jsx)(tj,{...q,hasHiddenUnicodeCharacters:h||x,diffLine:A,modifiedLineThreads:W,originalLineThreads:G,children:(0,a.jsx)(rb,{nextLine:y,prevLine:s,focusedSearchResult:H,resultsForLine:F})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tj,{...q,diffLine:d,hasHiddenUnicodeCharacters:h,isLeftSide:!0,modifiedLineThreads:W,originalLineThreads:G,children:(0,a.jsx)(rp,{copilotChatReference:v,fileAnchor:o,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,resultsForLine:U,focusedSearchResult:z,firstLineNumberSelection:N})}),(0,a.jsx)(tj,{...q,diffLine:p,hasHiddenUnicodeCharacters:x,modifiedLineThreads:W,originalLineThreads:G,children:(0,a.jsx)(rp,{copilotChatReference:v,fileAnchor:o,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:f,resultsForLine:B,focusedSearchResult:V,firstLineNumberSelection:N})})]})},C))}return(0,a.jsx)(a.Fragment,{children:T})});try{rC.displayName||(rC.displayName="SplitDiffLines")}catch{}let rN=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:l,diffLines:s,fileLineCount:o,fileAnchor:c,filePath:u,tableRef:m,selectedDiffRowRange:f,showHiddenUnicode:h,handleDiffRowClick:p,updateDiffLines:g,replaceSelectedDiffRowRangeFromGridCells:x,copilotChatReference:y,setInGridMode:b,inGridMode:v,firstLineNumberSelection:C}){t7({clearSelectedDiffRowRange:i,containerRef:m,fileAnchor:c,isSplitDiff:!1,leftLines:s,replaceSelectedDiffRowRangeFromGridCells:x,disabled:!v});let N=(0,d.useMemo)(()=>{if(f)return td({selectedDiffRowRange:f,leftLines:s,isNumberCell:!0})},[f,s]),j=(0,d.useMemo)(()=>ty(s.map(e=>e)),[s]);(0,d.useEffect)(()=>{g(c,s)},[s,c,g]);let w=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&w.has(n.diffLineNumIndex)?w.get(n.diffLineNumIndex)?.push(n):e&&w.set(n.diffLineNumIndex,[n]))}let L=s.map((e,i)=>{let d=e,m=s[i+1],f=s[i-1],g="HUNK"===e.type,x=(0,eH.IQ)(c,(0,eH.XU)(d.type),d.blobLineNumber),{currentHunk:v,nextHunk:L,previousHunk:_}=tx(d,j),S=w.get(i),k=i===S?.[0]?.diffLineNumIndex?n:void 0,E=N?.isRowSelected(e)??!1,I=e7(c,d,d),D=l&&(0,eV.Y)(d.text);h&&D&&(d=d.html?{...d,html:(0,tC.Gx)(d.html)??d.html}:{...d,text:(0,eV.TA)(d.text)});let T={diffEntryId:r,diffLine:d,currentHunk:v,fileAnchor:c,fileLineCount:o,filePath:u,hasHiddenUnicodeCharacters:D,isLeftSide:"DELETION"===d.type,isRowSelected:E,isSplit:!1,nextHunk:L,previousHunk:_,diffContext:t,rowId:I,setInGridMode:b};return(0,a.jsx)("tr",{className:"diff-line-row",children:(0,a.jsx)(tj,{...T,children:g?(0,a.jsx)(rb,{nextLine:m,prevLine:f,focusedSearchResult:k,resultsForLine:S}):(0,a.jsx)(rg,{filePath:u,copilotChatReference:y,handleDiffRowClick:p,firstLineNumberSelection:C,lineAnchor:x,resultsForLine:S,focusedSearchResult:k})})},I)});return(0,a.jsx)(a.Fragment,{children:L})});try{rN.displayName||(rN.displayName="UnifiedDiffLines")}catch{}function rj({diffAnchor:e,children:t}){return(0,a.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let rw=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:i,diffLinesManuallyUnhidden:r,baseHelpUrl:l,onHandleLoadDiff:s,copilotChatReference:o,hasExpandedAllRanges:c,...d}){let u=`diff-${i.pathDigest}`;if(i.isBinary)return(0,a.jsx)(rj,{diffAnchor:u,children:"Binary file not shown."});if((0,eM.dK)(i))return(0,a.jsx)(rj,{diffAnchor:u,children:"File renamed without changes."});if((0,eM.Jc)(i))return(0,a.jsx)(rj,{diffAnchor:u,children:"File copied without changes."});if((0,eM.Sn)(i,i.status,i.oldTreeEntry?.mode,i.newTreeEntry?.mode))return(0,a.jsx)(rj,{diffAnchor:u,children:"File mode changed."});if(!r&&(0,eM.HI)(i))return(0,a.jsx)(tv,{diffAnchor:u,onLoadDiff:s,children:(0,eM.l_)(i.truncatedReason)});if((0,eM.s8)(i))return(0,a.jsx)(rj,{diffAnchor:u,children:"Whitespace-only changes."});if(!r&&(0,eM.lO)(i))return(0,a.jsx)(tv,{diffAnchor:u,onLoadDiff:s,children:"This file was deleted."});if(!r&&(0,eM.xW)(i))return(0,a.jsxs)(tv,{diffAnchor:u,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${l}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:s,children:["Some generated files are not rendered by default. Learn more about"," "]});if(i.isTooBig&&0===i.diffLines.length)if(r)return(0,a.jsxs)(rj,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,a.jsx)(B.A,{inline:!0,href:`${l}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,a.jsx)(tv,{diffAnchor:u,onLoadDiff:s,children:"Large diffs are not rendered by default."});return i.diffLines?(0,a.jsx)(eQ,{...d,children:(0,a.jsx)(th,{children:(0,a.jsx)(rL,{diffAnchor:u,diffContext:t,diffEntryData:i,viewerData:d.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:o,hasExpandedAllRanges:c})})}):null});function rL({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:i,focusedSearchResult:r,copilotChatReference:l,diffContext:s,hasExpandedAllRanges:o}){let c=(0,d.useRef)(null),[u,m]=(0,d.useState)(!0),[f,h]=(0,d.useState)(null),[p,g]=(0,d.useState)(!1),x=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,b=(0,d.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<x?n.diffLines.concat({__id:tp,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,x]),{diffViewPreference:v,lineSpacingPreference:C,tabSizePreference:j}=t,{selectedDiffRowRange:w,replaceSelectedDiffRowRange:L,replaceSelectedDiffRowRangeFromGridCells:_,clearSelectedDiffRowRange:k,updateDiffLines:E,updateSelectedDiffRowRange:I}=tm(),D=(0,d.useCallback)(e=>{if(!c.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=c.current.contains(t);n&&!i&&(k(),P.current=null)},[k,c]);(0,d.useEffect)(()=>(N.XC?.addEventListener("mousedown",D),()=>{N.XC?.removeEventListener("mousedown",D)}),[D]);let T=e===w?.diffAnchor,A=(0,d.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,r=n.newTreeEntry?.path;if(i||r)return e="RENAMED"===t?`${i} renamed to ${r}`:"DELETED"===t||"REMOVED"===t?i:r,`Diff for: ${e}`},[n]);(0,d.useEffect)(()=>{if(!T)return;let e=function(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let a of t)if(a&&(i||(i=e8(a,e.startLineNumber,e.startOrientation)),r||(r=e8(a,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}(w,b);e&&e!==w&&L(e)},[b,w,T,L]);let R=N.cg?.location.search,$=(0,d.useMemo)(()=>"split"===new URLSearchParams(R).get("diff")||"split"===v,[R,v]),M=(0,eH.c7)(b),O=(0,d.useCallback)(e=>{h(e)},[h]),P=(0,d.useRef)(null),U=(0,d.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!o&&u&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[o,u,n.path]),B=(0,d.useCallback)((t,n,i,r,a)=>{var l;let s;l=t.target,(s=document.getElementById("__primerPortalRoot__"))&&l&&s.contains(l)||!t.defaultPrevented&&a&&I(e,n,i,r,a)},[e,I]),F=(0,d.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${$?`, ${"left"===f?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[f,$]),H=(0,d.useMemo)(()=>b.some(e=>(0,eV.Y)(e.text)),[b]),z={searchResults:i,diffContext:s,focusedSearchResult:r,clearSelectedDiffRowRange:k,diffEntryId:n.objectId,diffHasHiddenUnicodeCharacters:H,diffLines:b,fileAnchor:e,fileLineCount:x,filePath:n.path,handleDiffRowClick:B,handleDiffSideCellSelectionBlocking:O,replaceSelectedDiffRowRangeFromGridCells:_,selectedDiffRowRange:T?w:null,showHiddenUnicode:p,tableRef:c,updateDiffLines:E,updateSelectedDiffRowRange:I,copilotChatReference:l,setInGridMode:m,inGridMode:u,firstLineNumberSelection:P};return(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsx)(ez.a,{isShown:p,toggleShowHiddenCharacters:()=>g(!p)}),(0,a.jsx)("table",{"aria-label":A,onKeyDown:U,ref:c,className:(0,S.$)("tab-size","width-full","DiffLines-module__tableLayoutFixed--InKAb",{"DiffLines-module__compact--emLm8":"compact"===C}),"data-block-diff-cell-selection":f,"data-diff-anchor":e,"data-tab-size":j,"data-paste-markdown-skip":!0,onCopy:F,role:"grid",style:{"--line-number-cell-width":`${M}px`,"--line-number-cell-width-unified":`${2*parseFloat(M)}px`},children:$?(0,a.jsx)(y.wj,{lineWidth:M,children:(0,a.jsx)(rC,{...z})}):(0,a.jsx)(y.Qe,{lineWidth:M,children:(0,a.jsx)(rN,{...z})})})]})}try{rj.displayName||(rj.displayName="PlainTextStatus")}catch{}try{rw.displayName||(rw.displayName="DiffLines")}catch{}try{rL.displayName||(rL.displayName="CodeDiffLines")}catch{}var r_=n(78049);function rS({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:i,newCommitOid:r,oldCommitOid:l,status:s,submoduleUrl:o}=e,c=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===s,m=(0,d.useMemo)(()=>{switch(s){case"ADDED":return(0,a.jsx)(rI,{commitOid:r,contentsUrl:i,type:"added"});case"DELETED":case"REMOVED":return(0,a.jsx)(rI,{commitOid:l,contentsUrl:i,type:"deleted"});default:return(0,a.jsx)(rD,{newCommitOid:r,oldCommitOid:l,changedFiles:n,contentsUrl:i})}},[r,l,s,n,i]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:`px-3 py-2 ${c?"border-bottom bgColor-muted":""}`,children:[(0,a.jsx)(u.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,a.jsx)(rk,{basePath:t,submoduleUrl:o}),m]}),c&&(0,a.jsx)(er.l,{className:"SubmoduleDiff-module__filesActionList--bnkEy",showDividers:!0,variant:"full",children:e.summary.map(e=>(0,a.jsx)(rT,{compareUrl:`${i}/compare/${l}...${r}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function rk({basePath:e,submoduleUrl:t}){return(0,a.jsxs)(a.Fragment,{children:["Submodule"," ",t?(0,a.jsx)(B.A,{inline:!0,href:t,children:e}):e," "]})}function rE(e){return e.slice(0,7)}function rI({commitOid:e="",contentsUrl:t,type:n}){let i="added"===n?"added at":"deleted from";return t?(0,a.jsxs)(a.Fragment,{children:[i," ",(0,a.jsx)(B.A,{inline:!0,href:`${t}/tree/${e}`,children:rE(e)})]}):(0,a.jsxs)(a.Fragment,{children:[i," ",rE(e)]})}function rD({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:i}){let r=n>0&&i?`${n} ${1===n?"file":"files"}`:`from ${rE(t)} to ${rE(e)}`;return(0,a.jsxs)(a.Fragment,{children:["updated"," ",i?(0,a.jsx)(B.A,{inline:!0,href:`${i}/compare/${t}...${e}`,children:r}):r]})}function rT({compareUrl:e,linesAdded:t,linesDeleted:n,path:i,pathDigest:r,status:l}){return(0,a.jsx)(er.l.LinkItem,{href:`${e}#diff-${r}`,className:"SubmoduleDiff-module__fileRowLinkItem--B6ZhJ",children:(0,a.jsxs)($.B,{gap:"condensed",direction:"horizontal",align:"center",className:"SubmoduleDiff-module__fileRow--HYQLm",children:[(0,a.jsx)(r_.E,{status:l}),(0,a.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,a.jsx)("span",{className:"SubmoduleDiff-module__path--M3Bxi",children:i}),(t>0||n>0)&&(0,a.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,a.jsx)("div",{className:"SubmoduleDiff-module__linesAdded--db7oX",children:t>0&&(0,a.jsxs)(e$.C,{isAddition:!0,children:["+",rA(t)]})}),(0,a.jsx)("div",{className:"SubmoduleDiff-module__linesDeleted--zx_Ak",children:n>0&&(0,a.jsxs)(e$.C,{isAddition:!1,children:["-",rA(n)]})})]})]})]})})}function rA(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{rS.displayName||(rS.displayName="SubmoduleDiff")}catch{}try{rk.displayName||(rk.displayName="SubmodulePath")}catch{}try{rI.displayName||(rI.displayName="SubmoduleCommitChange")}catch{}try{rD.displayName||(rD.displayName="SubmoduleModified")}catch{}try{rT.displayName||(rT.displayName="SubmoduleFileRow")}catch{}function rR(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position}:{...e,position:null,threadsData:void 0}})}var r$=n(78252);function rM({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:r}){return(0,a.jsxs)(nm.W,{children:[(0,a.jsx)(nm.W.Anchor,{children:(0,a.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,a.jsx)(u.KebabHorizontalIcon,{})})}),(0,a.jsx)(nm.W.Overlay,{children:(0,a.jsxs)(er.l,{children:[(0,a.jsxs)(er.l.LinkItem,{href:(0,v.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,a.jsx)(er.l.LeadingVisual,{children:(0,a.jsx)(u.EyeIcon,{})}),"View file"]}),r&&(0,a.jsx)(r$.$,{...r})]})})]})}try{rM.displayName||(rM.displayName="BlobActionsMenu")}catch{}var rO=n(33671),rP=n(8934);function rU({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:i}){return i?(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,a.jsx)(tb.A,{size:"large"})}):n?(0,a.jsx)("div",{className:"prose-diff position-relative",children:(0,a.jsx)(O.vb,{html:n})}):t?(0,a.jsx)(rO.default,{...t}):e?(0,a.jsx)(rP.x,{src:e,children:(0,a.jsxs)("div",{className:"text-center py-3",children:[(0,a.jsx)(tb.A,{size:"medium"}),(0,a.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{rU.displayName||(rU.displayName="RichDiff")}catch{}let rB=(0,d.memo)(function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:r}){let{loaded:s,richDiffData:o}=function(e,t,n,i){let r=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,a=(0,l.t)(),[s,o]=(0,d.useState)(r),[c,u]=(0,d.useState)(t),m=(0,d.useCallback)(async()=>{let t=await (0,ev.lS)(`${(0,v.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&u(await t.json()),o(!0)},[e,n,a]);return(0,d.useEffect)(()=>{r||m()},[r,m]),{loaded:s,richDiffData:c}}(e,{proseDiffHtml:n,fileRendererInfo:i},t,r);return(0,a.jsx)(rU,{dependencyDiffPath:r,fileRendererInfo:o.fileRendererInfo,loading:!s,proseDiffHtml:o.proseDiffHtml})});try{rB.displayName||(rB.displayName="CommitRichDiff")}catch{}let rF={isInMergeQueue:!1,state:"OPEN"},rH=d.memo(rz);function rz({diffMatches:e,focusedSearchResult:t,diffEntryData:n,contextLinePathURL:i,recalcTotalHeightOfVirtualWindow:r,onOptionCollapseToggle:l,helpUrl:o,headerStickyOffset:u=0,repo:m,oid:f,index:h,ignoreWhitespace:p,virtualizerScrollTo:x}){let y=(0,s.i)(),{data:b}=(0,g.ID)();void 0===b&&(b=g.aX);let v=(0,d.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:ep.l,incrementActiveMarker:ep.l,overlayPortalContainerName:"commit-details-marker-portal"}),[]),C=(0,c.B)().commentInfo,{getThreadDataByPathAndPosition:N,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:w,initialExpandedThreadId:L}=(0,eO.B)(),{commentBoxSubject:_}=(0,eP.X)(),S=function(e,t,n){let i=(0,c.B)(),{commit:r,commentInfo:a,repoOwnerGlobalRelayId:l}=i,s=(0,eU.I)({commit:r,repo:i.repo,viewerCanReply:a.canComment,repoOwnerGlobalRelayId:l,getInlineCommentInfoByPathAndPosition:t}),{addComment:o,deleteComment:u,editComment:m,hideComment:f,unhideComment:h}=(0,eP.X)(),{findInlineComment:p,findInlineCommentWithRelay:g}=(0,eO.B)(),x=(0,d.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:r})=>{let[a,l]=r.id.split("::");a&&l?o(i,e,l).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))}):n(Error("Invalid threadId"))},[o]),y=(0,d.useCallback)(({text:e,diffLine:t,filePath:i,onCompleted:r,onError:a})=>{!t||t.position&&o(e,i,t.position.toString()).then(e=>{if(e.comment){let a=e.comment.id,l=`${i}::${t.position}`;n?.(i,t.position??0,[e.comment],!0),s(l,!0),r?.(l,a)}else a?.(Error("Failed to add comment"))})},[o,n,s]),b=(0,d.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let r=g(e.id);r?m(t,{id:r.id,bodyVersion:r.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))}):i(Error("Comment not found"))},[m,g]),v=(0,d.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=g(e);i?u(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))}):n?.(Error("Comment not found"))},[u,g]),C=(0,d.useCallback)(({commentDatabaseId:e,reason:t,onCompleted:n,onError:i})=>{let r=p(e);r?f(r.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))}):i?.(Error("Comment not found"))},[p,f]),N=(0,d.useCallback)(({commentDatabaseId:e,onCompleted:t,onError:n})=>{let i=p(e);i?h(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))}):n?.(Error("Comment not found"))},[p,h]);return(0,d.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",commentBoxSubject:e,multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,addThread:y,addThreadReply:x,deleteComment:v,editComment:b,pendingSuggestedChangesBatch:[],submitSuggestedChanges:ep.l,addSuggestedChangeToPendingBatch:ep.l,removeSuggestedChangeFromPendingBatch:ep.l,addFileLevelThread:ep.l,resolveThread:ep.l,unresolveThread:ep.l,hideComment:C,unhideComment:N,fetchThread:s}),[y,x,v,b,s,C,N,e])}(_,j,w),[k,E]=(0,d.useState)(rV(n.current[h],N)),I=(0,d.useCallback)(e=>{E(rV(e,N))},[N]),[D,T]=(0,d.useState)(k.collapsed),[A,R]=(0,d.useState)(k.defaultToRichDiff),$=k.isSubmodule&&!!k.submodule,M=!$&&!A,[O,P]=(0,d.useState)(k.diffManuallyExpanded),U=(0,d.useRef)(!1);(0,d.useEffect)(()=>{T(k.collapsed)},[k.collapsed]);let B=(0,d.useRef)([]),F=(0,d.useCallback)(async e=>{B.current.push(e);let t=await eB(B.current,i,k.pathDigest);if(void 0!==t){let e={...k};e.diffLines=rR(e.diffLines,t.diffEntryWithContext),I(e),n.current[h]=e,r()}},[i,n,k,h]),H=async()=>{B.current=[],U.current||((k.newTreeEntry?.lineCount??0)<5e3?B.current.push({start:1,end:Math.max(k.oldTreeEntry?.lineCount??0,k.newTreeEntry?.lineCount??0)}):B.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],r=e[t+1<e.length?t+1:e.length-1],a=i?.blobLineNumber,l=r?.blobLineNumber;a&&l&&(n.push({start:a,end:a+40}),n.push({start:Math.max(l-40,1),end:l}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(k.diffLines,k.newTreeEntry?.lineCount??0)),U.current=!U.current;let e=await eB(B.current,i,k.pathDigest);if(void 0!==e){let t={...k};t.diffLines=rR(t.diffLines,e.diffEntryWithContext),I(t),n.current[h]=t,r()}},z=(0,d.useCallback)(async()=>{if(0===k.diffLines.length){let e;try{e=await eF({repo:m,sha1:k.oldOid,sha2:k.newOid,entry:k.diffNumber.toString()})}catch{throw Error("Error fetching diff lines")}let t={...k};t.diffLines=e,I(t),n.current[h]=t}k.diffManuallyExpanded=!0,n.current[h].diffManuallyExpanded=!0,P(!0),r(),requestAnimationFrame(()=>{x?.(h,{align:"center"})})},[n,k,h,r]);(0,d.useEffect)(()=>{I(n.current[h]),B.current=[]},[p,h,n,f,m.name,m.ownerLogin,k.path,I]);let V=(0,d.useMemo)(()=>{if(k.isBinary||k.isSubmodule||(0,eM.dK)(k))return!1;if(U.current||(n.current[h]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=n.current[h]?.diffLines?.length||0,t=n.current[h]?.diffLines?.[e-1]?.blobLineNumber||0,i=n.current[h]?.newTreeEntry?.lineCount||0;return!!(t<i)||!!(e-1<i)},[n.current[h]?.diffLines,n.current[h]?.newTreeEntry?.lineCount,h,n,k]),W=(0,d.useMemo)(()=>({avatarUrl:y?.avatarURL??"",diffViewPreference:b.splitPreference,isSiteAdmin:!1,commentsPreference:b.commentsPreference,login:y?.login??"",lineSpacingPreference:b.lineSpacing,tabSizePreference:y?.tabSize??4,viewerCanComment:C.canComment,viewerCanApplySuggestion:!1}),[y?.avatarURL,y,y?.login,y?.tabSize,b]),G=(0,d.useMemo)(()=>{if(k.copilotChatReference)return{copilotChatReference:k.copilotChatReference}},[k]),q=(0,d.useId)(),K=`heading-${q}`;return(0,a.jsxs)("div",{role:"region","aria-labelledby":K,className:"position-relative",style:{contain:"layout"},children:[(0,a.jsx)("div",{className:"Diff-module__diffHeaderWrapper--DiwLD",style:{"--header-sticky-offset":`${u}px`},children:(0,a.jsx)(e$.B,{areLinesExpanded:U.current,canExpandOrCollapseLines:V,fileLinkHref:`#diff-${k.pathDigest}`,isCollapsed:D,isBinary:k.isBinary,isSubmodule:$,headingId:K,size:k.diffSize,canToggleRichDiff:k.canToggleRichDiff,linesAdded:k.linesAdded,linesChanged:k.linesChanged,linesDeleted:k.linesDeleted,newMode:k.newTreeEntry?.mode,newPath:k.newTreeEntry?.path,oldMode:k.oldTreeEntry?.mode,oldPath:k.oldTreeEntry?.path,patchStatus:k.status,path:k.path,onToggleExpandAllLines:H,onToggleFileCollapsed:e=>{e.altKey?l(!D):(k.collapsed=!D,n.current[h].collapsed=!D,T(!D))},onToggleDiffDisplay:e=>R(e),rightSideContent:(0,a.jsx)(rM,{oid:"REMOVED"===k.status&&k.deletedSha?k.deletedSha:f,path:k.path,repo:m,isViewable:!k.isSubmodule,copilotDiffChatProps:G}),showRichDiff:A})}),D?null:(0,a.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[$&&k.submodule&&(0,a.jsx)(rS,{submodule:k.submodule}),A&&(0,a.jsx)(rB,{commitOid:f,path:k.path,proseDiffHtml:k.proseDifffHtml,fileRendererInfo:k.renderInfo,dependencyDiffPath:k.dependencyDiffPath}),M&&(0,a.jsx)(rw,{diffContext:"commit",copilotChatReference:k.copilotChatReference,searchResults:e,focusedSearchResult:t,diffEntryData:k,baseHelpUrl:o,commentingEnabled:!0,commentBatchPending:!1,repositoryId:m.id.toString(),subject:rF,subjectId:f,viewerData:W,newCommitOid:k.newOid,oldCommitOid:k.oldOid,addInjectedContextLines:F,commentingImplementation:S,markerNavigationImplementation:v,diffLinesManuallyUnhidden:O,onHandleLoadDiff:z,initialExpandedThreadId:L})]})]},`${k.pathDigest}_${k.diffLines.length}`)}function rV(e,t){for(let n of e?.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{rH.displayName||(rH.displayName="Diff")}catch{}try{rz.displayName||(rz.displayName="DiffUnmemoized")}catch{}var rW=n(27028);let rG=(0,d.memo)(rq);function rq({treeToggleElement:e,headerInfo:t,searchBox:n,ignoreWhitespace:i,userNotices:r}){let l=(0,d.useRef)(null),s=function(e){let[t,n]=(0,d.useState)(!1),i=(0,d.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,d.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t}(l),o=s?"d-none d-sm-flex":"";return(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:l,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,a.jsxs)(iL.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,a.jsxs)(e$.C,{className:o,isAddition:!0,children:["+",t.additions]}),(0,a.jsxs)(e$.C,{className:o,isAddition:!1,children:["-",t.deletions]}),(0,a.jsx)("span",{className:`${o} ml-2 fgColor-muted text-small`,style:{whiteSpace:"nowrap"},children:"lines changed"})]}),(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[s&&(0,a.jsx)(rK,{}),void 0!==n&&n,(0,a.jsx)(rW.G,{reloadOnWhitespaceChange:!0,defaultHideWhitespace:i,userNotices:r})]})]})}let rK=()=>(0,a.jsx)(U.Q,{leadingVisual:u.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{rG.displayName||(rG.displayName="DiffsHeader")}catch{}try{rq.displayName||(rq.displayName="DiffsHeaderUnmemoized")}catch{}try{rK.displayName||(rK.displayName="GoToTopButton")}catch{}let rX=d.memo(rQ);function rQ(){return(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,a.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,a.jsx)(J.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,a.jsx)(J.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(J.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(J.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(J.O,{height:"sm",variant:"rounded",width:"random"})]})]})})}try{rX.displayName||(rX.displayName="LoadingContentBlock")}catch{}try{rQ.displayName||(rQ.displayName="LoadingContentBlockUnmemoized")}catch{}function rJ({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i,treeToggleElement:r,headerInfo:l,totalFileCount:s}){let o=(0,d.useRef)(e),u=(0,eg.X)(),m=(0,c.B)();return(0,a.jsxs)("div",{"data-hpc":!0,children:[s>40&&(0,a.jsx)(eR,{}),(0,a.jsx)(rG,{treeToggleElement:r,headerInfo:l}),e.map((e,r)=>r>=10?null:(0,a.jsx)("div",{className:0===r?"pt-0":"pt-3",children:(0,a.jsx)(rH,{onOptionCollapseToggle:ep.l,diffEntryData:o,index:r,helpUrl:u.helpUrl,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:ep.l,repo:n,ignoreWhitespace:m.ignoreWhitespace,oid:i})},e.pathDigest))]})}try{rJ.displayName||(rJ.displayName="SSRDiffs")}catch{}let rY=(0,d.memo)(rZ);function rZ({totalFileCount:e,diffEntryData:t,contextLinePathURL:n,unselectedFileExtensions:i,repo:r,oid:l,ignoreWhitespace:s,filterTerm:o,searchTerm:u,setSearchTerm:m,setCanFocusComments:f,isTreeExpanded:h,treeToggleElement:p,headerInfo:x}){let y=function(){let[e,t]=(0,d.useState)(""),n=(0,d.useCallback)(()=>{t((eL(N.fV.hash??"")??"").replace("diff-",""))},[]);return(0,d.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}(),{data:b}=(0,g.ID)();void 0===b&&(b=g.aX);let C=b.lineSpacing,j=(0,g.Qn)(s),w=(0,c.B)(),L=(0,d.useCallback)(()=>S({}),[]),[_,S]=(0,d.useState)({}),E=(0,d.useRef)(t),{findInDiffWorkerPath:I}=(0,V.D)(),D=(0,d.useRef)(t),T=(0,d.useRef)(e>40),A=(0,d.useRef)(null),[R,$]=(0,d.useState)(j),M=(0,d.useRef)(0),O=(0,d.useRef)(e),[P,U]=(0,d.useState)(l),{focusedSearchResult:B,setFocusedSearchResult:F,searchResults:H,currentIndex:z,setCurrentIndex:W}=function(e,t,n,i){let[r,a]=(0,d.useState)(new Map),[l,s]=(0,d.useState)(void 0),[o,c]=(0,d.useState)(0),u=d.useRef(null);!u.current&&t&&(u.current=new eE.N(new ek.z(n,eI),200,e=>1!==e.query.length));let m=(0,d.useRef)(t);m.current=t;let f=(0,d.useRef)("");(0,d.useEffect)(()=>function(){u.current?.terminate()},[]);let h=(0,d.useRef)([]);return u.current&&e!==h.current&&(u.current.onResponse=e=>{e.query===m.current&&(a(e.matchingDiffs),f.current=m.current)},h.current=e),(0,d.useEffect)(()=>{if(!e||!u.current||!f.current||""===f.current){a(new Map),s(void 0);return}a(new Map),s(void 0),u.current.post({query:f.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,d.useEffect)(()=>{if(e&&u.current)if(""===t)a(new Map),s(void 0),c(0),f.current="";else{var n;if(!((n=t).length>0&&n.length<=1e3))return;let i=f.current.length>0&&t.startsWith(f.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?r:void 0}),c(0)}},[t,i]),{focusedSearchResult:l,setFocusedSearchResult:s,searchResults:r,currentIndex:o,setCurrentIndex:c}}(E.current,u,I,_);function G(e){for(let t of E.current)t.collapsed=e;L()}(0,d.useEffect)(()=>{if(i&&i.size>0?E.current=D.current.filter(e=>!i.has((0,eh.QC)(e.path))):E.current=D.current,o&&(E.current=E.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),O.current!==E.current.length||0===E.current.length){let e=E.current.length;!function(e,t=0){if(void 0===N.XC)return;let n=N.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===N.XC)return;let e=N.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),N.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(0===e?"There are no files selected for viewing":`${e} file${1===e?"":"s"} remain${1===e?"s":""}`,150)}O.current=E.current.length,T.current=E.current.length>40,L()},[i?.size,o]),(0,d.useEffect)(()=>{E.current=t,D.current=t,T.current=e>40,L(),$(s),U(l)},[w.path]);let q=(0,eg.X)(),K=(0,v.VWf)({owner:w.repo.ownerLogin,repo:w.repo.name,sha1:w.commit.sha1,sha2:w.commit.sha2,oid:w.commit.oid}),X=function(e,t,n,i,r,a){let[l,s]=(0,d.useState)(eC),o=(0,d.useRef)([]),c=(0,d.useRef)(n);return(0,d.useEffect)(()=>{if(!i||!r)return;let a=!1,l=async(e,t,n)=>{s(eC);let r=await (0,ev.lS)(`${i}&start_entry=${e}&bytes=${t}&lines=${n}`);if(!a)try{if(r.ok){let e=await r.json();e&&(e.loading=e.loadMore,o.current=o.current.concat(e.extraDiffEntries),e.extraDiffEntries=o.current,e.loadMore&&c.current!==e.asyncDiffLoadInfo.startIndex?(c.current=e.asyncDiffLoadInfo.startIndex,s(e),setTimeout(()=>l(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(c.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,s(e)))}else s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}catch{s(e=>({...e,loading:!1,error:!0,extraDiffEntries:o.current}))}};return l(n,e,t),function(){a=!0}},[e,t,r,n,i,a]),(0,d.useEffect)(()=>{o.current=[],c.current=n},[i,n,a]),l}(w.asyncDiffLoadInfo.byteCount,w.asyncDiffLoadInfo.lineShownCount,w.asyncDiffLoadInfo.startIndex,K,w.moreDiffsToLoad,s);(0,d.useEffect)(()=>{X.loading||f(!0)},[X.loading,f]),(0,d.useEffect)(()=>{let e=t.concat(X.extraDiffEntries);i&&i.size>0?E.current=e.filter(e=>!i.has((0,eh.QC)(e.path))):E.current=e,o&&(E.current=E.current.filter(e=>e.path.toLowerCase().includes(o.toLowerCase()))),D.current=e,L()},[X.extraDiffEntries.length]);let Q=(0,d.useRef)(null),[J,Y]=(0,d.useState)(0);(0,ex.N)(()=>{Y(Q.current?.offsetTop??0)},[]);let Z=(0,ey.XW)({count:h?0:E.current.length,estimateSize:(0,d.useCallback)(e=>{var t;let n;if(!T.current)return 0;let i=(t=E.current[e],n=57,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&("compact"===C?n+=20*t.diffLines.length:n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n));return 0===e&&(i-=16),i},[C]),overscan:3,scrollMargin:J,rangeExtractor(e){if(!T.current)return(0,eb.vp)(e);let t=eL(N.fV.hash.substring(1)),n=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=E.current.findIndex(e=>e.pathDigest===n),r=E.current.findIndex(e=>t?.endsWith(e.pathDigest));return i<0&&r<0?(0,eb.vp)(e):Array.from(new Set([...(0,eb.vp)(e),...[i,r].filter(e=>e>-1)])).sort((e,t)=>e-t)}});(0,d.useEffect)(()=>{let e=y.includes("R"),t=y.includes("L"),n=t||e,i=n?t?y.split("L")[0]:y.split("R")[0]:y,r=r0(i??y,E.current);if(-1===r){if(X.error&&null!==A){let e=A.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(T.current)Z.scrollToIndex(r,{align:"center"}),requestAnimationFrame(()=>{if(n&&r1(Q,y));else{let e=Q.current?.querySelectorAll(`[aria-label="collapse file: ${E.current[r]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&r1(Q,y));else{let e=Q.current?.querySelectorAll(`[data-diff-anchor=diff-${i}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(N.cg?.scrollY??0)-57-60;N.cg?.scrollTo(0,t);let n=Q.current?.querySelectorAll(`[aria-label="collapse file: ${E.current[r]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[y,X]);let ee=(0,a.jsx)(ej,{currentPathDigestIndex:M,searchTerm:u,focusedSearchResult:B,currentIndex:z,setCurrentIndex:W,setFocusedSearchResult:F,setSearchTerm:m,searchResults:H,scrollDiffCellIntoView:e=>{let t=r0(e?.pathDigest??"",E.current);-1!==t&&(Z.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{var t,n;let i;t=e?.indexWithinDigest??0,n=e?.pathDigest??"",(i=N.XC?.getElementById(`match-${n}-${t}`))&&i.scrollIntoView({block:"center"})}))}});return(0,a.jsxs)("div",{"data-hpc":!0,ref:Q,children:[T.current&&(0,a.jsx)(eR,{}),(0,a.jsx)(rG,{treeToggleElement:p,headerInfo:x,searchBox:ee,ignoreWhitespace:R,userNotices:w?.userNotices}),!T.current&&E.current.map((e,t)=>{let i,l;return H.has(e?.pathDigest??"")&&(i=H.get(e?.pathDigest??"")??[]),B&&e?.pathDigest===B?.pathDigest&&(l=B?.indexWithinDigest??-1),(0,a.jsx)("div",{style:{paddingTop:16*(0!==t),left:3,right:3},children:(0,a.jsx)(rH,{diffEntryData:E,diffMatches:i,focusedSearchResult:l,onOptionCollapseToggle:G,index:t,contextLinePathURL:n,recalcTotalHeightOfVirtualWindow:ep.l,repo:r,helpUrl:q.helpUrl,oid:P,ignoreWhitespace:R})},e.pathDigest)}),T.current&&(0,a.jsx)("div",{style:{height:Z.getTotalSize(),width:"100%",position:"relative"},children:Z.getVirtualItems().map(e=>{let t,i,l=E.current[e.index];return(H.has(l?.pathDigest??"")&&(t=H.get(l?.pathDigest??"")??[]),B&&l?.pathDigest===B?.pathDigest&&(i=B?.indexWithinDigest??-1),l)?(0,a.jsx)("div",{ref:Z.measureElement,"data-index":e.index,style:{position:"absolute",paddingTop:16*(0!==e.index),left:3,right:3,transform:`translateY(${e.start-Z.options.scrollMargin}px)`},children:(0,a.jsx)(rH,{diffMatches:t,focusedSearchResult:i,diffEntryData:E,index:e.index,contextLinePathURL:n,onOptionCollapseToggle:G,recalcTotalHeightOfVirtualWindow:L,headerStickyOffset:-(e.start-Z.options.scrollMargin),helpUrl:q.helpUrl,repo:r,oid:P,ignoreWhitespace:R,virtualizerScrollTo:Z.scrollToIndex})},l.pathDigest):null})}),w.moreDiffsToLoad&&(0,a.jsxs)(a.Fragment,{children:[X.loading&&(0,a.jsx)(rX,{}),X.error&&(0,a.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:A,children:(0,a.jsx)(k.A,{variant:"danger",tabIndex:0,children:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function r0(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function r1(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{rY.displayName||(rY.displayName="Diffs")}catch{}try{rZ.displayName||(rZ.displayName="DiffsUnmemoized")}catch{}var r2=n(70170),r3=n(56051),r4=n(1946),r5=n(94195);let r8="diff_file_tree",r7=(0,d.memo)(r6);function r6({contentId:e,diffs:t,onFileSelected:n,diffsHeader:i,unselectedFileExtensions:r,onFilterTextChange:l,onFileExtensionsChange:s}){let[o,c]=(0,d.useState)(""),{getCommentCountByPath:u}=(0,eO.B)(),m=(0,d.useRef)(null),f=(0,d.useRef)(null),h=(0,d.useRef)(null),p=(0,d.useMemo)(()=>(0,eh.s2)(t),[t]),g=t;r&&r.size>0&&(g=g.filter(e=>!r.has((0,eh.QC)(e.path))));let x=(o?g.filter(e=>e.path.toLowerCase().includes(o.toLowerCase())):g).map(e=>{let t=u(e.path);return{...e,totalCommentsCount:t??0}});return(0,a.jsxs)("div",{className:"d-flex flex-column gap-2",id:r8,tabIndex:-1,children:[(0,a.jsx)(j.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":function(){let t=document.getElementById(e),n=document.getElementById(r8),i=!1;if(t?.contains(document.activeElement)&&(i=!0),i){let e=h.current||n;f.current=t?.contains(document.activeElement)?document.activeElement:null,e?.focus()}else{let e=f.current||t;h.current=n?.contains(document.activeElement)?document.activeElement:null,e?.focus()}}}}),(0,a.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,a.jsx)("div",{className:"d-md-none",ref:m,children:i}),(0,a.jsx)(r9,{filterText:o,onFilterTextChange:e=>{c(e),l(e)},fileExtensions:p,unselectedFileExtensions:r,onFileExtensionsChange:s}),(0,a.jsx)(r4.oj,{diffs:x,onSelect:()=>{n((0,r5.nn)(window.innerWidth)<=r5.Gy.medium?"close_tree":void 0)},sortByDiffOrder:!1})]})}function r9({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let l=(0,d.useRef)((0,r2.s)(e=>t(e),250));return(0,a.jsx)(r3.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>l.current(e),onFilterChange:(e,t)=>{r(e,t.extension)}})}try{r7.displayName||(r7.displayName="FileTree")}catch{}try{r6.displayName||(r6.displayName="FileTreeUnmemoized")}catch{}try{r9.displayName||(r9.displayName="FileFilter")}catch{}var ae=n(21935);async function at({repo:e,commitOid:t,untilCommentId:n}){let i=await (0,ev.Sr)((0,v.clg)({owner:e.ownerLogin,repo:e.name,commitOid:t,untilCommentId:n}));if(i.ok)return await i.json();throw Error("Failed to fetch comment data")}var an=n(8624),ai=n(71833);let ar={sm:r5.Gy.small,md:r5.Gy.medium,lg:r5.Gy.large},aa={size:"medium",mobileBreakpoint:"md"},al=(0,d.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function as({children:e,searchTerm:t,setSearchTerm:n}){let i=(0,d.useRef)(""),[r,l]=(0,d.useState)(!1),s=(0,d.useCallback)(e=>{e&&""===t&&""!==i.current?n(i.current):e||""===t||(i.current=t,n("")),l(e)},[t,n]),o=(0,d.useMemo)(()=>({diffFindOpen:r,setDiffFindOpen:s}),[r,s]);return(0,a.jsx)(al.Provider,{value:o,children:e})}try{al.displayName||(al.displayName="DiffFindOpenContext")}catch{}try{as.displayName||(as.displayName="DiffFindOpenProvider")}catch{}let ao=(0,C.E7)(),ac="diff-content-parent";function ad(){var e;let t;(0,L.L)(!0);let n=(0,c.B)(),{splitPagePaneHidden:i,splitPageContentHidden:r,treeToggleElement:s,collapseTree:u,isMobileTreeExpanded:m,isTreeExpanded:f}=function(e,t,n,i){let r={...aa,...void 0},[l]=(0,w.I)(()=>!1,!0,[]),s=(0,d.useRef)(null),o=(0,d.useRef)(null),c=ar[r.mobileBreakpoint??"md"],[u,m]=(0,d.useState)(t),[f,h]=(0,d.useState)(!1),p=(0,d.useCallback)(()=>{(0,r5.nn)(window.innerWidth)<=c?(h(!0),requestAnimationFrame(()=>o.current?.focus())):(m(!0),(0,ai.B)(!0,n),requestAnimationFrame(()=>s.current?.focus()))},[c,n]),g=(0,d.useCallback)(()=>{(0,r5.nn)(window.innerWidth)<=c?(h(!1),requestAnimationFrame(()=>o.current?.focus())):(m(!1),(0,ai.B)(!1,n),requestAnimationFrame(()=>s.current?.focus()))},[c,n]),x=(0,d.useMemo)(()=>(0,a.jsx)(an.L,{expanded:u,alignment:"left",ariaLabel:u?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{u?g():p()},className:`d-none d-${r.mobileBreakpoint}-flex position-relative`,size:r.size}),[u,e,r.mobileBreakpoint,r.size,g,p]),y=(0,d.useMemo)(()=>(0,a.jsx)(an.L,{expanded:f,alignment:"left",ariaLabel:f?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:o,onToggleExpanded:()=>{f?g():p()},className:`d-${r.mobileBreakpoint}-none position-relative`,size:r.size}),[f,e,r.mobileBreakpoint,r.size,g,p]);return{splitPagePaneHidden:l&&!t,splitPageContentHidden:{narrow:f,regular:!1},isTreeExpanded:u,isMobileTreeExpanded:f,expandTree:p,collapseTree:g,treeToggleElement:(0,d.useMemo)(()=>(0,a.jsxs)(a.Fragment,{children:[y,x]}),[y,x]),treeToggleRef:s}}(r8,n.fileTreeExpanded,n.currentUser),[h,k]=(0,d.useState)(()=>new Set),[E]=(0,w.I)(()=>!1,!0,[]),[I,D]=(0,d.useState)(""),[T,$]=(0,d.useState)(""),[M,O]=(0,d.useState)(!1),P=(0,d.useCallback)(e=>{"close_tree"===e&&u()},[u]),U=function(e){let t=(0,l.t)(),[n,i]=(0,d.useState)({branches:[],tags:[],loading:!0});return(0,d.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let r=await (0,ev.lS)((0,v.jnS)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(r.ok){let e=await r.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch{i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n}(n.commit.oid),B=(0,v.t0c)({owner:n.repo.ownerLogin,repo:n.repo.name,commitish:n.commit.oid}),{mutate:F}=(0,p.U)({onSuccess:()=>{},onError:()=>{}}),H=(0,g.C0)(n.splitViewPreference),z=(0,d.useMemo)(()=>({splitPreference:H,lineSpacing:n.diffLineSpacingPreference,commentsPreference:n.commentsPreference}),[n.commentsPreference,n.diffLineSpacingPreference,H]),{data:V}=(0,g.ID)(z),W=(0,d.useCallback)(()=>{F({commentsPreference:V?.commentsPreference===x.sI.Visible?x.sI.Collapsed:x.sI.Visible})},[V?.commentsPreference,F]),G=(0,d.useCallback)((e,t)=>{let n=new Set(h);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),k(n)},[h]);(0,d.useEffect)(()=>{k(new Set)},[n.commit]),(0,d.useEffect)(()=>{(N.cg?.scrollY??0)>0&&N.cg?.scrollTo(0,0)},[n.path]);let{deferredCommentData:q,state:K}=function(e,t){let[n,i]=(0,d.useState)(void 0),[r,a]=(0,d.useState)("initial");return(0,d.useEffect)(()=>{let n;i(void 0),a("loading");let r=N.cg?.location.hash;r&&/^#commitcomment-\d+$/.test(r)&&(n=r.replace("#commitcomment-","")),(async()=>{try{let r=await at({repo:e,commitOid:t,untilCommentId:n});i(r),a("loaded")}catch{a("error")}})()},[t,e]),{deferredCommentData:n,state:r}}(n.repo,n.commit.oid),X=q?.threadMarkers,Q=q?.inlineComments,[J,Y]=(0,d.useState)(!n.moreDiffsToLoad),[Z,ee]=(0,d.useState)(void 0);if((0,d.useEffect)(()=>{if("loaded"===K&&J){let e=N.cg?.location.hash.slice(1);if(e&&q){if(/^commitcomment-\d+$/.test(e))q?.discussionComments.comments.find(t=>t.urlFragment===e)&&N.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of q.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t)return void ee(n.id)}}}}}},[J,q,K]),n.unavailableReason)return(0,a.jsx)(em,{commit:n.commit,commitInfo:U,unavailableReason:n.unavailableReason});let[et,en]=[-2==(t=(e=n.diffEntryData).findIndex(e=>void 0===e.oldOid)-1)?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))];return(0,a.jsx)(C.mf,{environment:ao,children:(0,a.jsxs)(eO.r,{initialInlineComments:Q,initialFiles:X,initialExpandedThreadId:Z,children:[(0,a.jsx)(j.ak,{commands:{"commit-diff-view:create-permalink":()=>{let e=(0,v.$Qz)({owner:n.repo.ownerLogin,repo:n.repo.name,commitish:n.commit.oid});(0,b.kd)(e)},"commit-diff-view:collapse-expand-comments":W}}),(0,a.jsxs)(_.O7,{children:[(0,a.jsxs)(_.O7.Header,{children:[(0,a.jsx)(A,{commitBranchState:U,oid:n.commit.oid,repo:n.repo}),(0,a.jsx)(ec,{commit:n.commit,commitInfo:U,repo:n.repo})]}),(0,a.jsx)(_.O7.Pane,{position:"start",sticky:!0,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,className:(0,S.$)(i?"Commit-module__HiddenPane--CH19B":"Commit-module__Pane--jjRPV",m&&"Commit-module__MobileExpanded--TvGDJ",f&&"Commit-module__TreeExpanded--mn5GU"),children:(0,a.jsx)(o.t,{fallback:(0,a.jsx)("span",{children:"File tree failed to load."}),children:(0,a.jsx)(r7,{contentId:ac,diffs:en,onFileSelected:P,unselectedFileExtensions:h,diffsHeader:(0,a.jsx)(rG,{treeToggleElement:s,headerInfo:n.headerInfo}),onFileExtensionsChange:G,onFilterTextChange:D})})}),(0,a.jsx)(_.O7.Content,{as:"div",width:"full",hidden:r,padding:"none",className:"Commit-module__SplitPageLayout_Content--uy_M4",children:(0,a.jsxs)("div",{id:ac,tabIndex:-1,children:[E?(0,a.jsx)(rJ,{diffEntryData:et,contextLinePathURL:B,repo:n.repo,oid:n.commit.oid,treeToggleElement:s,headerInfo:n.headerInfo,totalFileCount:n.diffEntryData?.length??0}):(0,a.jsx)(as,{searchTerm:T,setSearchTerm:$,children:(0,a.jsx)(rY,{totalFileCount:n.diffEntryData?.length??0,treeToggleElement:s,headerInfo:n.headerInfo,isTreeExpanded:m,searchTerm:T,setSearchTerm:$,setCanFocusComments:Y,ignoreWhitespace:n.ignoreWhitespace,diffEntryData:et,contextLinePathURL:B,filterTerm:I,unselectedFileExtensions:h,repo:n.repo,oid:n.commit.oid})}),(0,a.jsx)(ae.c,{comments:q?.discussionComments?.comments,commentCount:q?.discussionComments?.count,canLoadMore:q?.discussionComments?.canLoadMore,subscribed:q?.subscribed,providerState:K,repo:n.repo,commitOid:n.commit.oid,children:(0,a.jsx)(R.$,{commit:n.commit,commentInfo:n.commentInfo,repoOwnerGlobalRelayId:n.repoOwnerGlobalRelayId})}),(0,a.jsx)(y.nq,{})]})})]})]})})}try{ad.displayName||(ad.displayName="Commit")}catch{}var au=n(69599);function am({url:e}){return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,a.jsxs)(B.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})}try{am.displayName||(am.displayName="CommitHelpMessage")}catch{}let af=(0,d.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function ah({filters:e,children:t}){return(0,a.jsx)(af.Provider,{value:e,children:t})}function ap(){return(0,d.useContext)(af)}try{af.displayName||(af.displayName="FilterContext")}catch{}try{ah.displayName||(ah.displayName="FilterProvider")}catch{}var ag=n(34745),ax=n(4095),ay=n(89830);function ab(){let e=ap();return e.newPath&&e.originalBranch}function av(){let e=(0,l.t)(),t=ap();return ab()?(0,a.jsx)(ay.s,{className:"FileHistory-module__TimelineRow--IgQLc",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(ay.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,a.jsx)(en.N,{to:(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function aC(){let e=(0,ax.ej)();return e?.hasRenameCommits?(0,a.jsx)(ay.s,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(ay.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,a.jsx)(en.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function aN(){let e=(0,ax.ej)();return e?.hasRenameCommits?null:(0,a.jsx)(ay.s,{clipTimeline:"bottom",children:(0,a.jsx)(ay.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function aj(){let e=ap(),t=(0,ax.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(ay.s,{leadingVisual:(0,a.jsx)(tb.A,{size:"small"})}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aC,{}),(0,a.jsx)(aN,{})]})]})}try{av.displayName||(av.displayName="RenamedToHistory")}catch{}try{aC.displayName||(aC.displayName="RenamedFromHistory")}catch{}try{aN.displayName||(aN.displayName="EndOfFileHistory")}catch{}try{aj.displayName||(aj.displayName="EndOfFile")}catch{}function aw({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i,r,s=ap(),o=(0,l.t)(),c=(0,W.wu)(t);return(0,a.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,a.jsx)(ag.f,{leadingContent:(0,a.jsx)(av,{}),commitGroups:e,trailingContent:(0,a.jsx)(aj,{}),repository:o,deferredCommitData:c,shouldClipTimeline:(i=ab(),r=ap(),!i&&!r.pagination.hasPreviousPage),currentBlobPath:s.currentBlobPath,softNavToCommit:n})]})}try{aw.displayName||(aw.displayName="CommitList")}catch{}var aL=n(92130),a_=n(4817),aS=n(54589),ak=n(62935);let aE="CopilotCommitRecapPanel-module__Box_4--G1Y8S",aI="CopilotCommitRecapPanel-module__Text_2--B03jL",aD="CopilotCommitRecapPanel-module__fadeInAuthor--sP6yf",aT="CopilotCommitRecapPanel-module__isHidden--XMEtq",aA=({size:e})=>(0,a.jsxs)(H.A,{className:"ml-2",variant:(e=>{switch(e.toUpperCase()){case"XS":case"S":return"success";case"M":return"attention";case"L":return"severe";case"XL":return"danger";default:return"secondary"}})(e),size:"small",children:["size: ",e]}),aR=({initials:e})=>(0,a.jsx)("div",{className:"CopilotCommitRecapPanel-module__Box--FD5ej",children:e.toUpperCase()}),a$=({login:e,avatarUrl:t,name:n,repoOwner:i,repoName:r,refName:l})=>{let s=(e=>{let t=e.trim();if(!t)return"??";let n=t.split(/\s+/).filter(e=>e.length>0);return n.length>=2?(n[0]?.charAt(0)||"")+(n[n.length-1]?.charAt(0)||""):t.charAt(0)+(t.charAt(1)||"")})(e||n);if(t&&e){let n=`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/commits${l?`/${encodeURIComponent(l)}`:""}?author=${encodeURIComponent(e)}`;return(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:"CopilotCommitRecapPanel-module__avatarLink--o9oMm",children:(0,a.jsx)(nb.r,{src:t,size:24,alt:`@${e}`})})}return(0,a.jsx)(aR,{initials:s})},aM=({author:e,repoOwner:t,repoName:n,refName:i,className:r})=>{if(e.login){let l=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/commits${i?`/${encodeURIComponent(i)}`:""}?author=${encodeURIComponent(e.login)}`;return(0,a.jsx)("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:`${r} CopilotCommitRecapPanel-module__authorNameLink--iNSl5`,children:e.name})}return(0,a.jsx)("span",{className:`${r} CopilotCommitRecapPanel-module__authorNameText--GppXf`,children:e.name})},aO=({pr:e,repoOwner:t,repoName:n})=>{let i=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/pull/${encodeURIComponent(e.number)}`;return(0,a.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"CopilotCommitRecapPanel-module__prLink--zm2QK",children:[(0,a.jsx)("span",{style:{color:"merged"===e.state?"var(--fgColor-done)":"var(--fgColor-open)"},children:(0,a.jsx)(u.GitPullRequestIcon,{size:16})}),(0,a.jsxs)("span",{children:["#",e.number]})]})},aP=({pr:e,commits:t,size:n,repoOwner:i,repoName:r})=>{let l=(()=>{if(1===t.length&&t[0])return(0,v.$Qz)({owner:i,repo:r,commitish:t[0].oid});if(t.length>=2){let e=t.filter(e=>e.author?.date&&""!==e.author.date.trim());if(e.length>=2){let t=[...e].sort((e,t)=>new Date(e.author.date).getTime()-new Date(t.author.date).getTime());if(t.length>=2){let e=t[0],n=t[t.length-1];if(e&&n)return`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/compare/${e.oid}^...${n.oid}`}}}return null})(),s=t.length;return(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__commitMetadataContainer--zl5sU",children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[l?(0,a.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"CopilotCommitRecapPanel-module__commitCountLink--OK0QX",children:[(0,a.jsx)(u.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}):(0,a.jsxs)("span",{className:"CopilotCommitRecapPanel-module__commitCountText--Ym2YE",children:[(0,a.jsx)(u.GitCommitIcon,{size:16}),1===s?"1 commit":`${s} commits`]}),n&&(0,a.jsx)(aA,{size:n})]}),e&&(0,a.jsx)(aO,{pr:e,repoOwner:i,repoName:r})]})},aU=[];function aB({isVisible:e,isLoading:t,analysis:n,repoOwner:i,repoName:r,refName:l,onClose:s,commitGroups:o=aU}){let c=(0,d.useRef)(null),m=(0,d.useRef)(null),{sendClickAnalyticsEvent:f}=(0,nD.S)(),[h,p]=(0,d.useState)(!1),g=n.analysisData,x=n.errorMessage,y=(0,d.useMemo)(()=>{let e=new Map;for(let t of g)e.set(t.oid,{summary:t.summary,size:t.size});return e},[g]),b=(0,d.useMemo)(()=>o&&0!==o.length?o.map((e,t)=>{let n=new Map;for(let t of e.commits)if(t.author){let e=t.author.login||t.author.name;n.has(e)||n.set(e,{login:t.author.login,avatarUrl:t.author.avatar_url,name:t.author.name})}return{groupIndex:t,authors:Array.from(n.values()),commitCount:e.commits.length,commits:e.commits,pr:e.pr}}):[],[o]),v=!!x,C=(0,d.useCallback)(e=>{f({category:"copilot.commit-recap",action:`feedback-${e}`,refName:l||""}),p(!0)},[f,l]),N=(0,d.useCallback)(()=>{f({category:"copilot.commit-recap",action:"panel-closed",refName:l||""}),s?.()},[s,f,l]);if((0,d.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&t.href&&f({category:"copilot.commit-recap",action:"link-clicked",refName:l||"",href:t.href})};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[e,l,g,f]),!e)return null;let j=0===g.length&&!v;return(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Box_1--nhXX2",ref:m,children:[(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Box_2--xtWb6",children:[(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__headerContainer--DVfrh",children:[(0,a.jsx)(E.A,{icon:u.CopilotIcon,className:"CopilotCommitRecapPanel-module__Octicon--mL7Wb"}),(0,a.jsx)(iL.A,{as:"h3",className:"CopilotCommitRecapPanel-module__Heading--xNRxb",children:"Commit recap"}),(0,a.jsx)(aS.X,{className:"pl-2"})]}),s&&(0,a.jsx)(F.K,{"aria-label":"Close commit recap",icon:u.XIcon,size:"small",variant:"invisible",onClick:N})]}),j&&(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Box_3--j9Ce0",children:[(0,a.jsx)("div",{className:aE,children:(0,a.jsx)(aL.A,{})}),(0,a.jsx)("span",{className:"CopilotCommitRecapPanel-module__Text--M5_1P",children:"Analyzing recent commits..."})]}),v&&(0,a.jsx)(k.A,{variant:"danger",className:aE,children:x}),g.length>0&&!v&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{ref:c,className:`CopilotCommitRecapPanel-module__Box_5--iXw2r ${aD}`,children:b.map((e,n)=>{let s=e.commits[0]?.oid,o=s?y.get(s):void 0,c=e.authors,d=e.commits.reduce((e,t)=>{let n=new Date(t.author?.date||0);return n>e?n:e},new Date(0));return o?(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Box_6--_r4Ho",children:[c.length>0&&(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Box_7--C0btw",children:[c.slice(0,3).map((e,s)=>(0,a.jsx)("div",{className:`${aD} ${t&&n===b.length-1?aT:""}`,style:{animationDelay:`${200*n+100*s}ms`},children:(0,a.jsx)(a$,{login:e.login,avatarUrl:e.avatarUrl,name:e.name,repoOwner:i,repoName:r,refName:l})},e.login||e.name)),c.length>3&&(0,a.jsxs)("span",{className:"CopilotCommitRecapPanel-module__Text_1--SYCkI",children:["+",c.length-3]})]}),(0,a.jsxs)("div",{className:`CopilotCommitRecapPanel-module__Box_8--ETSez ${aD}`,style:{animationDelay:`${200*n}ms`},children:[c.length>0&&(0,a.jsxs)("span",{children:[c.map((e,t)=>(0,a.jsxs)("span",{children:[(0,a.jsx)(aM,{author:e,repoOwner:i,repoName:r,refName:l,className:aD}),t<c.length-1&&", "]},e.login||e.name)),(0,a.jsx)(ak.A,{className:`${aD} CopilotCommitRecapPanel-module__relativeTime--dlXGT`,date:d})]}),(0,a.jsx)(a_.To,{markdown:o.summary,isStreaming:!1,openLinksInCurrentTab:!1})]}),e&&(0,a.jsx)("div",{className:`${aD} ${t&&n===b.length-1?aT:""}`,style:{animationDelay:`${200*n+300}ms`},children:(0,a.jsx)(aP,{pr:e.pr,commits:e.commits,size:e.commits.length>0&&e.commits[0]?.oid?y.get(e.commits[0].oid)?.size:void 0,repoOwner:i,repoName:r})})]},`commitGroup-${e.groupIndex}`):null})})}),(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__Footer--MlgKD",children:[(0,a.jsx)("span",{className:aI,children:"AI-generated content may be inaccurate. Please verify important information."}),h?(0,a.jsxs)("span",{className:aI,children:["Thank you. This feature is under development and ",(0,a.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeKJgUAL0ENwW13Qy-QuiihzSfXfs81vzP0Jc5FZX-CCNDJnQ/viewform",children:"detailed feedback"})," is appreciated!"]}):(0,a.jsxs)("div",{className:"CopilotCommitRecapPanel-module__FeedbackButtons--fU6am",children:[(0,a.jsx)(F.K,{"aria-label":"Good summary",icon:u.ThumbsupIcon,size:"small",variant:"invisible",onClick:()=>C("positive")}),(0,a.jsx)(F.K,{"aria-label":"Bad summary",icon:u.ThumbsdownIcon,size:"small",variant:"invisible",onClick:()=>C("negative")})]})]})]})}try{aA.displayName||(aA.displayName="SizeBadge")}catch{}try{aR.displayName||(aR.displayName="Monogram")}catch{}try{a$.displayName||(a$.displayName="AuthorAvatar")}catch{}try{aM.displayName||(aM.displayName="AuthorNameLink")}catch{}try{aO.displayName||(aO.displayName="RichPullRequestLink")}catch{}try{aP.displayName||(aP.displayName="CommitGroupMetadata")}catch{}try{aB.displayName||(aB.displayName="CopilotCommitRecapPanel")}catch{}var aF=n(66990),aH=n(96459),az=n(40058),aV=n(19415),aW=n(84929),aG=n(96912),aq=n(5225);async function aK(e){let t=await (0,ev.lS)(e);return t.ok?await t.json():void 0}let aX=new Map,aQ=(0,aq.A)(aK,{cache:aX});function aJ(e,t){let n=new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var aY=n(6907);let aZ=(0,d.lazy)(()=>Promise.resolve().then(n.bind(n,83463)).then(e=>({default:e.DatePicker}))),a0=()=>(0,a.jsx)(E.A,{icon:u.CalendarIcon,className:(0,S.$)("fgColor-muted","ListHeader-module__calendarIcon--ubuuD")});function a1({repo:e,refInfo:t,path:n,author:i,contributorsUrl:r,since:s,until:o,showCopilotButton:c=!1,showCopilotPopover:m=!1,onCopilotRecap:f,isLoadingCopilotRecap:h=!1}){let p=t.name;p===t.currentOid&&(p=(0,G.F)(t.currentOid));let g=(0,aH.Z)(),x=function(e){let t=(0,l.t)(),[n,i]=(0,d.useState)({users:[],error:!1,loading:!0});return(0,d.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await aQ(e);if(t)return;let r=[],a=!1;try{n?r=n.authors:a=!0}catch{a=!0}i({users:r,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n}(r),[y,b]=(0,d.useState)(m);d.useEffect(()=>{b(m)},[m]);let C=(0,d.useCallback)(async()=>{b(!1),await (0,ev.DI)("/settings/dismiss-notice/copilot_commit_recap_new_user_popover",{method:"POST"})},[]),N=d.useMemo(()=>{let e=(0,aW.H)(s??""),t=(0,aW.H)(o??"");return(0,aG.f)(e)&&(0,aG.f)(t)?{from:e,to:t}:null},[s,o]),j=n?.split("/");return(0,a.jsxs)($.B,{direction:"horizontal",gap:"condensed",justify:"space-between",className:"mb-3",children:[n&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,a.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,a.jsxs)(nA.BI,{className:"ml-1",children:[(0,a.jsx)(nA.BI.Item,{href:(0,v.GpY)({owner:e.ownerLogin,repo:e.name}),children:e.name}),j.map((n,i,r)=>{let l=(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:r.slice(0,i+1).join("/")}),s=i===r.length-1;return(0,a.jsx)(nA.BI.Item,{sx:{...s?{fontWeight:"bold"}:{}},href:l,selected:s,className:"ListHeader-module__breadcrumbItem--UVN4V",children:n},l)})]}),(0,a.jsxs)("div",{className:"no-wrap",children:[(0,a.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,a.jsx)(Y.A,{href:(0,v.IO9)({repo:e,commitish:t.name,action:"tree"}),children:p})]})]})}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,a.jsx)(aF.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,v.GpY)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,a.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[c&&(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)(U.Q,{variant:"default",leadingVisual:u.CopilotIcon,disabled:h,onClick:f,children:h?"Analyzing\u2026":"Commit recap"}),y&&(0,a.jsx)(aV.A,{relative:!1,open:!0,caret:"top",className:"mt-2",style:{left:"50%",transform:"translateX(-50%)"},children:(0,a.jsxs)(aV.A.Content,{overflow:"visible",className:"p-3",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("strong",{children:"Introducing the commit recap"})}),(0,a.jsx)("div",{className:"mb-3 text-small",children:"Groups together commits to cut through noise with summarized changes and linked pull requests."}),(0,a.jsx)("div",{className:"d-flex gap-2",children:(0,a.jsx)(U.Q,{size:"small",onClick:C,children:"OK, got it"})})]})})]}),(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,a.jsx)(az.T,{defaultText:"All users",width:"medium",usersState:x,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&g(aJ({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,a.jsx)("div",{className:"px-2 py-3 border-top border-color-border-default",children:(0,a.jsx)(U.Q,{variant:"link",as:"a",href:aJ({},["author"]),block:!0,children:"View commits for all users"})})}),(0,a.jsxs)(d.Suspense,{fallback:(0,a.jsx)(U.Q,{leadingVisual:a0,trailingVisual:u.TriangleDownIcon,children:"All time"}),children:[(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,a.jsx)(aZ,{variant:"range",value:N,minDate:new Date(2005,3,7),maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e)return void g(aJ({},["since","until"]));let t=function(e){if(e)return{startDate:(0,aY.x)(e.from,{representation:"date"}),endDate:(0,aY.x)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:n,endDate:i}=t;g(aJ({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,a.jsx)(U.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:a0,trailingVisual:u.TriangleDownIcon,children:e})})]})]})]})}try{aZ.displayName||(aZ.displayName="DatePicker")}catch{}try{a0.displayName||(a0.displayName="StyledCalendarIcon")}catch{}try{a1.displayName||(a1.displayName="ListHeader")}catch{}function a2({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};if(!t&&!n)return null;let{sx:r,...l}=i(!t);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iL.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,a.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsxs)(n8.A,{children:[(0,a.jsx)(nA.$n,{as:en.N,to:a3(e,!1),className:"fgColor-accent text-normal",...l,sx:r,tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,a.jsx)(E.A,{icon:u.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,a.jsx)(nA.$n,{as:en.N,to:a3(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,a.jsx)(E.A,{icon:u.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]})}function a3(e,t){return aJ(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{a2.displayName||(a2.displayName="Pagination")}catch{}var a4=n(67084);function a5({children:e,title:t}){return(0,a.jsxs)(a4.M,{rowGap:"none",children:[(0,a.jsx)(a4.M.Header,{divider:"line",className:"Layout-module__LayoutHeader--pSMxQ",children:(0,a.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,a.jsx)(iL.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,a.jsx)(a4.M.Content,{as:"div",children:(0,a.jsx)("div",{children:e})})]})}try{a5.displayName||(a5.displayName="Layout")}catch{}var a8=n(21067),a7=n(65411),a6=n(25641),a9=n(53419),le=n(97286);let lt="Failed to generate commit recap";function ln(e,t,n,i,r){let a=i?` at path ${i}`:"";return`Below is a JSON array of metadata for a series of commits in the repository ${e}/${t}${a} on branch ${n}.

${JSON.stringify(r,null,2)}

Each entry in the array represents metadata for a group of commits. These groups represent logical units of work, such as those merged together from a pull request or by the same author in a short timeframe.

You will provide an analysis of each commit group, writing a brief summary and scoring its size in terms of the file.

#### oid

This is the oid value of the first commit in the commit group, used as an identifier to ensure proper ordering.

#### summary

- These are terse, succinct paragraphs of 1-2 sentences, summarizing the work represented by the commit group.
- Focus on the content of the included commit diffEntries as a source of truth.
- Prefer a past-tense imperative "changelog entry" style, in simple, even "telegraphic" terms. Start the first sentence with a verb.
- Avoid directly referencing the author or the pull request that contributed the change.
- Avoid using the file as an object in the sentence, it's self-evident that the changes are being made to the file.
- Consider both the specific structure of the changes (functions/templates/config values/etc) and the general impact on the nature and purpose of the file.
- Descriptive context like the explicit purpose/intent of a change (from the commit message, pull request title, or pull request body) of the change may be used.
- If that context includes links (such as to a GitHub issue) that are NOT the author or pull request, you may include them in markdown format.
- Obvious or implicit intent ("simplify the codebase", "improve maintainability", "resolve syntax error") should not be mentioned.
- Good examples of summaries:
  - "Extracted most of the module to another file as part of Project Tailspin, moving the encoding helpers and deleting some unused functions."
  - "Updated config values for the \`GreatApp\` integration to increase max instances and resolve [incident #49](https://github.com/foo/bar/issues/123).
  - "Removed unused function \`functionName\`."
  - "Fixed typo in a variable name."
- Bad examples of summaries:
  - "Deleted functions \`func1\`, \`func2\`, \`func3\` and \`func4\` from the file, improving the code for readability".
  - "This commit by @monalisa in [pull request #49](https://github.com/foo/bar/pulls/49) adds a new feature to the application, improving the user experience."

#### size
- This is a "t-shirt size" subjectively scoring both the scope and impact of the changes in the commit group.
- Sizes include XS, S, M, L, XL.
- This should be judged entirely from the commit diffEntries and the nature and purpose of the file.
- The cognitive complexity of the changes is more important than the number of lines changed. "Added" is simpler than "updated".
- Examples of XS changes:
  - cleanly deleting a large number of unused functions
  - renaming a variable throughout a file via find-and-replace
  - a simple typo fix
- Examples of S changes:
  - created the file, which is simple and contains a couple helper functions imported elsewhere
  - flipping a couple configuration values
  - adding a new function
  - removing a section of markup to get rid of some HTML content
- Examples of M changes:
  - adding couple new functions that supply a new data field in an existing function
  - updating how one complex function works without changing its interface
- Example of L changes:
  - broke one complex function into several simpler ones, but also changed the initial arguments provided from elsewhere
  - created the file, which contains several API handlers with callbacks, imported dependecies, and dynamic templating
- Example of XL changes:
  - removed one of the two sections of configuraiton encapsulated by this file
  - complete overhaul of a class, fundamentally changing its interface and internal logic

Return your analysis as a JSON array of objects each containing these three fields, corresponding to the order of the provided commit groups:

[
  {
    "oid": "commit_oid_1",
    "summary": "Brief summary of the changes",
    "size": "S"
  },
  {
    "oid": "commit_oid_2",
    "summary": "Brief summary of the changes",
    "size": "M"
  }
]
`}function li(e){return Math.ceil(e.length/3)}function lr(e,t){let{refName:n,blobPath:i,...r}=t;(0,a9.BI)(`copilot.commit-recap.${e}`,{refName:n,blobPath:i||null,...r})}async function la(e,t,n,i){let r=i.currentBlobPath||"",a=new URLSearchParams;a.append("name",n),i.since&&a.append("since",i.since),i.until&&a.append("until",i.until),i.author&&a.append("author",i.author.login);let l=r?`/${e}/${t}/commit_recap/${encodeURIComponent(r)}?${a}`:`/${e}/${t}/commit_recap.json?${a}`;try{let e=await (0,ev.lS)(l,{headers:{Accept:"application/json"}});if(!e.ok)throw lr("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_failed",statusCode:e.status}),Error(`Failed to fetch commit groups: ${e.status}`);let t=await e.json(),a=t.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return lr("commit-groups-returned",{refName:n,blobPath:r,totalGroups:t.length,groupTypeCounts:a,hasAuthorFilter:!!i.author,hasDateFilters:!!(i.since||i.until)}),t}catch(e){throw lr("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_error",errorMessage:e instanceof Error?e.message:String(e)}),e}}async function ll(e,t,n,i){let r=new URLSearchParams;r.append("name",n);let a=i?`/${e}/${t}/commit_recap_check/${encodeURIComponent(i)}?${r}`:`/${e}/${t}/commit_recap_check.json?${r}`;try{let e=await (0,ev.lS)(a,{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`Failed to check path: ${e.status}`);return await e.json()}catch(e){throw e}}async function ls(e,t,n,i){try{let r=i.currentBlobPath||"",a="pull_request"===n.type&&n.commits.length>0?[n.commits[0]?.oid].filter(Boolean):n.commits.map(e=>e.oid),l=new URLSearchParams;l.append("commit_oids",a.join(","));let s=r?`/${e}/${t}/commit_recap_diffs/${encodeURIComponent(r)}?${l}`:`/${e}/${t}/commit_recap_diffs.json?${l}`,o=await (0,ev.lS)(s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(o.ok){let e=await o.json();return{...n,diffEntries:e.diff_entries||[]}}return{...n,diffEntries:[]}}catch{return{...n,diffEntries:[]}}}async function lo(e,t,n,i,r,a,l){let s=ln(i,r,a,n,e),o=function(e){let t=e.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{}),n=new Set,i=new Set;for(let t of e){for(let e of t.commits)e.author?.login&&n.add(e.author.login);t.pr?.number&&i.add(t.pr.number)}return{groupTypeCounts:t,authorsInBatch:n,pullRequestsInBatch:i,hasDiffData:e.some(e=>e.diffEntries&&e.diffEntries.length>0)}}(e);lr("capi-request-sent",{refName:a,blobPath:n,batchSize:e.length,tokenCount:li(s),groupTypeCounts:o.groupTypeCounts,uniqueAuthorsCount:o.authorsInBatch.size,uniquePullRequestsCount:o.pullRequestsInBatch.size,hasDiffData:o.hasDiffData});try{let i=await (0,a6.p)({basePath:(0,a8._$)().copilotApiOverrideUrl||"https://api.githubcopilot.com",body:{messages:[{role:"user",content:s}],model:"gpt-4o-mini",stream:!1,responseFormat:{type:"json_schema",jsonSchema:{name:"CommitGroupAnalysisList",description:"Array of commit group analyses with summaries and size assessments",strict:!0,schema:{type:"array",items:{type:"object",additionalProperties:!1,properties:{oid:{type:"string",description:"The oid value of the first commit in the commit group, used as an identifier to ensure proper ordering."},summary:{type:"string",description:"A brief summary of the work represented by the commit group."},size:{type:"string",enum:["XS","S","M","L","XL"],description:"A t-shirt size scoring both the scope and impact of the changes in the commit group."}},required:["oid","summary","size"]}}}},temperature:.3},path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:t,integrationId:"copilot-directory"});if(i.ok){let t,r=await i.json(),s=r.choices?.[0]?.message?.content;if(!s)throw Error("No analysis content received from Copilot API");if("object"==typeof s)t=s;else try{let e=s;e.startsWith(`\`\`\`json
`)&&e.endsWith(`
\`\`\``)?e=e.slice(8,-4):e.startsWith(`\`\`\`
`)&&e.endsWith(`
\`\`\``)&&(e=e.slice(4,-4)),t=JSON.parse(e)}catch{throw Error("Invalid analysis response format")}let c=new Map(e.filter(e=>e.commits.length>0).map((e,t)=>[e.commits[0]?.oid,t])),d=t?.sort((e,t)=>{let n=c.get(e.oid)??Number.MAX_SAFE_INTEGER,i=c.get(t.oid)??Number.MAX_SAFE_INTEGER;return n-i}),u=d.map(e=>(console.log(`Commit group ${e.oid}: Size ${e.size}`),e.summary)).join(`

`);l(e=>[...e,...d]),lr("capi-response-received",{refName:a,blobPath:n,batchSize:e.length,responseLength:u.length,linkedAuthorsPercentage:o.authorsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`@${i}`)||e.includes(i))&&n++;return n}(u,o.authorsInBatch)/o.authorsInBatch.size:0,linkedPullRequestsPercentage:o.pullRequestsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`#${i}`)||e.includes(`[#${i}]`))&&n++;return n}(u,o.pullRequestsInBatch)/o.pullRequestsInBatch.size:0})}else throw lr("failed",{refName:a,blobPath:n,reason:"capi_response_not_ok",statusCode:i.status}),Error(lt)}catch(e){throw lr("failed",{refName:a,blobPath:n,reason:"capi_request_failed",errorMessage:e instanceof Error?e.message:String(e)}),e}}var lc=n(57028);function ld(){let e=(0,l.t)(),t=(0,V.D)(),n=(0,c.B)(),i=n.filters,r=n.commitGroups,s=n.metadata?.softNavToCommit||!1,o=(0,au.G7)("copilot_commit_recap"),{response:u,isLoadingCopilotRecap:m,commitGroups:f,showRecapPanel:h,showRecapButton:p,showRecapPopover:g,handleCopilotRecap:x,handleCloseRecap:y}=function({repoOwner:e,repoName:t,refName:n,defaultBranch:i,filters:r}){let[a,l]=(0,d.useState)([]),[s,o]=(0,d.useState)(""),[c,u]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!1),h=(0,d.useRef)(!1),p=(0,d.useRef)(null),g=(0,au.G7)("copilot_commit_recap"),x=n||i||"main",{data:y,isSuccess:b,isFetching:v,refetch:C}=(0,le.I)({queryKey:["commit-rollup",e,t,x,r],queryFn:()=>la(e,t,x,r),enabled:!1}),{data:N,isSuccess:j,refetch:w}=(0,le.I)({queryKey:["path-check",e,t,x,r.currentBlobPath],queryFn:()=>ll(e,t,x,r.currentBlobPath||""),enabled:g&&!!r.currentBlobPath}),L=(0,d.useMemo)(()=>y||[],[y]),_=(0,d.useMemo)(()=>!!r.currentBlobPath&&(void 0===N||N?.is_file!==!1),[N,r.currentBlobPath]),S=(0,d.useMemo)(()=>_&&N?.show_popover===!0,[_,N]),k=(0,d.useCallback)(async n=>{if(0!==n.length&&!h.current){h.current=!0,f(!0),l([]),o("");try{let i=r.currentBlobPath||"",a=new a7.JR([]),s=await a.getAuthToken(),o=li(ln(e,t,x,i,[])),c=[],d=o;for(let a=0;a<n.length;a++){let u=n[a];if(!u)continue;let m=await ls(e,t,u,r),f=li(JSON.stringify(m,null,2));d+f>16e3&&c.length>0?(await lo(c,s,i,e,t,x,l),c=[m],d=o+f):(c.push(m),d+=f)}c.length>0&&await lo(c,s,i,e,t,x,l)}catch{o(lt)}finally{f(!1),h.current=!1}}},[e,t,x,r]);(0,d.useEffect)(()=>{b&&c&&L.length>0&&!h.current&&k(L)},[b,c,L,k]);let E=(0,d.useCallback)(async()=>{if(lr("requested",{refName:x,blobPath:r.currentBlobPath||"",hasAuthorFilter:!!r.author,hasDateFilters:!!(r.since||r.until)}),l([]),o(""),!r.currentBlobPath){u(!0),b&&0!==L.length||C();return}if(N?.is_file===!0)u(!0),b&&0!==L.length||C();else try{let e=await w();e.data?.is_file===!0?(u(!0),b&&0!==L.length||C()):u(!1)}catch{u(!1)}},[C,w,x,r,b,L,N]),I=(0,d.useCallback)(()=>{u(!1),l([]),o(""),f(!1),h.current=!1},[]);return((0,d.useEffect)(()=>{let e=p.current;if(null===e){p.current=r;return}(e.pagination?.endCursor!==r.pagination?.endCursor||e.pagination?.startCursor!==r.pagination?.startCursor||e.since!==r.since||e.until!==r.until||e.author?.login!==r.author?.login||e.currentBlobPath!==r.currentBlobPath)&&c&&(u(!1),l([]),o(""),f(!1),h.current=!1),p.current=r},[r,c]),g)?{response:{analysisData:a,errorMessage:s},analysisData:a,errorMessage:s,isLoadingCopilotRecap:v||m,triggerAnalysis:k,commitGroups:L,showRecapPanel:c,showRecapButton:_,showRecapPopover:S,handleCopilotRecap:E,handleCloseRecap:I}:{response:{analysisData:[],errorMessage:""},analysisData:[],errorMessage:"",isLoadingCopilotRecap:!1,commitGroups:[],showRecapPanel:!1,showRecapButton:!1,showRecapPopover:!1,handleCopilotRecap:()=>{},handleCloseRecap:()=>{}}}({repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,defaultBranch:e.defaultBranch,filters:i}),b=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,d.useEffect)(()=>{if(!N.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,a.jsx)(ah,{filters:n.filters,children:(0,a.jsxs)(a5,{title:"Commits",children:[(0,a.jsx)(a1,{repo:e,contributorsUrl:n.metadata?.deferredContributorUrl||"",since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,showCopilotButton:o&&p,showCopilotPopover:g,onCopilotRecap:x,isLoadingCopilotRecap:m}),o&&(0,a.jsx)(aB,{isVisible:h,isLoading:m,analysis:u,repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,onClose:y,commitGroups:f}),0===r.length&&(0,a.jsx)(lc.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:b}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aw,{commitGroups:r,deferredDataUrl:n.metadata?.deferredDataUrl||"",softNavToCommit:s}),(0,a.jsx)(a2,{paginationInfo:i.pagination})]}),n.metadata?.showProfileHelp&&(0,a.jsx)(am,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{ld.displayName||(ld.displayName="Commits")}catch{}(0,r.o)("commits",()=>({App:h,routes:[(0,i.a)({path:"/:owner/:repo/commits",Component:ld}),(0,i.a)({path:"/:owner/:repo/commits/:ref",Component:ld}),(0,i.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:ld}),(0,i.a)({path:"/:owner/:repo/commit/:oid",Component:ad}),(0,i.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:ad}),(0,i.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:ad})]}))},65787:(e,t,n)=>{n.d(t,{U:()=>a});let i=e=>{let t=getComputedStyle(e,null);return!!t&&"function"==typeof t.getPropertyValue&&["overflow","overflow-y","overflow-x"].some(e=>{let n=t.getPropertyValue(e);return"auto"===n||"scroll"===n})},r=(e,t)=>e&&null!==e.parentNode?r(e.parentNode,t.concat([e])):t;function a(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(let t of r(e.parentNode,[]))if((t instanceof HTMLElement||t instanceof SVGElement)&&i(t))return t;return document.scrollingElement||document.documentElement}}},70263:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(88431),r=n(96540);function a(){let e=(0,r.useRef)(!1),t=(0,r.useCallback)(()=>e.current,[]);return(0,i.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},70837:(e,t,n)=>{n.d(t,{O:()=>i});function i(e="ha"){let t,n={};for(let i of Array.from(document.head.querySelectorAll(`meta[name^="${e}-"]`))){let{name:r,content:a}=i,l=r.replace(`${e}-`,"").replace(/-/g,"_");"url"===l?t=a:n[l]=a}if(!t)throw Error(`AnalyticsClient ${e}-url meta tag not found`);return{collectorUrl:t,...Object.keys(n).length>0?{baseContext:n}:{}}}},75735:(e,t,n)=>{n.d(t,{_:()=>l});var i=n(5570),r=n(37351),a=n(44953);function l(e,t,n,l){return(0,r._)(e,t),(0,a._)(n,"set"),(0,i._)(e,n,l),l}},77430:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(74848),r=n(71315),a=n(12683),l=n(96540);let s=(0,l.forwardRef)(function({src:e,size:t=20,sx:n,...s},o){let c=(0,l.useMemo)(()=>{let n=new URL(e,r.fV.origin);return n.searchParams.has("size")||n.searchParams.has("s")||n.searchParams.set("size",String(2*Number(t))),n.toString()},[e,t]);return(0,i.jsx)(a.eu,{src:c,size:t,"data-testid":"github-avatar",sx:n,...s,ref:o})});try{s.displayName||(s.displayName="GitHubAvatar")}catch{}},80154:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(41917),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=r&&"object"==typeof module&&module&&!module.nodeType&&module,l=a&&a.exports===r?i.A.Buffer:void 0,s=l?l.allocUnsafe:void 0;let o=function(e,t){if(t)return e.slice();var n=e.length,i=s?s(n):new e.constructor(n);return e.copy(i),i}},81075:(e,t,n)=>{n.d(t,{_:()=>l});var i=n(50894),r=n(37351),a=n(44953);function l(e,t,n){return(0,r._)(e,t),(0,a._)(n,"get"),(0,i._)(e,n)}},81945:(e,t,n)=>{n.d(t,{O:()=>c});var i=n(12683),r=n(38267);let a=(0,r.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,r.AH)(["animation:"," 1.5s infinite linear;"],a),s=(0,r.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),o=(0,r.AH)(["animation:"," 2s infinite linear;"],s),c=(0,r.Ay)(i.az).withConfig({displayName:"LoadingSkeleton",componentId:"sc-6893f3e-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&o,({animationStyle:e})=>"pulse"!==e&&l,(0,i.yB)("colors.neutral.subtle"),(0,i.yB)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,i.yB)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},i.sx);try{c.displayName||(c.displayName="LoadingSkeleton")}catch{}},84171:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(17299);let r=function(){try{var e=(0,i.A)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},84363:(e,t,n)=>{n.d(t,{t:()=>r});var i=n(59403);let r=({items:e,filter:t,key:n,secondaryKey:r})=>{let a=e.map(e=>[(0,i.dt)(t,n(e)),e]);return r&&(a=a.map(([e,n])=>[Math.max(e,(0,i.dt)(t,r(n))),n])),a.filter(([e])=>e>i.IP).sort(([e,t],[i,r])=>i===e?n(t).localeCompare(n(r)):i-e).map(([,e])=>e)}},84929:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(2940);function r(e,t){let n,r,p=t?.additionalDigits??2,g=function(e){let t,n={},i=e.split(a);if(i.length>2)return n;if(/:/.test(i[0])?t=i[0]:(n.date=i[0],t=i[1],l.test(n.date)&&(n.date=e.split(l)[0],t=e.substr(n.date.length,e.length))),t){let e=s.exec(t);e?(n.time=t.replace(e[1],""),n.timezone=e[1]):n.time=t}return n}(e);if(g.date){let e=function(e,t){let n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(n);if(!i)return{year:NaN,restDateString:""};let r=i[1]?parseInt(i[1]):null,a=i[2]?parseInt(i[2]):null;return{year:null===a?r:100*a,restDateString:e.slice((i[1]||i[2]).length)}}(g.date,p);n=function(e,t){var n,i,r,a,l,s,c,d,m,p;if(null===t)return new Date(NaN);let g=e.match(o);if(!g)return new Date(NaN);let x=!!g[4],y=u(g[1]),b=u(g[2])-1,v=u(g[3]),C=u(g[4]),N=u(g[5])-1;if(x){let e,s;return(n=C,i=N,n>=1&&n<=53&&i>=0&&i<=6)?(r=t,a=C,l=N,(e=new Date(0)).setUTCFullYear(r,0,4),s=e.getUTCDay()||7,e.setUTCDate(e.getUTCDate()+((a-1)*7+l+1-s)),e):new Date(NaN)}{let e=new Date(0);return(s=t,c=b,d=v,c>=0&&c<=11&&d>=1&&d<=(f[c]||(h(s)?29:28))&&(m=t,(p=y)>=1&&p<=(h(m)?366:365)))?(e.setUTCFullYear(t,b,Math.max(y,v)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);let x=n.getTime(),y=0;if(g.time&&isNaN(y=function(e){var t,n,r;let a=e.match(c);if(!a)return NaN;let l=m(a[1]),s=m(a[2]),o=m(a[3]);return(t=l,n=s,r=o,24===t?0===n&&0===r:r>=0&&r<60&&n>=0&&n<60&&t>=0&&t<25)?l*i.s0+s*i.Cg+1e3*o:NaN}(g.time)))return new Date(NaN);if(g.timezone){if(isNaN(r=function(e){var t;if("Z"===e)return 0;let n=e.match(d);if(!n)return 0;let r="+"===n[1]?-1:1,a=parseInt(n[2]),l=n[3]&&parseInt(n[3])||0;return(t=l)>=0&&t<=59?r*(a*i.s0+l*i.Cg):NaN}(g.timezone)))return new Date(NaN)}else{let e=new Date(x+y),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(x+y+r)}let a=/[T ]/,l=/[Z ]/i,s=/([Z+-].*)$/,o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e){return e?parseInt(e):1}function m(e){return e&&parseFloat(e.replace(",","."))||0}let f=[31,null,31,30,31,30,31,31,30,31,30,31];function h(e){return e%400==0||e%4==0&&e%100!=0}},88098:(e,t,n)=>{n.d(t,{u:()=>s});var i=n(74848),r=n(21728),a=n(34164);let l={diffSquare:"DiffSquares-module__diffSquare--KZMTU",addition:"DiffSquares-module__addition--kxGde",deletion:"DiffSquares-module__deletion--vyEtU",neutral:"DiffSquares-module__neutral--_tGgY"};function s(e){let t,n,a=(0,r.c)(4),{squares:l}=e;return a[0]!==l?(t=l.map(o),a[0]=l,a[1]=t):t=a[1],a[2]!==t?(n=(0,i.jsx)("div",{className:"d-flex",children:t}),a[2]=t,a[3]=n):n=a[3],n}function o(e,t){return(0,i.jsx)("div",{"data-testid":`${e} diffstat`,className:(0,a.$)(l.diffSquare,l[e])},t)}try{s.displayName||(s.displayName="DiffSquares")}catch{}},90565:(e,t,n)=>{n.d(t,{A:()=>r});var i=n(43988);let r=function(e){var t=new e.constructor(e.byteLength);return new i.A(t).set(new i.A(e)),t}},91618:(e,t,n)=>{n.d(t,{z:()=>l});var i=n(74848),r=n(21728),a=n(88098);function l(e){let t,n,l,s,o,c,d,u=(0,r.c)(20),{linesAdded:m,linesDeleted:f,linesChanged:h}=e,p=void 0===m?0:m,g=void 0===f?0:f,x=void 0===h?0:h;if(!p&&!g&&!x||0===x)return null;if(u[0]!==p||u[1]!==x||u[2]!==g){var y,b,v;let e,n,i,{greenSquares:r,redSquares:a,graySquares:l}=(y=p,b=g,n=Math.floor(y*(e=(v=x)>5?5/v:1)),{greenSquares:n,redSquares:i=Math.floor(b*e),graySquares:5-n-i});t=[...Array(r).fill("addition"),...Array(a).fill("deletion"),...Array(l).fill("neutral")],u[0]=p,u[1]=x,u[2]=g,u[3]=t}else t=u[3];let C=t;return u[4]!==p?(n=p>0&&(0,i.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-success",children:["+",p.toLocaleString()]}),u[4]=p,u[5]=n):n=u[5],u[6]!==g?(l=g>0&&(0,i.jsxs)("span",{"aria-hidden":"true",className:"f6 text-bold fgColor-danger",children:["-",g.toLocaleString()]}),u[6]=g,u[7]=l):l=u[7],u[8]!==p||u[9]!==g?(s=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:p,linesDeleted:g}),u[8]=p,u[9]=g,u[10]=s):s=u[10],u[11]!==s?(o=(0,i.jsx)("span",{className:"sr-only",children:s}),u[11]=s,u[12]=o):o=u[12],u[13]!==C?(c=(0,i.jsx)(a.u,{squares:C}),u[13]=C,u[14]=c):c=u[14],u[15]!==n||u[16]!==l||u[17]!==o||u[18]!==c?(d=(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-1 pl-1",children:[n,l,o,c]}),u[15]=n,u[16]=l,u[17]=o,u[18]=c,u[19]=d):d=u[19],d}try{l.displayName||(l.displayName="DiffStats")}catch{}},92130:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(74848),r=n(21728),a=n(74807);function l(e){let t,n,l=(0,r.c)(3),{hidden:s}=e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(a.N,{animationType:a.L.Idle,loopAnimation:!0,size:64}),l[0]=t):t=l[0],l[1]!==s?(n=(0,i.jsx)("div",{"aria-hidden":s,children:t}),l[1]=s,l[2]=n):n=l[2],n}try{l.displayName||(l.displayName="CopilotIconAnimation")}catch{}},94195:(e,t,n)=>{n.d(t,{Gy:()=>c,LB:()=>h,nn:()=>p,lm:()=>m});var i=n(74848),r=n(96540);let a=null,l=null,s=new Set;function o(e){return s.add(e),a||(a=new ResizeObserver(()=>{l||(l=requestAnimationFrame(()=>{for(let e of(l=null,s))e()}))})).observe(document.documentElement),()=>{s.delete(e),0===s.size&&a&&(a.disconnect(),a=null)}}let c={small:1,medium:544,large:768,xlarge:1012,xxlarge:1280,xxxlarge:1350,xxxxlarge:1440},d=[c.xxxxlarge,c.xxxlarge,c.xxlarge,c.xlarge,c.large,c.medium,c.small],u=r.createContext({screenSize:c.small});function m(){return r.useContext(u)}function f(){return p(window.innerWidth)}function h({children:e,initialValue:t=c.small}){let n=(0,r.useSyncExternalStore)(o,f,(0,r.useCallback)(()=>t,[t])),a=(0,r.useMemo)(()=>({screenSize:n}),[n]);return(0,i.jsx)(u.Provider,{value:a,children:e})}function p(e){for(let t of d)if(e>=t)return t;return c.small}try{u.displayName||(u.displayName="ScreenContext")}catch{}try{h.displayName||(h.displayName="ScreenSizeProvider")}catch{}}},e=>{e.O(0,[3088,43934,82216,67733,11683,913,6488,12979,48775,42892,23832,99418,30587,72471,55229,33915,4712,3086,82081,96537,28546,51220,18312,42478,347,89101,11580,62318,65863,15874,45230,13345,5918,25407,83494,83463,87670,40771,72238,66990,37294,30721,2635,81171,10306,29665,4817,50312,62917,42945,6623,44185,26548,59744,97633,98540],()=>e(e.s=65001)),e.O()}]);
//# sourceMappingURL=commits-764006258012.js.map